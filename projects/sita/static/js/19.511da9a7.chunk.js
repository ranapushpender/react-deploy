(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[19],{3957:function(e,t,a){},3958:function(e,t,a){},3999:function(e,t,a){"use strict";a.r(t);a(38);var n=a(21),i=a.n(n),l=(a(204),a(52)),r=a.n(l),c=a(2),s=a(19),u=a(1),o=a.n(u),m=a(6),d=a(8),f=(a(149),a(69)),v=a.n(f),b=a(0),p=a.n(b),y=a(28),g=a(10),h=a(57),E=a(13),O=a(11),j=a(25),D=j.f().shape({tciClassification:j.g().required("TCI Classification is required"),includeDefaultMonuments:j.b().required("Default monument is required")}),x=[{name:"Luxury",value:"lux"},{name:"First Class",value:"first-class"},{name:"Moderate",value:"moderate"},{name:"Budget",value:"budget"},{name:"Home Stay Luxury",value:"home-stay-lux"},{name:"Home Stay First Class",value:"home-stay-first-class"},{name:"Home Stay Moderate",value:"home-stay-moderate"},{name:"Home Stay Budget",value:"home-stay-budget"},{name:"Houseboat Luxury",value:"houseboat-lux"},{name:"Houseboat First Class",value:"houseboat-first-class"},{name:"Houseboat Moderate",value:"houseboat-moderate"}],I=[{id:1,name:"Bottled Miniral Water",value:"bottledMiniralwater"},{id:2,name:"Refreshments",value:"refreshments"},{id:3,name:"Dental Kits",value:"dentalKits"},{id:4,name:"Sanitary Kits",value:"sanitaryKits"},{id:5,name:"Towel Kits",value:"towelKits"}],C=[{name:"Five Star",value:"5str"},{name:"Four Star",value:"4str"},{name:"Three Star",value:"3str"},{name:"Two Star",value:"2str"},{name:"One Star",value:"1str"},{name:"Home Stay",value:"home-stay"},{name:"Heritage",value:"heritage"},{name:"Houseboat Platinum",value:"houseboat-platinum"},{name:"Houseboat Gold",value:"houseboat-gold"},{name:"Houseboat Silver",value:"houseboat-silver"},{name:"Five Star Luxury",value:"5str-lux"}],S=a(22),N=(a(159),a(93)),k=a.n(N),P=(a(539),a(366)),A=a.n(P),T=(a(86),a(34)),w=a.n(T),L=(a(446),a(168)),M=a.n(L),U=(a(141),a(77)),Y=a.n(U),q=a(15),F=a.n(q),Q=[{id:"custom",name:"Custom",isCustomized:!1,amenityPackageItemList:[],additionalItems:[]}],B=(a(3957),a(78)),H=a(188),z=a(309),V=a(84),K=a(12),R=a(1009);function J(e){return{type:R.a,payload:e}}var _=function(e){return function(){var t=Object(m.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.a.getAmenityPackage(e);case 3:n=t.sent,a(J(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Object(K.a)(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},G=function(e,t){return function(){var a=Object(m.a)(o.a.mark((function a(n){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.a.addAmenityPackage(e,t);case 3:(i=a.sent).data&&n(J(i.data)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),Object(K.a)(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},W=function(e,t,a){return function(){var n=Object(m.a)(o.a.mark((function n(i){var l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,V.a.updateAmenityPackage(e,t,a);case 3:(l=n.sent).data&&i(J(l.data)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),Object(K.a)(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},X=function(e,t){return function(){var a=Object(m.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.a.deleteAmenityPackage(e,t);case 3:a.sent,a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),Object(K.a)(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()},Z=a(184),$=v.a.Text,ee=function(e){return p.a.createElement("input",Object.assign({className:"my-custom-input",type:"text"},e))},te=Object(y.b)((function(e){var t=e.Queries,a=e.itenaryData,n=e.Products,i=t.amenity.amenity,l=a.itenaryQueryDetails.stayDetails,r=a.itenaryQueryDetails.travellers,c=t.root.priceBreakdown,s=n.amenities.amenityItems;return{amenity:i,travellersData:r,stayDetails:l,breakdown:c,currency:t.root.currency.code,totalPages:s.totalPages}}),(function(e){return{getAmenityPacks:Object(g.b)(H.h,e),getAmenityItems:Object(g.b)(z.c,e),getAmenity:Object(g.b)(_,e),updateAmenity:Object(g.b)(W,e),addAmenity:Object(g.b)(G,e),deleteAmenity:Object(g.b)(X,e)}}))((function(e){var t=Object(O.q)().get("id"),a=Object(b.useState)(1),n=Object(d.a)(a,2),l=n[0],r=n[1],u=Object(b.useState)([]),f=Object(d.a)(u,2),v=(f[0],f[1],Object(b.useState)(!1)),y=Object(d.a)(v,2),g=y[0],h=y[1],j=Object(b.useState)(null),D=Object(d.a)(j,2),x=D[0],I=D[1],C=Object(b.useState)(!1),N=Object(d.a)(C,2),P=N[0],T=N[1],L=Object(b.useState)(Q),U=Object(d.a)(L,2),q=U[0],H=U[1],z=Object(b.useState)([]),V=Object(d.a)(z,2),K=V[0],R=V[1],J=Object(b.useState)(0),_=Object(d.a)(J,2),G=(_[0],_[1],Object(b.useState)(0)),W=Object(d.a)(G,2),X=(W[0],W[1],Object(b.useState)(1)),te=Object(d.a)(X,2),ae=(te[0],te[1],Object(b.useState)(1)),ne=Object(d.a)(ae,2),ie=(ne[0],ne[1],Object(b.useState)(!1)),le=Object(d.a)(ie,2),re=le[0],ce=le[1],se=(Object(b.useRef)(null),Object(b.useRef)());var ue=function(t){Object(m.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getAmenityItems("AM60000","issued",t);case 2:n=a.sent,r(1),R(n);case 5:case"end":return a.stop()}}),a)})))()},oe=Object(B.debounce)(ue,300),me=function(){var a=Object(m.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.deleteAmenity(t,e.amenity.amenityId);case 2:return a.next=4,e.getAmenity(t);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(b.useEffect)((function(){Object(m.a)(o.a.mark((function a(){var n,i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getAmenityPacks("AM60000","","issued");case 2:return n=a.sent,H(n?[].concat(Object(s.a)(n),Object(s.a)(q)):Object(s.a)(q)),a.next=6,e.getAmenityItems("AM60000","issued","",l);case 6:i=a.sent,R(i),e.getAmenity(t);case 9:case"end":return a.stop()}}),a)})))()}),[]),Object(b.useEffect)((function(){var t=e.amenity?Object(B.cloneDeep)(e.amenity):null;if(e.amenity&&q.length>0){var a,n=q.find((function(t){var a;return t.id==(null===e||void 0===e||null===(a=e.amenity)||void 0===a?void 0:a.id)})),i=Object(B.cloneDeep)(null===(a=e.amenity)||void 0===a?void 0:a.amenityPackageItemList);t.amenityPackageItemList=i.filter((function(e){return null===n||void 0===n?void 0:n.amenityPackageItemList.find((function(t){return t.item.id==e.item.id}))}))||[],t.additionalItems=i.filter((function(e){return!(null===n||void 0===n?void 0:n.amenityPackageItemList.find((function(t){return t.item.id==e.item.id})))}))||[]}e.handleAmenityChange(t)}),[e.amenity]),Object(b.useEffect)((function(){g&&ue("")}),[g]),Object(b.useEffect)((function(){Object(m.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAmenityItems("AM60000","issued","",l);case 2:a=t.sent,0!==K.length&&R([].concat(Object(s.a)(K),Object(s.a)(a)));case 4:case"end":return t.stop()}}),t)})))()}),[l]),p.a.createElement("div",{className:"amenity-packs-container"},p.a.createElement("div",{className:"amenities-listing mb-10"},q.map((function(t){var a,n,i,l,r,c,u,o,m,d,f,v,b;t.id==(null===(a=e.currentVal)||void 0===a?void 0:a.id)&&((t=Object(B.cloneDeep)(e.currentVal)).isCustomized=(null===(v=e.currentVal)||void 0===v||null===(b=v.additionalItems)||void 0===b?void 0:b.length)>0);null===(n=t)||void 0===n||null===(i=n.amenityPackageItemList)||void 0===i||i.reduce((function(e,t){return e+t.numberOfUnits*t.item.unitPrice}),0);null===(l=t)||void 0===l||null===(r=l.additionalItems)||void 0===r||r.reduce((function(e,t){return e+t.numberOfUnits*t.item.unitPrice}),0);var y=[].concat(Object(s.a)(t.amenityPackageItemList),Object(s.a)(t.additionalItems||[]));return p.a.createElement("div",{className:"amenities-list-item ".concat(t.id==(null===(c=e.currentVal)||void 0===c?void 0:c.id)?"selected":"")},p.a.createElement("div",{className:"amenities-details"},p.a.createElement("div",{className:"amenities-details-header"},p.a.createElement("h6",null,t.name),t.isCustomized&&p.a.createElement("p",{className:"pill pill-blue"},"Customized")),p.a.createElement("p",{className:"amenities-items"},y.slice(0,3).map((function(e,t){return(t>0?", ":"")+e.item.name})),y.slice(3).length>0?p.a.createElement(Y.a,{placement:"right",title:null===y||void 0===y||null===(u=y.slice(3))||void 0===u||null===(o=u.map((function(e){return e.item.name})))||void 0===o?void 0:o.join(", ")},p.a.createElement("span",{style:{cursor:"pointer"}},"+ ",y.slice(3).length," More")):null)),p.a.createElement("div",{className:"amenities-cost"},p.a.createElement("div",{className:"cost-price"},p.a.createElement("p",{className:"mb-4"},"Per Person"),p.a.createElement("h5",null,e.currency," ",(null===(m=e.amenity)||void 0===m||null===(d=m.proposedCost)||void 0===d||null===(f=d.perPersonCost)||void 0===f?void 0:f.toFixed(2))||"0"," ")),p.a.createElement("div",{style:{width:"10px",height:"10px"}})),p.a.createElement("div",{className:"amenities-operations"},p.a.createElement("img",{className:"ml-16",src:"/img/edit-blue.svg",onClick:function(){I(t),h(!0),T(!0)}}),p.a.createElement("img",{className:"mr-16",style:{width:"15px",height:"15px"},src:"/img/delete.svg",onClick:function(){return me(t)}}),p.a.createElement("div",{className:"check-button",onClick:function(){var a;t.id!=(null===(a=e.currentVal)||void 0===a?void 0:a.id)?(T(!1),I(t),h(!0)):console.log("clicked")}},p.a.createElement("img",{src:"/img/check-white.svg"}))))}))),p.a.createElement(k.a,{wrapClassName:"amenities-modal-wrapper",visible:g,okText:"Save Details",cancelText:"Cancel",onOk:function(){ce(!1),se.current&&se.current.handleSubmit()},onCancel:function(){ce(!1),P||I(null),h(!1)},width:"800px",destroyOnClose:!0},p.a.createElement("div",{className:"amenities-modal",id:"amenities-modal"},p.a.createElement(E.e,{innerRef:se,enableReinitialize:!0,initialValues:x,onSubmit:function(){var a=Object(m.a)(o.a.mark((function a(n){var i,l,r,c,u,m,d,f,v,b,p,y;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(b="final"==e.scheduleType?F()(null===(i=e.finalSchedule)||void 0===i?void 0:i.arrivalDate).format("YYYY-MM-DD"):F()(null===(l=e.flexibleSchedule)||void 0===l?void 0:l.startDate).format("YYYY-MM-DD"),p="final"==e.scheduleType?F()(null===(r=e.finalSchedule)||void 0===r?void 0:r.departureDate).format("YYYY-MM-DD"):F()(null===(c=e.flexibleSchedule)||void 0===c?void 0:c.startDate).add(null===(u=e.flexibleSchedule)||void 0===u?void 0:u.lengthOfStay,"days").format("YYYY-MM-DD"),y={startDate:b,endDate:p,businessCode:"AM60000",name:n.name,packageId:"custom"==n.id?null:n.id,packageItem:[].concat(Object(s.a)(n.amenityPackageItemList.map((function(e){return{id:e.id,itemId:e.item.id,itemName:e.item.name,numberOfUnit:e.numberOfUnits,perUnitPrice:e.item.unitPrice,distributionUnit:e.item.distributionUnit}}))),Object(s.a)((null===(m=n.additionalItems)||void 0===m?void 0:m.map((function(e){return{id:e.id,itemId:e.item.id,itemName:e.item.name,numberOfUnit:e.numberOfUnits,perUnitPrice:e.item.unitPrice,distributionUnit:e.item.distributionUnit}})))||[])),currency:(null===e||void 0===e?void 0:e.currency)||""},(null===(d=n.additionalItems)||void 0===d?void 0:d.length)||(null===n||void 0===n||null===(f=n.amenityPackageItemList)||void 0===f?void 0:f.length)){a.next=5;break}return a.abrupt("return");case 5:if((null===(v=n.additionalItems)||void 0===v?void 0:v.length)>0?n.isCustomized=!0:n.isCustomized=!1,null!=e.amenity){a.next=11;break}return a.next=9,e.addAmenity(t,y);case 9:a.next=13;break;case 11:return a.next=13,e.updateAmenity(t,e.amenity.amenityId,y);case 13:return a.next=15,e.getAmenity(t);case 15:I(n),h(!1);case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},(function(t){t.onSubmit;var a,n,u,o,m,d=t.values,f=t.setFieldValue,v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p.a.createElement(E.c,{name:"".concat(e),render:function(a){var n;return null===(n=d[e])||void 0===n?void 0:n.map((function(n,i){return p.a.createElement("tr",null,p.a.createElement("td",null,t&&p.a.createElement("img",{src:"/img/trash-blue.svg",onClick:function(){return a.remove(i)}})),p.a.createElement("td",null,n.item.name),p.a.createElement("td",null,n.item.distributionUnit),p.a.createElement("td",null,p.a.createElement(E.b,{as:ee,type:"number",min:"1",validate:function(e){return e&&e>0?null:"This field should be non 0"},value:n.numberOfUnits,name:"".concat(e,".").concat(i,".numberOfUnits"),onChange:function(t){f("".concat(e,".").concat(i,".numberOfUnits"),t.target.value>0||!t.target.value?t.target.value:1)}}),p.a.createElement(E.a,{name:"".concat(e,".").concat(i,".numberOfUnits"),render:function(e){return p.a.createElement("div",null,p.a.createElement($,{type:"danger"},e))}})),p.a.createElement("td",null,n.item.unitPrice),p.a.createElement("td",{className:"flex justify-between"},p.a.createElement("span",null,n.numberOfUnits?n.numberOfUnits*n.item.unitPrice:0),p.a.createElement(Y.a,{placement:"right",title:p.a.createElement("spam",null,"".concat(n.item.unitPrice," x ").concat(n.numberOfUnits," = ").concat(n.numberOfUnits*n.item.unitPrice))},p.a.createElement("span",{className:"i-icon"},"i"))))}))}})},b=d.amenityPackageItemList.reduce((function(e,t){return e+t.numberOfUnits*t.item.unitPrice}),0);b+=(null===(a=d.additionalItems)||void 0===a?void 0:a.reduce((function(e,t){return e+t.numberOfUnits*t.item.unitPrice}),0))||0;var y=!(null===(n=d.amenityPackageItemList)||void 0===n?void 0:n.length)&&!(null===(u=d.additionalItems)||void 0===u?void 0:u.length),g=d.amenityPackageItemList.map((function(e){return e.item.id}));return d.additionalItems&&(g=[].concat(Object(s.a)(g),Object(s.a)(d.additionalItems.map((function(e){return e.item.id}))))),p.a.createElement("div",null,p.a.createElement("div",{className:"header"},p.a.createElement("h2",null,"Custom"!=d.name&&"Customize"," ",d.name),p.a.createElement("div",null,p.a.createElement("div",{className:"flex items-center"},p.a.createElement("div",{style:{width:"200px"}},p.a.createElement("div",{style:{visibility:re?"visible":"hidden"}},p.a.createElement(A.a,{visible:re,getPopupContainer:function(){return document.getElementById("amenities-modal")},overlay:p.a.createElement("div",{className:"product-dd"},p.a.createElement("div",{className:"pt-8 pl-6 pr-8"},p.a.createElement(E.b,{component:S.b,name:"productSearch",placeholder:"Search products",value:d.productSearch,onChange:function(e){oe(e.target.value)}})),p.a.createElement(M.a,{selectable:!1},null===K||void 0===K||null===(o=K.filter((function(e){return!g.includes(e.id)})))||void 0===o?void 0:o.map((function(e){return p.a.createElement(M.a.Item,{onClick:function(){var t=K.find((function(t){return t.id==e.id}));f("additionalItems",[].concat(Object(s.a)(d.additionalItems||[]),[{id:null,numberOfUnits:1,item:Object(c.a)({},t)}]))}},p.a.createElement("span",{className:"product-names"},e.name),p.a.createElement("span",{className:"plus-icon"},"+"))})),p.a.createElement(Z.a,{onChange:function(t){return function(t){+l>=+e.totalPages||t&&r(l+1)}(t)}},p.a.createElement("div",{style:{height:"10px"}}),+l<+e.totalPages&&p.a.createElement(w.a,{loading:!0,active:!0}))),p.a.createElement("div",{className:"dropdown-cancel-button"},p.a.createElement(i.a,{onClick:function(){ce(!1)}},"OK")))},p.a.createElement("div",{className:"dropdown-placeholder"})))),p.a.createElement("div",{className:"mb-12 ml-12 add-btn-plus",onClick:function(){ce(!re)}},p.a.createElement("span",{className:"mb-6"},"+"))))),p.a.createElement("div",{className:"amenities-table",onClick:function(){ce(!1)}},p.a.createElement("table",null,p.a.createElement("tr",null,[{title:""},{title:"Products"},{title:"Distribution Units"},{title:"No. of Units"},{title:"Unit Price"},{title:"Total Price"}].map((function(e){return p.a.createElement("th",null,e.title)}))),v("amenityPackageItemList"),(null===(m=d.additionalItems)||void 0===m?void 0:m.length)>0&&v("additionalItems",!0),!y&&p.a.createElement("tr",null,p.a.createElement("td",{colSpan:"6"},p.a.createElement("div",{className:"amenities-cost"},p.a.createElement("div",{className:"cost-price"},p.a.createElement("h5",null,e.currency," ",b)),p.a.createElement("div",{style:{width:"10px",height:"10px"}}))))),y?p.a.createElement("div",{className:"empty"},p.a.createElement("div",{className:"empty-img"},p.a.createElement("img",{src:"/img/Empty.svg"})),p.a.createElement("h2",null,"Start building your package"),p.a.createElement("h3",null,"Click on the \u2018+\u2019 to start adding products")):null))})))))})),ae=(a(3958),v.a.Text),ne=function(e){var t=Object(h.g)(),a=Object(h.i)().state;return p.a.createElement(k.a,{visible:!0,closable:!1,keyboard:!1,footer:null,width:"510px",centered:!0,className:"query-success-modal"},p.a.createElement("section",{className:"hero w-100 flex justify-center items-center"},p.a.createElement("img",{src:"/img/QueryIcons/query-success.svg"})),p.a.createElement("section",{className:"content flex flex-col items-center justify-center"},p.a.createElement(ae,{className:"bold text-28 mt-10"},"edit"===a?"Query Edited":"Query Added"," Successfully"),p.a.createElement(ae,{className:"mt-10 content-summary"},"The query has been saved to active quries list. You can choose to build the itenarary now or do this later."),p.a.createElement(i.a,{onClick:function(){t.push("/queries/".concat(e.queryId,"?tab=overview")),e.clearFormData()},className:"mt-20 bold",type:"primary"},"Start Planning Itenary"),p.a.createElement(i.a,{onClick:function(){t.push("/queries"),e.clearFormData()},className:"mt-10 bold",type:"link"},"Do it Later")))},ie=a(212),le=v.a.Text;var re=Object(y.b)((function(e){var t,a,n,i,l,r,c,s;return{queryId:e.QueryDetails.queryId,preferencesAndInclusions:e.QueryDetails.preferencesAndInclusions,tourCategories:e.QueryDetails.tourCategories,tourDifficulties:e.QueryDetails.tourDifficulties,tourThemes:e.QueryDetails.tourThemes,currency:null===(t=e.QueryDetails)||void 0===t||null===(a=t.basicInformation)||void 0===a?void 0:a.currency,finalSchedule:null===(n=e.QueryDetails)||void 0===n||null===(i=n.stayDetails)||void 0===i?void 0:i.finalSchedule,flexibleSchedule:null===(l=e.QueryDetails)||void 0===l||null===(r=l.stayDetails)||void 0===r?void 0:r.flexibleSchedule,scheduleType:null===(c=e.QueryDetails)||void 0===c||null===(s=c.stayDetails)||void 0===s?void 0:s.scheduleType}}),(function(e){return{getAllQueryDetailsData:Object(g.b)(ie.h,e),getPreferencesAndInclusionsDetailsData:Object(g.b)(ie.p,e),setPreferencesAndInclusionsDetailsData:Object(g.b)(ie.y,e),getAllTourCategoriesList:Object(g.b)(ie.k,e),getAllTourDifficultiesList:Object(g.b)(ie.l,e),getAllTourThemesList:Object(g.b)(ie.m,e),clearFormData:Object(g.b)(ie.a,e),getBasicInformationData:Object(g.b)(ie.n,e),getStayDetailsData:Object(g.b)(ie.r,e)}}))((function(e){var t=Object(O.q)().get("id"),a=Object(h.i)().state,n=Object(b.useState)(!1),l=Object(d.a)(n,2),u=l[0],f=l[1],v=Object(b.useState)(""),y=Object(d.a)(v,2),g=y[0],j=y[1],N=Object(b.useState)({difficultyLevel:"",tourCategory:"",tourThemes:[],tciClassification:"",officialClassification:null,includeDefaultMonuments:!0}),k=Object(d.a)(N,2),P=k[0],A=k[1],T=function(e){j(e)};Object(b.useEffect)((function(){e.getPreferencesAndInclusionsDetailsData(t),e.setVisitedForms((function(e){return e.concat("preferences-and-inclusions")})),e.getAllTourCategoriesList(),e.getBasicInformationData(t),e.getStayDetailsData(t)}),[]),Object(b.useEffect)((function(){function t(){return(t=Object(m.a)(o.a.mark((function t(){var a,n,i,l,r,c,s,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllTourDifficultiesList();case 2:return t.sent,t.next=5,e.getAllTourThemesList((null===(a=e.preferencesAndInclusions)||void 0===a?void 0:a.tourThemes.length)?null===(n=e.preferencesAndInclusions)||void 0===n?void 0:n.tourThemes[0].id:"");case 5:t.sent,s=e.preferencesAndInclusions.tourThemesSpecializations.map((function(e){return e.id})),u={tourCategory:(null===(i=e.preferencesAndInclusions)||void 0===i?void 0:i.tourThemes.length)?null===(l=e.preferencesAndInclusions)||void 0===l?void 0:l.tourThemes[0].id:[],difficultyLevel:null===(r=e.preferencesAndInclusions)||void 0===r||null===(c=r.difficultyLevel)||void 0===c?void 0:c.id,tourThemes:s,tciClassification:e.preferencesAndInclusions.tciClassification,officialClassification:e.preferencesAndInclusions.officialClassification,includeDefaultMonuments:e.preferencesAndInclusions.includeDefaultMonuments},A(u);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}"edit"===a&&function(){t.apply(this,arguments)}()}),[e.preferencesAndInclusions]);var w=function(){var a=Object(m.a)(o.a.mark((function a(n){var i,l,r,u,m,d,v;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.tourCategories.find((function(e){return e.id===n.tourCategory})),l=e.tourDifficulties.find((function(e){return e.id===n.difficultyLevel})),r=n.tourThemes.map((function(t){return{id:e.tourThemes.find((function(e){return e.id===t})).id,name:e.tourThemes.find((function(e){return e.id===t})).name}})),u=i?{id:i.id,name:i.name}:null,m=l?{id:l.id,name:l.name}:null,d=r?Object(s.a)(r):[],v=Object(c.a)(Object(c.a)({},n),{},{difficultyLevel:m,tourThemes:u?[u]:null,tourThemesSpecializations:d}),a.next=9,e.setPreferencesAndInclusionsDetailsData(t,v);case 9:a.sent&&f(!0);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return p.a.createElement("div",{"data-test":"preferences-and-inclusions",className:"preferences-and-inclusions",id:"preferences_and_inclusions"},p.a.createElement("div",null,p.a.createElement("div",null,p.a.createElement("div",null,p.a.createElement(E.e,{enableReinitialize:!0,initialValues:P,validationSchema:D,onSubmit:function(e){return w(e)}},(function(t){var a=t.setFieldValue,n=t.isSubmitting,l=t.values;return p.a.createElement(p.a.Fragment,null,p.a.createElement(E.d,null,p.a.createElement("div",{className:"mt-10 mb-30"},p.a.createElement("div",{className:"mt-10 mb-20 form-grid grid-2"},p.a.createElement("div",{className:"relative",id:"tour-category"},p.a.createElement("p",{className:"bold mb-12"},"Select Theme"),p.a.createElement(E.b,{component:S.d,name:"tourCategory",label:"Select Theme",value:l.tourCategory,getPopupContainer:function(){return document.getElementById("tour-category")},selectOptions:e.tourCategories,onSelect:function(t){a("tourCategory",t);var n=e.tourCategories.find((function(e){return t===e.value})).id;e.getAllTourDifficultiesList(),e.getAllTourThemesList(n),a("tourThemes",[]),a("difficultyLevel","")}}))),p.a.createElement("div",{className:"mt-10 mb-20 form-grid grid-2"},p.a.createElement("div",{className:"relative",id:"tour-themes"},p.a.createElement("p",{className:"bold mb-12"},"Specialisations"),p.a.createElement(E.b,{component:S.d,mode:"multiple",name:"tourThemes",label:e.specialityText||"Select Specialisations",value:l.tourThemes,getPopupContainer:function(){return document.getElementById("tour-themes")},selectOptions:e.tourThemes}))),p.a.createElement("div",{className:"mt-10 mb-20 form-grid grid-2"},p.a.createElement("div",{className:"relative",id:"tour-difficulty"},p.a.createElement("p",{className:"bold mb-12"},"Difficulty Level"),p.a.createElement(E.b,{component:S.d,name:"difficultyLevel",label:"Select Difficulty Level",value:l.difficultyLevel,getPopupContainer:function(){return document.getElementById("tour-difficulty")},selectOptions:e.tourDifficulties}))),p.a.createElement("div",{className:"mt-10 mb-20 form-grid grid-2"},p.a.createElement("div",{className:"relative",id:"tci"},p.a.createElement("p",{className:"bold mb-12"},"TCI Classification *"),p.a.createElement(E.b,{component:S.d,name:"tciClassification",label:"TCI Classification",value:l.tciClassification,getPopupContainer:function(){return document.getElementById("tci")},selectOptions:x}))),p.a.createElement("div",{className:"mt-10 mb-20 form-grid grid-2"},p.a.createElement("div",{className:"relative",id:"official"},p.a.createElement("p",{className:"bold mb-12"},"Official Classification"),p.a.createElement(E.b,{component:S.d,name:"officialClassification",label:"Official Classification",allowClear:!0,value:l.officialClassification,getPopupContainer:function(){return document.getElementById("official")},selectOptions:C})))),p.a.createElement("div",{className:"mt-10 mb-20"},p.a.createElement(le,{className:"bold",strong:!0},"Default Monuments?"),p.a.createElement("div",{className:"form-grid grid-4"},p.a.createElement("div",{role:"radiogroup"},p.a.createElement("label",null,p.a.createElement(E.b,{as:r.a,type:"radio",name:"includeDefaultMonuments",value:!0}),"Yes"),p.a.createElement("label",{className:"ml-20"},p.a.createElement(E.b,{as:r.a,type:"radio",name:"includeDefaultMonuments",value:!1}),"No")))),p.a.createElement("div",{className:"mt-20 "},p.a.createElement(le,{className:"bold",strong:!0},"Amenity Packs"),p.a.createElement("div",{className:"mt-10 mb-20"},p.a.createElement(te,{addOnsOptions:I,currentVal:g,handleAmenityChange:T,finalSchedule:e.finalSchedule,flexibleSchedule:e.flexibleSchedule,scheduleType:e.scheduleType}))),p.a.createElement("div",{className:"flex flex-start mb-20"},p.a.createElement(i.a,{loading:n,type:"primary",htmlType:"submit"},n?"Saving...":"Submit"))))}))))),u&&p.a.createElement(ne,{setShowSuccessModal:f,queryId:t,clearFormData:e.clearFormData}))}));t.default=re}}]);