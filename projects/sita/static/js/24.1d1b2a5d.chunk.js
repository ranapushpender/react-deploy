(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[24],{3895:function(e,t,a){},4007:function(e,t,a){"use strict";a.r(t);a(38);var n=a(21),c=a.n(n),r=(a(76),a(44)),i=a.n(r),l=(a(284),a(129)),s=a.n(l),o=(a(86),a(34)),u=a.n(o),d=a(2),m=a(1),f=a.n(m),b=a(6),v=a(8),p=(a(149),a(69)),O=a.n(p),h=a(83),g=a.n(h),E=a(13),y=a(0),j=a.n(y),x=a(28),R=a(57),C=a(10),N=a(70),k=a(137),w=a(89),B=a(11),S=a(22),A=a(55);a(3895),O.a.Text;var T=Object(x.b)((function(e){var t=e.Products.meetAndGreet;return{tabStatus:t.tabStatus.status,baseRate:t.branchOfficeBaseRate,branchOfficeRates:t.branchOfficeRates}}),(function(e){return{getMeetAndGreetDetails:Object(C.b)(k.k,e),updateMeetAndGreetBranchOfficeBaseRate:Object(C.b)(k.u,e),createNewMeetAndGreet:Object(C.b)(k.g,e),createConveyanceRate:Object(C.b)(k.e,e),updateConveyanceRate:Object(C.b)(k.t,e),deleteConveyanceRate:Object(C.b)(k.i,e),getPublishedSuppliersListByType:Object(C.b)(w.h,e)}}))((function(e){var t=Object(B.q)(),a=(t.get("tab"),t.get("stage")),n=(t.get("contractId"),Object(R.i)()),r=n.id,l=n.productType,o=Object(R.g)(),m=e.loader,p=e.className,O=e.isCompletelyFilled,h=e.isReadOnlyMode,x=Object(y.useState)(!1),C=Object(v.a)(x,2),k=C[0],w=C[1],T=Object(y.useState)([]),F=Object(v.a)(T,2),M=F[0],G=F[1],I=Object(y.useState)([]),z=Object(v.a)(I,2),D=z[0],U=z[1],V=Object(y.useState)(null),q=Object(v.a)(V,2),P=q[0],J=q[1],L=Object(y.useState)(!1),H=Object(v.a)(L,2),K=H[0],Q=H[1],W=Object(y.useState)(!1),X=Object(v.a)(W,2),Y=X[0],Z=X[1],$=Object(y.useState)([]),_=Object(v.a)($,2),ee=_[0],te=_[1],ae=Object(y.useState)({branchOfficeBaseRate:""}),ne=Object(v.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(y.useState)({branchOffice:"",conveyanceRate:""}),le=Object(v.a)(ie,2),se=le[0],oe=le[1],ue=function(){var t=Object(b.a)(f.a.mark((function t(a){var n,c,r,i,l,s,o=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:"",i=o.length>2?o[2]:void 0,t.next=4,e.getPublishedSuppliersListByType(r,a,i);case 4:l=t.sent,s=null===l||void 0===l||null===(n=l.data)||void 0===n||null===(c=n.content)||void 0===c?void 0:c.map((function(e){return{code:e.businessCode,name:e.name}})),U(s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(y.useEffect)((function(){"new"!==r?e.getMeetAndGreetDetails(r,a):Q(!0)}),[r]),Object(y.useEffect)((function(){re({branchOfficeBaseRate:e.baseRate})}),[e.baseRate]);var de=[{title:"BO Name",dataIndex:"name",key:"name",render:function(e){return j.a.createElement("div",null,e)}},{title:"Conveyance",dataIndex:"conveyance",key:"conveyance"},{title:"",dataIndex:"actions",key:"actions",render:function(e){return h?j.a.createElement("div",null):j.a.createElement("div",{className:"flex justify-end"},j.a.createElement("img",{onClick:function(){var t;t=e,oe(Object(d.a)(Object(d.a)({},t),{},{branchOffice:t.branchOfficeCode})),J(t),U([{name:t.branchOfficeName,code:t.branchOfficeCode}]),Z(!0)},className:"cursor-pointer",src:"/img/edit.svg"}),j.a.createElement("img",{onClick:function(){J(e),w(!0)},className:"cursor-pointer ml-20",src:"/img/trash-blue.svg"}))}}];Object(y.useEffect)((function(){var t;ue("","branch-office");var a=null===(t=e.branchOfficeRates)||void 0===t?void 0:t.map((function(e,t){return{key:e.id,id:e.id,name:e.branchOfficeName,conveyance:e.conveyanceRate,actions:e}}));G(a),te(e.branchOfficeRates.map((function(e){return e.branchOfficeCode})))}),[e.branchOfficeRates]);var me=function(){var t=Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.deleteConveyanceRate(r,null===P||void 0===P?void 0:P.id);case 2:J(null),w(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),fe=!!(null===m||void 0===m?void 0:m.isFetching);null===m||void 0===m||m.errors;return j.a.createElement("div",{className:"product-hotel-room-configurations ".concat(p)},j.a.createElement(i.a,{type:"inner",title:j.a.createElement("div",{className:"flex flex-col"},j.a.createElement("p",null,"Basic Details *",O?B.k:j.a.createElement(g.a,{twoToneColor:"#ea9300"}))),extra:j.a.createElement(j.a.Fragment,null,h||fe?j.a.createElement("div",null):!fe&&j.a.createElement("div",{className:"flex items-center"},j.a.createElement("div",{onClick:function(){return Q(!0)},className:"flex items-center cursor-pointer"},j.a.createElement("img",{src:"/img/edit.svg"}),j.a.createElement("p",{className:"text-14 semibold ml-10"},"Edit Base Rate")),j.a.createElement("div",{onClick:function(){oe({branchOffice:"",conveyanceRate:""}),Z(!0)},className:"ml-20 flex items-center cursor-pointer"},j.a.createElement("img",{src:"/img/plus.svg"}),j.a.createElement("p",{className:"text-14 semibold ml-10"},"Add Conveyance"))))},fe?j.a.createElement(u.a,{active:!0}):j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"mb-6"},"Meet & Greet Base Rate:"," ",j.a.createElement("span",{className:"semibold capitalize"},e.baseRate)),j.a.createElement(s.a,{pagination:!1,dataSource:M,columns:de}))),j.a.createElement(A.a,{width:"390px",title:j.a.createElement("div",{className:"flex"},j.a.createElement("p",{className:"flex items-center color-black weight-700 size-22"},"new"===r?"Add":"Update"," Branch Office Base Rate")),destroyOnClose:!0,visible:K,onCancel:function(){"new"===r?o.push("/resources/".concat(l)):Q(!1)}},j.a.createElement(E.e,{enableReinitialize:!0,initialValues:ce,onSubmit:function(){var t=Object(b.a)(f.a.mark((function t(a,n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.isSubmitting,t.next=3,e.updateMeetAndGreetBranchOfficeBaseRate(r,a);case 3:Q(!1),c(!1);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){e.setFieldValue;var t=e.isSubmitting,a=e.values;e.errors;return j.a.createElement("div",{id:"product-guide-basic-details"},j.a.createElement(E.d,null,j.a.createElement("div",{className:"mt-16 form-grid grid-1"},j.a.createElement(E.b,{component:S.b,label:"Branch Office Base Rate *",value:Object(B.g)(a,"branchOfficeBaseRate",""),name:"branchOfficeBaseRate",validate:function(e){return e?Object(B.s)(e)?"This field should not be negative.":void 0:"Base Rate is required"},type:"number",hasFeedback:!0}),j.a.createElement("div",{className:"mt-40 flex flex-start"},j.a.createElement(c.a,{loading:t,type:"primary",block:!0,htmlType:"submit"},"new"===r?t?"Creating...":"Add":t?"Updating...":"Update")))))}))),j.a.createElement(A.a,{width:"390px",title:j.a.createElement("div",{className:"flex flex-col"},j.a.createElement("p",{className:"flex items-center color-black weight-700 size-22"},"Add BO"),j.a.createElement("p",{className:"flex items-center light text-16"},"Add the conveyance rate for a branch")),destroyOnClose:!0,visible:Y,onCancel:function(){"new"===r?o.push("/resources/".concat(l)):Z(!1)}},j.a.createElement(E.e,{enableReinitialize:!0,initialValues:se,onSubmit:function(){var t=Object(b.a)(f.a.mark((function t(a,n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.isSubmitting,!(null===a||void 0===a?void 0:a.id)){t.next=8;break}return t.next=4,e.updateConveyanceRate(r,null===a||void 0===a?void 0:a.id,a);case 4:Z(!1),c(!1),t.next=13;break;case 8:return t.next=10,e.createConveyanceRate(r,a);case 10:t.sent,Z(!1),c(!1);case 13:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){e.setFieldValue;var t=e.isSubmitting,a=e.values;e.errors;return j.a.createElement("div",{id:"product-guide-basic-details"},j.a.createElement(E.d,null,j.a.createElement("div",{className:"mt-16 form-grid grid-1"},j.a.createElement("div",null,j.a.createElement(E.b,{component:S.d,filterOption:!1,name:"branchOffice",label:"BO Name *",value:Object(B.g)(a,"branchOffice",""),getPopupContainer:function(){return document.getElementById("product-guide-basic-details")},validate:function(e){if(!e)return"BO is required"},optionValueKey:"code",showSearch:!0,disableOptionsOn:function(e){return ee.includes(e.code)},selectOptions:D,allowClear:!0,onClear:function(e){return ue(e,"branch-office","")},onSearch:function(e){return ue(e,"branch-office","")},hasFeedback:!0}))),j.a.createElement(E.b,{component:S.b,label:"Conveyance *",value:Object(B.g)(a,"conveyanceRate",""),validate:function(e){return e?Object(B.s)(e)?"This field should not be negative.":void 0:"Conveyance rate is required"},name:"conveyanceRate",type:"number",hasFeedback:!0}),j.a.createElement("div",{className:"mt-40 flex flex-start"},j.a.createElement(c.a,{loading:t,type:"primary",block:!0,htmlType:"submit"},(null===a||void 0===a?void 0:a.id)?t?"Updating...":"Update":t?"Adding...":"Add"))))}))),j.a.createElement(N.a,{className:"text-20",confirmationModalSpecs:{visible:k,heading:"Do you want to delete this Conveyance?",subHeading:"This action is permanent and can't be undone.",buttonText:"Delete",showInput:!1,submit:me},cancelConfirmationModal:function(){J(null),w(!1)}}))}));t.default=T}}]);