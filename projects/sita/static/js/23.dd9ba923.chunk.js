(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[23],{3896:function(e,t,a){},4008:function(e,t,a){"use strict";a.r(t);a(38);var n=a(21),c=a.n(n),i=(a(76),a(44)),s=a.n(i),o=(a(284),a(129)),r=a.n(o),l=(a(86),a(34)),u=a.n(l),d=a(2),f=a(1),m=a.n(f),b=a(6),v=a(8),O=(a(149),a(69)),p=a.n(O),g=a(83),y=a.n(g),h=a(13),R=a(0),j=a.n(R),E=a(28),x=a(57),k=a(10),A=a(70),C=a(137),N=a(89),S=a(11),w=a(22),T=a(55);a(3896),p.a.Text;var M=Object(E.b)((function(e){var t=e.Products.meetAndGreet;return{tabStatus:t.tabStatus.status,baseRate:t.branchOfficeBaseRate,associateOfficeRates:t.associateOfficeRates}}),(function(e){return{getMeetAndGreetDetails:Object(k.b)(C.k,e),createAssociateOfficeRate:Object(k.b)(C.d,e),updateAssociateOfficeRate:Object(k.b)(C.s,e),deleteAssociateOfficeRate:Object(k.b)(C.h,e),getPublishedSuppliersListByType:Object(k.b)(N.h,e)}}))((function(e){var t=Object(S.q)(),a=(t.get("tab"),t.get("stage")),n=(t.get("contractId"),Object(x.i)()),i=n.id,o=n.productType,l=Object(x.g)(),f=e.loader,O=e.className,p=e.isCompletelyFilled,g=e.isReadOnlyMode,E=Object(R.useState)(!1),k=Object(v.a)(E,2),C=k[0],N=k[1],M=Object(R.useState)([]),F=Object(v.a)(M,2),G=F[0],I=F[1],q=Object(R.useState)([]),B=Object(v.a)(q,2),D=B[0],P=B[1],V=Object(R.useState)(null),z=Object(v.a)(V,2),J=z[0],L=z[1],U=Object(R.useState)(!1),H=Object(v.a)(U,2),K=(H[0],H[1],Object(R.useState)(!1)),Q=Object(v.a)(K,2),W=Q[0],X=Q[1],Y=Object(R.useState)([]),Z=Object(v.a)(Y,2),$=Z[0],_=Z[1],ee=Object(R.useState)({associateOffice:"",baseRate:"",conveyanceRate:""}),te=Object(v.a)(ee,2),ae=te[0],ne=te[1],ce=function(){var t=Object(b.a)(m.a.mark((function t(a){var n,c,i,s,o,r,l=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:"",s=l.length>2?l[2]:void 0,t.next=4,e.getPublishedSuppliersListByType(i,a,s);case 4:o=t.sent,r=null===o||void 0===o||null===(n=o.data)||void 0===n||null===(c=n.content)||void 0===c?void 0:c.map((function(e){return{code:e.businessCode,name:e.name}})),P(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ie=[{title:"AO Name",dataIndex:"name",key:"name",render:function(e){return j.a.createElement("div",null,e)}},{title:"M&G Rate",dataIndex:"baseRate",key:"baseRate"},{title:"Conveyance",dataIndex:"conveyance",key:"conveyance"},{title:"",dataIndex:"actions",key:"actions",render:function(e){return g?j.a.createElement("div",null):j.a.createElement("div",{className:"flex justify-end"},j.a.createElement("img",{onClick:function(){var t;t=e,ne(Object(d.a)(Object(d.a)({},t),{},{associateOffice:t.associateOfficeCode})),L(t),P([{name:t.associateOfficeName,code:t.associateOfficeCode}]),X(!0)},className:"cursor-pointer",src:"/img/edit.svg"}),j.a.createElement("img",{onClick:function(){L(e),N(!0)},className:"cursor-pointer ml-20",src:"/img/trash-blue.svg"}))}}];Object(R.useEffect)((function(){var t;ce("","associate-office");var a=null===(t=e.associateOfficeRates)||void 0===t?void 0:t.map((function(e,t){return{key:e.id,id:e.id,name:e.associateOfficeName,conveyance:e.conveyanceRate,baseRate:e.baseRate,actions:e}}));I(a),_(e.associateOfficeRates.map((function(e){return e.associateOfficeCode})))}),[e.associateOfficeRates]),Object(R.useEffect)((function(){e.baseRate||e.getMeetAndGreetDetails(i,a)}),[e.baseRate]);var se=function(){var t=Object(b.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.deleteAssociateOfficeRate(i,null===J||void 0===J?void 0:J.id);case 2:L(null),N(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),oe=!!(null===f||void 0===f?void 0:f.isFetching);null===f||void 0===f||f.errors;return j.a.createElement("div",{className:"product-hotel-room-configurations ".concat(O)},j.a.createElement(s.a,{type:"inner",title:j.a.createElement("div",{className:"flex flex-col"},j.a.createElement("p",null,"Associate Office Charges *",p?S.k:j.a.createElement(y.a,{twoToneColor:"#ea9300"}))),extra:j.a.createElement(j.a.Fragment,null,g||oe?j.a.createElement("div",null):!oe&&j.a.createElement("div",{className:"flex items-center"},j.a.createElement("div",{onClick:function(){ne({associateOffice:"",conveyanceRate:"",baseRate:""}),X(!0)},className:"ml-20 flex items-center cursor-pointer"},j.a.createElement("img",{src:"/img/plus.svg"}),j.a.createElement("p",{className:"text-14 semibold ml-10"},"Add Conveyance"))))},oe?j.a.createElement(u.a,{active:!0}):j.a.createElement(j.a.Fragment,null,j.a.createElement(r.a,{pagination:!1,dataSource:G,columns:ie}))),j.a.createElement(T.a,{width:"390px",title:j.a.createElement("div",{className:"flex flex-col"},j.a.createElement("p",{className:"flex items-center color-black weight-700 size-22"},"Add AO"),j.a.createElement("p",{className:"flex items-center light text-16"},"Add the M&G charges for an AO")),destroyOnClose:!0,visible:W,onCancel:function(){"new"===i?l.push("/resources/".concat(o)):X(!1)}},j.a.createElement(h.e,{enableReinitialize:!0,initialValues:ae,onSubmit:function(){var t=Object(b.a)(m.a.mark((function t(a,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isSubmitting,!(null===a||void 0===a?void 0:a.id)){t.next=7;break}return t.next=4,e.updateAssociateOfficeRate(i,null===a||void 0===a?void 0:a.id,{associateOffice:a.associateOffice,conveyanceRate:a.conveyanceRate,baseRate:a.baseRate});case 4:X(!1),t.next=10;break;case 7:return t.next=9,e.createAssociateOfficeRate(i,{associateOffice:a.associateOffice,conveyanceRate:a.conveyanceRate,baseRate:a.baseRate});case 9:X(!1);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){e.setFieldValue;var t=e.isSubmitting,a=e.values;e.errors;return j.a.createElement("div",{id:"product-guide-basic-details"},j.a.createElement(h.d,null,j.a.createElement("div",{className:"mt-16 form-grid grid-1"},j.a.createElement("div",null,j.a.createElement(h.b,{component:w.d,filterOption:!1,name:"associateOffice",label:"AO Name *",validate:function(e){if(!e)return"AO is required"},value:Object(S.g)(a,"associateOffice",""),getPopupContainer:function(){return document.getElementById("product-guide-basic-details")},optionValueKey:"code",showSearch:!0,disableOptionsOn:function(e){return $.includes(e.code)},selectOptions:D,allowClear:!0,onClear:function(e){return ce(e,"associate-office","")},onSearch:function(e){return ce(e,"associate-office","")},hasFeedback:!0}))),j.a.createElement(h.b,{component:w.b,label:"M&G Rate *",value:Object(S.g)(a,"baseRate",""),validate:function(e){return e?Object(S.s)(e)?"This field should not be negative.":void 0:"M&G rate is required"},name:"baseRate",type:"number",hasFeedback:!0}),j.a.createElement(h.b,{component:w.b,label:"Conveyance *",value:Object(S.g)(a,"conveyanceRate",""),name:"conveyanceRate",validate:function(e){return e?Object(S.s)(e)?"This field should not be negative.":void 0:"Conveyance rate is required"},type:"number",hasFeedback:!0}),j.a.createElement("div",{className:"mt-40 flex flex-start"},j.a.createElement(c.a,{block:!0,loading:t,type:"primary",htmlType:"submit"},(null===a||void 0===a?void 0:a.id)?t?"Updating...":"Update":t?"Adding...":"Add"))))}))),j.a.createElement(A.a,{className:"text-20",confirmationModalSpecs:{visible:C,heading:"Do you want to delete this Associate Office Rate?",subHeading:"This action is permanent and can't be undone.",buttonText:"Delete",showInput:!1,submit:se},cancelConfirmationModal:function(){L(null),N(!1)}}))}));t.default=M}}]);