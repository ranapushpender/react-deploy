(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[8],{3874:function(e,t,a){},3875:function(e,t,a){"use strict";a(0),a(3874)},3921:function(e,t,a){},3922:function(e,t,a){},3923:function(e,t,a){},3924:function(e,t,a){},3925:function(e,t,a){},3926:function(e,t,a){},3927:function(e,t,a){},3928:function(e,t,a){},3990:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(6),s=a(8),i=(a(149),a(69)),l=a.n(i),o=(a(140),a(63)),u=a.n(o),m=a(0),d=a.n(m),g=a(28),p=a(57),f=a(10),b=a(533),v=a(11),E=(a(3875),a(38),a(21)),S=a.n(E),O=a(2),y=a(13),j=a(535),h=a(163),x=a(22),k={tciExperience:"",tciRemarks:"",dmcExperiences:[],ftoExperiences:[]},T=a(25),C=T.f().shape({tciExperience:T.g().trim().matches(/^[0-9]*$/,"Invalid year").required("TCI experience is required")}),w=(a(443),a(448)),L=(a(3921),l.a.Text),N=function(){return d.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"15",viewBox:"0 0 12 15"},d.a.createElement("g",{fill:"none","fill-rule":"evenodd"},d.a.createElement("g",{fill:"#3362FA","fill-rule":"nonzero"},d.a.createElement("g",null,d.a.createElement("g",null,d.a.createElement("g",null,d.a.createElement("path",{d:"M1.105 13.595c.037.65.553 1.157 1.176 1.156h7.194c.623 0 1.138-.506 1.175-1.156l.518-8.678H.588l.517 8.678zM11.168 2.458H9.404v-.614C9.404.826 8.614 0 7.641 0H4.114c-.973 0-1.763.826-1.763 1.844v.614H.588c-.325 0-.588.276-.588.615 0 .34.263.615.588.615h10.58c.324 0 .587-.275.587-.615 0-.34-.263-.615-.587-.615zm-2.94 0H3.528v-.614c0-.34.263-.615.587-.615h3.527c.325 0 .588.275.588.615v.614z",transform:"translate(-817 -442) translate(396 131) translate(35 294) translate(386 17)"})))))))};var R=Object(g.b)((function(e){var t=e.Suppliers,a=t.guide;return{tabStatus:t.root.tabStatus.status,formValues:a.assessYourself.experience.data}}),(function(e){return{getCustomersList:Object(f.b)(h.a,e),updateGuideSelfAssessmentExperience:Object(f.b)(b.u,e)}}))((function(e){var t=Object(p.i)().id,a=(Object(v.q)().get("stage"),e.setCurrentL3Tab),n=Object(m.useState)(k),i=Object(s.a)(n,2),l=i[0],o=i[1],u=function(){var n=Object(c.a)(r.a.mark((function n(c){var s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=c,Object.keys(s).forEach((function(e){s[e]||delete s[e]})),n.next=4,e.updateGuideSelfAssessmentExperience(t,s);case 4:a();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=Object(m.useState)([]),f=Object(s.a)(g,2),b=f[0],E=f[1],h=Object(m.useState)([]),T=Object(s.a)(h,2),R=T[0],D=T[1],M=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",e.next=3,j.a.getDmcs(t);case 3:a=e.sent,n=a.data,E(Object(v.g)(n,"content",[]));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=Object(c.a)(r.a.mark((function t(){var a,n,c=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,e.getCustomersList(a);case 3:n=t.sent,D(Object(v.g)(n,"content",[]));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(v.g)(e,"formValues"),n=Object(O.a)({},a),o(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(m.useEffect)((function(){V()}),[e.formValues]),Object(m.useEffect)((function(){M(),A()}),[]),d.a.createElement("div",{className:"assess-yourself-experience ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"read-only-mode")},d.a.createElement(y.e,{initialValues:l,validationSchema:C,enableReinitialize:!0,onSubmit:function(e){return u(e)}},(function(t){t.setFieldValue;var a=t.isSubmitting,n=t.values;t.errors;return d.a.createElement(d.a.Fragment,null,d.a.createElement("fieldset",{disabled:Object(v.m)(Object(v.g)(e,"tabStatus",""))},d.a.createElement(y.d,null,d.a.createElement("div",{className:"mt-10"},d.a.createElement(L,{strong:!0},"Past Experience with TCI"),d.a.createElement("div",{className:"mt-10 form-grid grid-2"},d.a.createElement(y.b,{component:x.b,label:"Number of years",value:n.tciExperience,name:"tciExperience",type:"tciExperience"}),d.a.createElement(y.b,{component:x.b,label:"Add Remarks",value:n.tciRemarks,name:"tciRemarks",type:"tciRemarks"}))),d.a.createElement("div",{className:"mt-40"},d.a.createElement(L,{strong:!0},"Experience with other DMC\u2019s"),d.a.createElement(y.c,{name:"dmcExperiences",render:function(e){var t;return d.a.createElement("div",null,null===(t=n.dmcExperiences)||void 0===t?void 0:t.map((function(t,a){return d.a.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"flex-start"},className:"mt-10 experience-items"},d.a.createElement(y.b,{component:x.b,label:"Number of years",value:n.dmcExperiences[a].experience,name:"dmcExperiences.".concat(a,".experience"),type:"dmcExperience"}),d.a.createElement(y.b,{component:x.d,name:"dmcExperiences.".concat(a,".dmc"),label:"Select DMC",value:n.dmcExperiences[a].dmc,optionValueKey:"id",showSearch:!0,showArrow:!0,selectOptions:b,onSearch:function(e){M(e)},filterOption:!1,hasFeedback:!0}),d.a.createElement(y.b,{component:x.b,label:"Add Remarks",value:n.dmcExperiences[a].remark,name:"dmcExperiences.".concat(a,".remark"),type:"dmcRemarks"}),d.a.createElement(S.a,{className:"mt-8",onClick:function(){e.remove(a)},style:{visibility:a>=0?"visible":"hidden"}},d.a.createElement(N,null)))})),d.a.createElement(w.a,{onClick:function(){return e.push({experience:"",dmc:"",remark:""})},type:"add"},"Add More"))}})),d.a.createElement("div",{className:"mt-40"},d.a.createElement(L,{strong:!0},"Experience with FTO\u2019s"),d.a.createElement(y.c,{name:"ftoExperiences",render:function(e){var t;return d.a.createElement("div",null,null===(t=n.ftoExperiences)||void 0===t?void 0:t.map((function(t,a){return d.a.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"flex-start"},className:"mt-10 experience-items"},d.a.createElement(y.b,{component:x.b,label:"Number of years",value:n.ftoExperiences[a].experience,name:"ftoExperiences.".concat(a,".experience"),type:"customerExperience"}),d.a.createElement(y.b,{component:x.d,name:"ftoExperiences.".concat(a,".customer"),label:"Select FTO",value:n.ftoExperiences[a].customer,optionValueKey:"code",showSearch:!0,showArrow:!0,selectOptions:R,onSearch:function(e){A(e)},filterOption:!1,hasFeedback:!0}),d.a.createElement(y.b,{component:x.b,label:"Add Remarks",value:n.ftoExperiences[a].remark,name:"ftoExperiences.".concat(a,".remark"),type:"customerRemarks"}),d.a.createElement(S.a,{className:"mt-8",onClick:function(){e.remove(a)},style:{visibility:a>=0?"visible":"hidden"}},d.a.createElement(N,null)))})),d.a.createElement(w.a,{onClick:function(){return e.push({experience:"",customer:"",remark:""})},type:"add"},"Add More"))}})),!Object(v.m)(Object(v.g)(e,"tabStatus",""))&&d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{type:"primary",htmlType:"submit"},a?"Saving...":"Save & continue")))))})))})),D=(a(118),a(54)),M=a.n(D),A=a(19),V=a(18),P=a(142),G={assignments:[],services:["meet-greet"],cities:[],region:"",themeScores:[]},I=[{name:"FIT",value:"fit"},{name:"Group",value:"group"},{name:"Special Interests Groups",value:"special-interest-group"}],F=[{name:"Local",value:"local"},{name:"Accompanying",value:"accompanying"},{name:"Meet & Greet",value:"meet-greet"},{name:"Monuments",value:"monuments"}],Y=T.f().shape({services:T.a().of(T.g()).min(1,"Select atleast one service"),assignments:T.a().of(T.g()).min(1,"Select atleast one assignment")}),K=a(122),B=a(167),q=l.a.Text;var z=Object(g.b)((function(e){var t=e.Suppliers,a=t.guide,n=t.kycVerification,r=t.root.tabStatus.status,c=a.assessYourself.expertise.data,s=a.regulatory.licenses.data,i=Object(v.g)(n,"ownershipManagement.registeredAddress.country.code",""),l=Object(v.g)(a,"regulatory.licenses.data.type","");return{tabStatus:r,formValues:c,registeredAddressCountryInKyc:i,regulatoryLicenseRegion:Object(v.g)(a,"regulatory.licenses.data.region",""),regulatoryLicenseType:l,regionCodeInRegulatoryLicense:Object(v.g)(a,"regulatory.licenses.data.region",""),licenseData:s,tourCategories:e.Tour.tourCategories,tourThemes:e.Tour.tourThemes}}),(function(e){return{getCityListNoParams:Object(f.b)(P.b,e),updateGuideSelfAssessmentExpertise:Object(f.b)(b.v,e),invalidateTabStatus:Object(f.b)(b.o,e),getCityMultiParams:Object(f.b)(P.c,e),getTourCategories:Object(f.b)(B.c,e),getThemeByCategory:Object(f.b)(B.b,e),clearTours:Object(f.b)(B.a,e)}}))((function(e){var t=Object(p.i)().id,a=(Object(v.q)().get("stage"),Object(m.useState)([])),n=Object(s.a)(a,2),i=n[0],l=n[1],o=Object(m.useState)([]),u=Object(s.a)(o,2),g=u[0],f=u[1],b=Object(m.useRef)(null),E=(e.setCurrentL3Tab,Object(m.useState)(G)),h=Object(s.a)(E,2),k=h[0],T=h[1],C=Object(m.useState)([]),w=Object(s.a)(C,2),L=w[0],N=w[1],R=Object(m.useState)([]),D=Object(s.a)(R,2),P=D[0],B=D[1],z=Object(m.useState)([]),U=Object(s.a)(z,2),W=(U[0],U[1]),H=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.length>0&&void 0!==n[0]?n[0]:"",Object(c.a)(r.a.mark((function t(){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCityMultiParams(a,Q());case 2:c=t.sent,N(Object(v.n)(c.content,null===e||void 0===e||null===(n=e.formValues)||void 0===n?void 0:n.cities,"code"));case 4:case"end":return t.stop()}}),t)})))();case 2:case"end":return t.stop()}}),t)}))),300);Object(m.useEffect)((function(){k&&k.themeScores&&f(k.themeScores.map((function(e){return{name:e.tourCategory.name,value:e.tourCategory.id,score:e.score,tourCategory:e.tourCategory,selectedRowCheckboxes:e.specialities.reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),{},Object(V.a)({},t.id,!0))}),{}),specialities:e.specialities.map((function(e){return{name:e.name,value:e.id,speciality:e,id:e.id}}))}})))}),[k]);var J=function(){var a=Object(c.a)(r.a.mark((function a(n){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.current.triggerSubmit();case 2:if(!a.sent){a.next=5;break}return a.abrupt("return");case 5:return c=Object(O.a)(Object(O.a)({},n),{},{themeScores:X()}),["monument","state"].includes(e.regulatoryLicenseType)&&(c=Object(O.a)(Object(O.a)({},n),{},{themeScores:X(),services:n.services.filter((function(e){return"accompanying"!=e}))})),a.next=9,e.updateGuideSelfAssessmentExpertise(t,c);case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),$=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.getTourThemes(t);case 2:a=e.sent,n=a.data,W(n.content);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n,c,s,i,l,o,u=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:"",c=u.length>1&&void 0!==u[1]?u[1]:"IND",s=u.length>2&&void 0!==u[2]?u[2]:1,i=e.isRegulatoryLicenseSaved?e.registeredAddressCountryInKyc:c,t.next=6,j.a.getRegionsByCountry(i,n,s);case 6:l=t.sent,o=l.data,B(null===(a=o.content)||void 0===a?void 0:a.map((function(e){return{id:e.id,name:e.name}})));case 9:case"end":return t.stop()}}),t)}))),300),Q=function(){var t,a,n,r,c;return(null===(t=e.licenseData)||void 0===t?void 0:t.region)?{region:null===(r=e.licenseData)||void 0===r?void 0:r.region}:(null===(a=e.licenseData)||void 0===a||null===(n=a.states)||void 0===n?void 0:n.length)?{state:null===(c=e.licenseData)||void 0===c?void 0:c.states.map((function(e){var t;return null===(t=e.state)||void 0===t?void 0:t.code}))}:{}};Object(m.useEffect)((function(){_(),$()}),[]),Object(m.useEffect)((function(){!function(){var t=Object(v.g)(e,"formValues"),a=t.themes,n=t.cities,s=t.region,i=t.assignments,l=t.services,o=(t.themeScores,{themes:a.map((function(e){return e.id})),assignments:i,services:Object(A.a)(l),cities:n.map((function(e){return null===e||void 0===e?void 0:e.code})),region:Object(v.g)(t,"region.id",""),themeScores:Object(v.g)(t,"themeScores",[])});0==o.services.length&&o.services.push("meet-greet"),W(a),Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCityMultiParams("",Q());case 2:n=t.sent,N(Object(v.n)(n.content,null===e||void 0===e||null===(a=e.formValues)||void 0===a?void 0:a.cities,"code"));case 4:case"end":return t.stop()}}),t)})))(),B([s]),T(Object(O.a)({},o))}()}),[e.formValues,e.regulatoryLicenseType,e.licenseData.states]);var X=function(){return i&&0!=i.length?i.map((function(e){return{tourCategory:e.value,score:e.score,specialities:e.specialities.map((function(e){return e.id}))}})):g.map((function(e){return{tourCategory:e.value,score:e.score,specialities:e.specialities.map((function(e){return e.id}))}}))};return d.a.createElement("div",{className:"assess-yourself-expertise ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"read-only-mode")},d.a.createElement("div",{style:{position:"relative"},id:"expertise"},d.a.createElement(y.e,{initialValues:k,validationSchema:Y,enableReinitialize:!0,onSubmit:function(e){return J(e)}},(function(t){var a,n,s=t.setFieldValue,i=t.isSubmitting,o=t.values;t.errors;return d.a.createElement(d.a.Fragment,null,d.a.createElement("fieldset",{disabled:Object(v.m)(Object(v.g)(e,"tabStatus",""))},d.a.createElement(y.d,null,d.a.createElement("div",{className:"mt-10"},d.a.createElement(q,{strong:!0},"Professional Expertise"),d.a.createElement(K.a,{mainRef:b,noEmptyState:!0,hideSave:!0,updateParentScores:function(e){return l(e)},tabKey:"themes",isDataSaved:!0,tabTitle:"Theme Score",selectBoxText:"Select Tour Themes",getSelectOptions:e.getTourCategories,getScores:function(){},nextTab:"tour-type",updateScore:Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),onNextTab:function(){},selectOptionsList:e.tourCategories,scoresList:g,parentObject:"tourCategory",rowMode:!0,compactRows:!1,hasDelete:!0,hasRowSelect:!0,rowSelectValueKey:"specialities",rowSelectOptions:e.tourThemes,getRowSelectOptionsList:function(t){return e.getThemeByCategory(t)},clearRowSelectOptions:e.clearTours,columnTitles:["Theme","Rating","Score","Specialities"],hideTitle:!0})),d.a.createElement("div",{className:"mt-40"},d.a.createElement(q,{strong:!0},"Type of assignments"),d.a.createElement("div",{className:"mt-10 form-grid grid-3"},I.map((function(e,t){return d.a.createElement("label",{key:t},d.a.createElement(y.b,{name:"assignments",valuePropName:"checked",as:M.a,type:"checkbox",value:e.value}),d.a.createElement("span",{className:"capitalize ml-10"},e.name))}))),d.a.createElement(y.a,{name:"assignments",render:function(e){return d.a.createElement(q,{type:"danger"},e)}})),d.a.createElement("div",{className:"mt-40"},d.a.createElement(q,{strong:!0},"Type of services"),d.a.createElement("div",{className:"mt-10 form-grid grid-4"},F.map((function(t,a){return d.a.createElement("label",{key:t.value},d.a.createElement(y.b,{name:"services",valuePropName:"checked",as:M.a,type:"checkbox",disabled:"accompanying"===t.value&&["monument","state"].includes(e.regulatoryLicenseType),onChange:function(t){var a=t.target.checked,n=t.target.value,r=o.services;a?(r.push(n),s("services",r),s("region",e.regionCodeInRegulatoryLicense)):(r=r.filter((function(e){return e!==n})),s("services",r),s("region",""))},value:t.value}),d.a.createElement("span",{className:"capitalize ml-10"},t.name))}))),d.a.createElement(y.a,{name:"services",render:function(e){return d.a.createElement(q,{type:"danger"},e)}})),o.services.includes("local")||o.services.includes("meet-greet")?d.a.createElement("div",{className:"mt-40 form-grid grid-2"},d.a.createElement("div",null,d.a.createElement(q,{strong:!0},"Serving locations"),d.a.createElement("div",{className:"mt-10"},d.a.createElement(y.b,(a={component:x.d,filterOption:!1,name:"cities",label:"Select from the list",value:o.cities,optionValueKey:"code",showSearch:!0,onBlur:function(){return H("")},showArrow:!0,mode:"multiple",validate:function(t){return 0==t.length&&(e.invalidateTabStatus("assessYourself.expertise"),"Atleast one location must be selected")}},Object(V.a)(a,"showArrow",!0),Object(V.a)(a,"selectOptions",L||[]),Object(V.a)(a,"onSearch",(function(e){H(e)})),Object(V.a)(a,"filterOption",!1),Object(V.a)(a,"hasFeedback",!0),Object(V.a)(a,"getPopupContainer",(function(){return document.getElementById("expertise")})),a))))):d.a.createElement(d.a.Fragment,null),"region"!==e.regulatoryLicenseType&&"not-licensed"!==e.regulatoryLicenseType||!o.services.includes("accompanying")?d.a.createElement(d.a.Fragment,null):d.a.createElement("div",{className:"mt-40 form-grid grid-2"},d.a.createElement("div",null,d.a.createElement(q,{strong:!0},"Region"),d.a.createElement("div",{className:"mt-10"},d.a.createElement(y.b,(n={component:x.d,filterOption:!1,name:"region",label:"Select Region",optionValueKey:"id",disabled:"region"===e.regulatoryLicenseType,value:o.region,showSearch:!0,showArrow:!0,selectOptions:P,onSearch:function(e){_(e)}},Object(V.a)(n,"filterOption",!1),Object(V.a)(n,"getPopupContainer",(function(){return document.getElementById("expertise")})),n))))),!Object(v.m)(Object(v.g)(e,"tabStatus",""))&&d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{type:"primary",htmlType:"submit"},i?"Saving...":"Save & continue")))))}))))})),U=a(210),W=(a(3922),a(141),a(77)),H=a.n(W),J=(a(1043),a(686)),$=a.n(J),_=(a(3923),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"}),Q=a(80),X=function(e,t){return m.createElement(Q.a,Object.assign({},e,{ref:t,icon:_}))};X.displayName="StarFilled";var Z=m.forwardRef(X),ee=(a(159),a(93)),te=a.n(ee),ae=a(286),ne=(a(3924),function(e){var t=e.isVisible,a=(e.closeModal,e.onSubmit,e.values),n=(e.initialValues,e.index,e.setFieldValue),r=e.setUploadModal,c=e.assessmentType;return d.a.createElement(te.a,{className:"upload-modal",visible:t,onCancel:function(){return r(!1)},width:550,footer:null,closeIcon:d.a.createElement("img",{style:{top:"35px"},src:"/img/black-cancel-circle.svg",alt:"close"})},d.a.createElement("div",{id:"upload-certi-modal"},d.a.createElement("h2",{className:"size-26 bold"},"Upload Certificate"),d.a.createElement("p",{className:"text-14 doc-info"},"Supports png, pdf, jpeg. Max size 5MB"),d.a.createElement("div",{className:"form-fields"},d.a.createElement(ae.a,{multiple:!1,value:[Object(v.g)(a,"certificate",{})],onChange:function(e){n("certificate.name",e[0].name),n("certificate.url",e[0].url)},disabled:"internal"===c,placeholder:"Upload Certificate",name:"certificate",errorKey:"certificate$.url",label:"Certificate"}),d.a.createElement(y.b,{component:x.b,disabled:"internal"===c,label:"Additional Remarks",value:Object(v.g)(a,"certificate.remarks",""),name:"certificate.remarks",onChange:function(e){var t=e.target.value;n("certificate.remarks",t)},type:"text"})),d.a.createElement("div",{className:"mt-30 flex justify-flex-start"},d.a.createElement(S.a,{onClick:function(){return r(!1)},block:!0,type:"primary"},"Continue"))))}),re=l.a.Text;l.a.Link,l.a.Title;var ce=Object(g.b)((function(e){return{}}),(function(e){return{getLanguageList:Object(f.b)(U.a,e)}}))((function(e){var t=e.onUpdate,a=e.onDelete,n=e.onCreate,i=e.language,l=e.index,o=(e.initialLanguageOptions,e.assessmentType),u=e.selectedLanguages,g=Object(m.useState)([]),p=Object(s.a)(g,2),f=p[0],b=p[1],E=Object(m.useState)(i.id.includes("new")||"internal"===o),j=Object(s.a)(E,2),h=j[0],k=j[1],C=Object(m.useState)(!1),w=Object(s.a)(C,2),L=w[0],N=w[1],R=T.f().shape({language:T.g().required("Language is required")}),D=Object(m.useState)({}),M=Object(s.a)(D,2),A=M[0],P=M[1];Object(m.useEffect)((function(){var e,t;(null===(e=i.language)||void 0===e?void 0:e.code)||G(),i&&i.internalReadRating&&k(!1);var a=Object(O.a)(Object(O.a)({},i),{},{language:null===(t=i.language)||void 0===t?void 0:t.code});b([i.language]),P(a)}),[]);var G=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n,c,s,i=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:"",t.next=3,e.getLanguageList(a);case 3:n=t.sent,c=Object(v.g)(n,"content",[]),s=c.filter((function(e){if(!(null===u||void 0===u?void 0:u.includes(e.name)))return e})),console.log("selectedLanguages",u),console.log("languageResult",c),console.log("filteredLanguages",s),b(s);case 10:case"end":return t.stop()}}),t)}))),300);return d.a.createElement("div",{className:"languages-known-card"},d.a.createElement(y.e,{initialValues:A,validationSchema:R,enableReinitialize:!0,onSubmit:function(e,a){var r=a.isSubmitting;(0,a.validateForm)().then((function(){i.id.includes("new")?n(e,r,k):t(e,i.id,r,k)}))}},(function(t){var n,r=t.setFieldValue,c=(t.isSubmitting,t.values);return d.a.createElement(d.a.Fragment,null,d.a.createElement("fieldset",{disabled:Object(v.m)(Object(v.g)(e,"guide.tabStatus.status",""))},d.a.createElement(y.d,null,d.a.createElement("div",{className:"languages-known-card-data"},d.a.createElement(y.b,(n={style:{width:"100px"},component:x.d,name:"language",value:c.language,label:"Language *",disabled:!h||"internal"===o,optionValueKey:"code",selectOptions:f,filterOption:!1,className:"language-select",showSearch:!0,size:"small"},Object(V.a)(n,"style",{width:150}),Object(V.a)(n,"onSearch",(function(e){G(e)})),Object(V.a)(n,"getPopupContainer",(function(){return document.getElementById("language-proficiency")})),n)),"self"===o?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"flex flex-col"},d.a.createElement(y.b,{component:$.a,disabled:!h,className:"language-rating",name:"selfReadRating",value:c.selfReadRating,validate:function(e){var t;return e||(t="Please select something"),t},onChange:function(e){r("selfReadRating",e)}}),d.a.createElement("div",{className:"mt-10"},d.a.createElement(y.a,{name:"selfReadRating",render:function(e){return d.a.createElement(re,{type:"danger"},e)}}))),d.a.createElement("div",{className:"flex flex-col"},d.a.createElement(y.b,{component:$.a,disabled:!h,className:"language-rating",name:"selfWriteRating",validate:function(e){var t;return e||(t="Please select something"),t},value:c.selfWriteRating,onChange:function(e){r("selfWriteRating",e)}}),d.a.createElement("div",{className:"mt-10"},d.a.createElement(y.a,{name:"selfWriteRating",render:function(e){return d.a.createElement(re,{type:"danger"},e)}}))),d.a.createElement("div",{className:"flex flex-col"},d.a.createElement(y.b,{component:$.a,disabled:!h,className:"language-rating",validate:function(e){var t;return e||(t="Please select something"),t},name:"selfSpeakRating",value:c.selfSpeakRating,onChange:function(e){r("selfSpeakRating",e)}}),d.a.createElement("div",{className:"mt-10"},d.a.createElement(y.a,{name:"selfSpeakRating",render:function(e){return d.a.createElement(re,{type:"danger"},e)}})))):d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"flex flex-col items-start"},d.a.createElement(y.b,{component:$.a,disabled:!h,className:"language-rating",name:"internalReadRating",validate:function(e){var t;return e||(t="Please select something"),t},value:c.internalReadRating,onChange:function(e){r("internalReadRating",e)}}),d.a.createElement("div",{className:"self-rating-info"},d.a.createElement("span",{className:"mr-10"},"Self: ",c.selfReadRating),d.a.createElement(Z,null)),d.a.createElement(y.a,{name:"internalReadRating",render:function(e){return d.a.createElement("div",{className:"mt-10"},d.a.createElement(re,{type:"danger"},e))}})),d.a.createElement("div",{className:"flex flex-col items-start"},d.a.createElement(y.b,{component:$.a,disabled:!h,className:"language-rating",name:"internalWriteRating",value:c.internalWriteRating,validate:function(e){var t;return e||(t="Please select something"),t},onChange:function(e){r("internalWriteRating",e)}}),d.a.createElement("div",{className:"self-rating-info"},d.a.createElement("span",{className:"mr-10"},"Self: ",c.selfWriteRating),d.a.createElement(Z,null)),d.a.createElement(y.a,{name:"internalWriteRating",render:function(e){return d.a.createElement("div",{className:"mt-10"},d.a.createElement(re,{type:"danger"},e))}})),d.a.createElement("div",{className:"flex flex-col items-start"},d.a.createElement(y.b,{component:$.a,disabled:!h,className:"language-rating",name:"internalSpeakRating",value:c.internalSpeakRating,validate:function(e){var t;return e||(t="Please select something"),t},onChange:function(e){r("internalSpeakRating",e)}}),d.a.createElement("div",{className:"self-rating-info"},d.a.createElement("span",{className:"mr-10"},"Self: ",c.selfSpeakRating),d.a.createElement(Z,null)),d.a.createElement(y.a,{name:"internalSpeakRating",render:function(e){return d.a.createElement("div",{className:"mt-10"},d.a.createElement(re,{type:"danger"},e))}}))),d.a.createElement("div",{className:"flex items-center justfy-start"},Object(v.g)(c,"certificate.url",!1)?d.a.createElement(H.a,{placement:"top",title:"Remarks: ".concat(Object(v.g)(c,"certificate.remarks",""))},d.a.createElement("a",{href:h?null:Object(v.g)(c,"certificate.url",""),target:"".concat(h?"":"_blank")},d.a.createElement("img",{onClick:function(){return h&&N(!0)},className:"upload-image cursor-pointer",src:"/img/content.svg"}))):h&&!e.isDisabled&&"internal"!=o?d.a.createElement("img",{onClick:function(){return h&&N(!0)},className:"upload-image cursor-pointer",src:"/img/cloud-upload.svg"}):null,d.a.createElement(ne,{isVisible:L,setUploadModal:N,setFieldValue:r,assessmentType:o,values:c,index:l})),d.a.createElement("div",{className:"flex items-center justify-end"},h?d.a.createElement(S.a,{htmlType:"submit",className:"cursor-pointer flex items-center text-14 semibold ml-16"},"internal"===o?h?d.a.createElement(d.a.Fragment,null,d.a.createElement("img",{className:"mr-10",src:"/img/check.svg",alt:"tick"}),d.a.createElement("p",null,"Save assessment")):d.a.createElement("p",null,"Assessment saved"):d.a.createElement(d.a.Fragment,null,d.a.createElement("img",{className:"mr-10",src:"/img/check.svg",alt:"tick"}),d.a.createElement("p",null,"Save"))):d.a.createElement("img",{onClick:function(){return k(!0)},className:"cursor-pointer",src:"/img/edit.svg"}),"internal"===o?d.a.createElement(d.a.Fragment,null):d.a.createElement("img",{onClick:function(){return a(i)},className:"ml-16 cursor-pointer",src:"/img/delete.svg"}))))))})))})),se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},ie=function(e,t){return m.createElement(Q.a,Object.assign({},e,{ref:t,icon:se}))};ie.displayName="LinkOutlined";var le=m.forwardRef(ie),oe=a(70);l.a.Text,l.a.Link,l.a.Title;var ue=Object(g.b)((function(e){var t=e.Suppliers,a=(e.Language,t.guide);return{guide:a,tabStatus:t.root.tabStatus.status,formValues:a.assessYourself.languageProficiency.data}}),(function(e){return{getLanguageList:Object(f.b)(U.a,e),createGuideSelfAssessmentLanguage:Object(f.b)(b.c,e),addNewDummyGuideSelfAssessmentLanguage:Object(f.b)(b.a,e),updateGuideSelfAssessmentLanguages:Object(f.b)(b.w,e),deleteGuideSelfAssessmentLanguage:Object(f.b)(b.d,e)}}))((function(e){var t,a=Object(p.i)().id,n=(Object(v.q)().get("stage"),e.setCurrentL3Tab),i=Object(m.useState)([]),l=Object(s.a)(i,2),o=(l[0],l[1],Object(m.useState)([])),u=Object(s.a)(o,2),g=u[0],f=u[1],b=Object(m.useState)(!1),E=Object(s.a)(b,2),O=E[0],y=E[1],j=Object(m.useState)(),h=Object(s.a)(j,2),x=h[0],k=h[1],T=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(t),y(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.deleteGuideSelfAssessmentLanguage(a,x.id);case 3:y(!1),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(c.a)(r.a.mark((function t(n,c,s,i){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.updateGuideSelfAssessmentLanguages(a,c,n);case 3:i(!1),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a,n,r){return t.apply(this,arguments)}}(),L=function(){var t=Object(c.a)(r.a.mark((function t(n,c,s){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.createGuideSelfAssessmentLanguage(a,n);case 3:s(!1),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a,n){return t.apply(this,arguments)}}();return Object(m.useEffect)((function(){f(e.formValues.map((function(e){return e.language.name})))}),[e.formValues]),d.a.createElement("div",{className:"self-language-proficiency ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"read-only-mode"),id:"language-proficiency"},d.a.createElement("div",null,!Object(v.m)(Object(v.g)(e,"tabStatus",""))&&d.a.createElement("div",{onClick:e.addNewDummyGuideSelfAssessmentLanguage,className:"mt-10 mb-10 button-dashed add-new-lang-button"},d.a.createElement("img",{className:"mr-10",src:"/img/plus.svg"}),d.a.createElement("p",null,"Add another Language")),d.a.createElement("div",{className:"mt-20 mb-10 languages-known-card-header"},d.a.createElement("p",null,"Language"),d.a.createElement("p",null,"Read"),d.a.createElement("p",null,"Write"),d.a.createElement("p",null,"Speak"),d.a.createElement("p",null,d.a.createElement(le,null)),d.a.createElement("p",null)),null===(t=e.formValues)||void 0===t?void 0:t.map((function(e,t){return d.a.createElement(ce,{key:Object(v.g)(e,"id"),onUpdate:w,onDelete:T,onCreate:L,language:e,index:t,assessmentType:"self",selectedLanguages:g})})),d.a.createElement(oe.a,{confirmationModalSpecs:{visible:O,heading:"Are you sure?",subHeading:"Are you sure you want to delete?",buttonText:"Delete",submit:C},cancelConfirmationModal:function(){return y(!1)}}),!Object(v.m)(Object(v.g)(e,"tabStatus",""))&&d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{onClick:n,type:"primary"},"Continue"))))})),me=a(3862),de=u.a.TabPane;l.a.Text,l.a.Link,l.a.Title;var ge=Object(g.b)((function(e){var t=e.Suppliers.guide;return{isGuideAssessYourselfLanguageProficiencySaved:t.assessYourself.languageProficiency.isDataSaved,isGuideAssessYourselfExperienceSaved:t.assessYourself.experience.isDataSaved,isGuideAssessYourselfExpertiseSaved:t.assessYourself.expertise.isDataSaved}}),(function(e){return{}}))((function(e){Object(p.i)().id,Object(v.q)().get("stage");var t=Object(m.useState)("guide-assess-yourself-language-proficiency"),a=Object(s.a)(t,2),n=a[0],r=a[1];return d.a.createElement("div",{className:"assess-yourself"},d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement(u.a,{className:"tabs-dark",centered:!0,activeKey:n,onChange:function(e){return r(e)}},d.a.createElement(de,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"Language Proficiency")," ",e.isGuideAssessYourselfLanguageProficiencySaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-assess-yourself-language-proficiency"},d.a.createElement(ue,{setCurrentL3Tab:function(){return r("guide-assess-yourself-experience")}})),d.a.createElement(de,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"Experience")," ",e.isGuideAssessYourselfExperienceSaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-assess-yourself-experience"},d.a.createElement(R,{setCurrentL3Tab:function(){return r("guide-assess-yourself-expertise")}})),d.a.createElement(de,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"Expertise")," ",e.isGuideAssessYourselfExpertiseSaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-assess-yourself-expertise"},d.a.createElement(z,null))))))})),pe=(a(204),a(52)),fe=a.n(pe),be=a(492),ve=a(164),Ee=[{name:"Entire TCI",value:"tci"},{name:"Source Market",value:"source-market"},{name:"Customer Specific",value:"customer"}],Se=l.a.Text;u.a.TabPane;var Oe=Object(g.b)((function(e){var t=e.Suppliers,a=t.guide;return{tabStatus:t.root.tabStatus.status,formValues:a.empanelment.data}}),(function(e){return{updateGuideEmpanelment:Object(f.b)(b.q,e),getSourceMarketsList:Object(f.b)(ve.a,e),getSeriesSpecificList:Object(f.b)(be.b,e),getCustomers:Object(f.b)(be.a,e)}}))((function(e){var t=Object(p.i)().id,a=(Object(v.q)().get("stage"),Object(m.useState)([])),n=Object(s.a)(a,2),i=n[0],l=n[1],o=Object(m.useState)([]),u=Object(s.a)(o,2),g=u[0],f=u[1],b=Object(m.useState)({}),E=Object(s.a)(b,2),j=E[0],h=E[1],k=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n,c=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,e.getSourceMarketsList([],a);case 3:n=t.sent,l(Object(v.f)(null===n||void 0===n?void 0:n.content));case 5:case"end":return t.stop()}}),t)}))),300),T=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n,c=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,e.getCustomers(a);case 3:n=t.sent,f(Object(v.f)(null===n||void 0===n?void 0:n.content));case 5:case"end":return t.stop()}}),t)}))),300),C=function(){var a=Object(c.a)(r.a.mark((function a(n,c){var s,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,"tci"===(s=n.suitedFor)?i={suitedFor:s}:"customer"===s?i={suitedFor:s,customers:n.customers}:"source-market"===s&&(i={suitedFor:s,sourceMarkets:n.sourceMarkets}),a.next=5,e.updateGuideEmpanelment(t,i);case 5:c(!1),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0),c(!1);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e,t){return a.apply(this,arguments)}}(),w=function(){var t=Object(c.a)(r.a.mark((function t(){var a,n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.formValues,n=a.sourceMarkets,c=a.customers,h(Object(O.a)(Object(O.a)({},e.formValues),{},{customers:c.map((function(e){return null===e||void 0===e?void 0:e.code})),sourceMarkets:n.map((function(e){return null===e||void 0===e?void 0:e.code}))})),l(n),f(c);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(m.useEffect)((function(){w()}),[e.formValues]),Object(m.useEffect)((function(){k(),T()}),[]),d.a.createElement("div",{id:"empanelment",className:"guide-empanelment relative ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"need-publish-approval"!==Object(v.g)(e,"tabStatus","")&&"read-only-mode")},d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement(y.e,{initialValues:j,enableReinitialize:!0,onSubmit:function(e,t){var a=t.setSubmitting;return C(e,a)}},(function(t){t.setFieldValue;var a,n=t.isSubmitting,r=t.values;t.errors;return d.a.createElement(d.a.Fragment,null,d.a.createElement(y.d,null,d.a.createElement("div",{className:"mb-40"},d.a.createElement(Se,{strong:!0},"Most suited for?"),d.a.createElement("div",{className:"mt-10 form-grid grid-4"},Ee.map((function(e,t){return d.a.createElement("label",{key:t},d.a.createElement(y.b,{as:fe.a,type:"radio",name:"suitedFor",validate:function(e){return e?null:"Please select an option"},value:e.value}),d.a.createElement("span",{className:"capitalize"},e.name))})),d.a.createElement("div",null,d.a.createElement(y.a,{name:"suitedFor",render:function(e){return d.a.createElement(Se,{type:"danger"},e)}})))),"source-market"===r.suitedFor&&d.a.createElement("div",{className:"form-grid grid-2 mb-40"},d.a.createElement("div",null,d.a.createElement(Se,{strong:!0},"Select source Markets *"),d.a.createElement(y.b,{component:x.d,filterOption:!1,name:"sourceMarkets",label:"Select source markets *",value:Object(v.g)(r,"sourceMarkets"),mode:"multiple",showArrow:!0,getPopupContainer:function(){return document.getElementById("empanelment")},optionValueKey:"code",optionNameKey:"name",showSearch:!0,onSearch:function(e){k(e)},validate:function(e){return e.length>0?null:"Please select atleast one source market"},selectOptions:i}))),"customer"===r.suitedFor&&d.a.createElement("div",{className:"form-grid grid-2 mb-40"},d.a.createElement("div",null,d.a.createElement(Se,{strong:!0},"Select customers *"),d.a.createElement(y.b,(a={component:x.d,name:"customers",label:"Select customers *",value:Object(v.g)(r,"customers"),optionValueKey:"code",showArrow:!0,selectOptions:g,mode:"multiple"},Object(V.a)(a,"showArrow",!0),Object(V.a)(a,"filterOption",!1),Object(V.a)(a,"showSearch",!0),Object(V.a)(a,"validate",(function(e){return e.length>0?null:"Please select atleast one customer"})),Object(V.a)(a,"onSearch",(function(e){T(e)})),Object(V.a)(a,"getPopupContainer",(function(){return document.getElementById("empanelment")})),a)))),(!Object(v.m)(Object(v.g)(e,"tabStatus",""))||"need-publish-approval"===Object(v.g)(e,"tabStatus",""))&&d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{loading:n,type:"primary",htmlType:"submit"},n?"Saving...":"Save & continue"))))})))))})),ye={themeExpertiseRatings:[],groomingStandards:"",personality:"",qualityConsciousness:"",knowledge:""},je=[{name:"Grooming standards",key:"groomingStandards"},{name:"Personality",key:"personality"},{name:"Quality consciousness",key:"qualityConsciousness"},{name:"Knowledge & education",key:"knowledge"}],he=[{name:"Excellent",value:"excellent"},{name:"Good",value:"good"},{name:"Average",value:"average"},{name:"Poor",value:"poor"}],xe=(a(3925),l.a.Text);u.a.TabPane;var ke=Object(g.b)((function(e){var t=e.Suppliers,a=t.guide;return{tabStatus:t.root.tabStatus.status,formValues:a.internalAssessment.expertise.data,tourCategories:e.Tour.tourCategories,tourThemes:e.Tour.tourThemes}}),(function(e){return{getGuideInternalAssessmentExpertise:Object(f.b)(b.g,e),updateGuideInternalAssessmentExpertise:Object(f.b)(b.r,e),getTourCategories:Object(f.b)(B.c,e),getThemeByCategory:Object(f.b)(B.b,e),clearTours:Object(f.b)(B.a,e)}}))((function(e){var t=Object(p.i)().id,a=Object(v.q)().get("stage"),n=e.setCurrentL2Tab,i=Object(m.useState)([]),l=Object(s.a)(i,2),o=l[0],u=l[1],g=Object(m.useState)([]),f=Object(s.a)(g,2),b=f[0],E=f[1],j=Object(m.useState)(ye),h=Object(s.a)(j,2),x=h[0],k=h[1],T=Object(m.useRef)(null),C=function(){var a=Object(c.a)(r.a.mark((function a(c){var s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=Object(O.a)(Object(O.a)({},c),{},{themeExpertiseRatings:N()}),a.next=3,e.updateGuideInternalAssessmentExpertise(t,s);case 3:n();case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),w=function(){var t=Object(c.a)(r.a.mark((function t(){var a,n,c,s,i,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(v.g)(e,"formValues"),n=a.groomingStandards,c=a.personality,s=a.qualityConsciousness,i=a.knowledge,a.themeExpertises,l={groomingStandards:n,personality:c,qualityConsciousness:s,knowledge:i,themeExpertiseRatings:(r=e.formValues.themeExpertises,r.map((function(e){return{expertiseID:e.id,name:e.tourCategory.name,value:e.tourCategory.id,score:e.iaScore>0?e.iaScore:1,tourCategory:e.tourCategory,selfScore:e.saScore,selectedRowCheckboxes:e.iaSpecialities.reduce((function(e,t){return Object(O.a)(Object(O.a)({},e),{},Object(V.a)({},t.id,!0))}),{}),specialities:e.saSpecialities.map((function(e){return{name:e.name,value:e.id,speciality:e,id:e.id}}))}})))},k(l);case 3:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}();Object(m.useEffect)((function(){w()}),[e.formValues]),Object(m.useEffect)((function(){L()}),[]),Object(m.useEffect)((function(){x&&x.themeExpertiseRatings&&x.themeExpertiseRatings.length>0&&E(x.themeExpertiseRatings)}),[x]);var L=function(){var n=Object(c.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.getGuideInternalAssessmentExpertise(t,a);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),N=function(){return o&&0!=o.length?o.map((function(e){return{themeExpertise:e.expertiseID,specialities:Object.keys(e.selectedRowCheckboxes).map((function(t){return e.selectedRowCheckboxes[t]?t:null})).filter((function(e){return e})),score:e.score}})):b.map((function(e){return{themeExpertise:e.expertiseID,specialities:Object.keys(e.selectedRowCheckboxes).map((function(t){return e.selectedRowCheckboxes[t]?t:null})).filter((function(e){return e})),score:e.score}}))};return d.a.createElement("div",{className:"internal-assesment-expertise ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"need-publish-approval"!==Object(v.g)(e,"tabStatus","")&&"read-only-mode")},d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement(y.e,{initialValues:x,enableReinitialize:!0,onSubmit:function(e){return C(e)}},(function(t){t.setFieldValue;var a=t.isSubmitting;t.values,t.errors;return d.a.createElement(d.a.Fragment,null,d.a.createElement(y.d,null,d.a.createElement(xe,{strong:!0},"Professional expertise"),d.a.createElement(K.a,{mainRef:T,isInternalAssessment:!0,hideSave:!0,disableMainSelect:!0,updateParentScores:function(e){return u(e)},tabKey:"themes",isDataSaved:!0,tabTitle:"Theme Score",selectBoxText:"Select Tour Themes",getSelectOptions:e.getTourCategories,getScores:function(){},nextTab:"tour-type",updateScore:e.updateThemeScore,selectOptionsList:e.tourCategories,scoresList:b,parentObject:"tourCategory",rowMode:!0,compactRows:!1,hasDelete:!1,hasRowSelect:!0,rowSelectValueKey:"specialities",rowSelectOptions:e.tourThemes,getRowSelectOptionsList:function(t){return e.getThemeByCategory(t)},clearRowSelectOptions:e.clearTours,columnTitles:["Theme","Rating","Score","Specialities"],hideTitle:!0}),d.a.createElement("div",{className:"mb-40"},je.map((function(e,t){return d.a.createElement("div",{key:t,className:"mb-40"},d.a.createElement(xe,{strong:!0},e.name),d.a.createElement("div",{className:"mt-10 form-grid grid-4"},he.map((function(t,a){return d.a.createElement("label",{key:a},d.a.createElement(y.b,{as:fe.a,type:"radio",validate:function(e){var t;return e||(t="Please select someting"),t},name:e.key,value:t.value}),d.a.createElement("span",{className:"capitalize"},t.name))}))),d.a.createElement(y.a,{name:e.key,render:function(e){return d.a.createElement(xe,{type:"danger"},e)}}))}))),!Object(v.m)(Object(v.g)(e,"tabStatus",""))||"need-publish-approval"===Object(v.g)(e,"tabStatus","")&&d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{type:"primary",htmlType:"submit"},a?"Saving...":"Save & continue"))))})))))}));a(3926),l.a.Text,l.a.Link,l.a.Title;var Te=Object(g.b)((function(e){var t=e.Suppliers,a=e.Language.languageList,n=t.guide;return{tabStatus:t.root.tabStatus.status,formValues:n.internalAssessment.languageProficiency.data,languageList:a}}),(function(e){return{getGuideInternalAssessmentLanguages:Object(f.b)(b.h,e),updateGuideInternalAssessmentLanguages:Object(f.b)(b.s,e)}}))((function(e){var t=Object(p.i)().id,a=Object(v.q)().get("stage"),n=e.setCurrentL3Tab,i=Object(m.useState)([]),l=Object(s.a)(i,2),o=l[0],u=(l[1],Object(m.useState)([])),g=Object(s.a)(u,2),f=g[0],b=g[1],E=function(){var a=Object(c.a)(r.a.mark((function a(n,c,s,i){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.updateGuideInternalAssessmentLanguages(t,c,n);case 3:i(!1),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e,t,n,r){return a.apply(this,arguments)}}(),O=function(){var t=Object(c.a)(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(v.g)(e,"formValues"),b(a);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(m.useEffect)((function(){O()}),[e.formValues]),Object(m.useEffect)((function(){y()}),[]);var y=function(){var n=Object(c.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.getGuideInternalAssessmentLanguages(t,a);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return d.a.createElement("div",{className:"self-language-proficiency ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"need-publish-approval"!==Object(v.g)(e,"tabStatus","")&&"read-only-mode"),id:"language-proficiency"},d.a.createElement("div",null,d.a.createElement("div",{className:"mt-20 mb-10 languages-known-card-header"},d.a.createElement("p",null,"Language"),d.a.createElement("p",null,"Read"),d.a.createElement("p",null,"Write"),d.a.createElement("p",null,"Speak"),d.a.createElement("p",null,d.a.createElement(le,null)),d.a.createElement("p",null)),null===f||void 0===f?void 0:f.map((function(e,t){return d.a.createElement(ce,{key:Object(v.g)(e,"id"),onUpdate:E,language:e,index:t,assessmentType:"internal",initialLanguageOptions:o})})),!Object(v.m)(Object(v.g)(e,"tabStatus",""))||"need-publish-approval"===Object(v.g)(e,"tabStatus","")&&d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{onClick:n,type:"primary"},"Continue"))))})),Ce=u.a.TabPane;l.a.Text,l.a.Link,l.a.Title;var we=Object(g.b)((function(e){var t=e.Suppliers.guide;return{isGuideInternalAssessmentLanguageProficiencySaved:t.internalAssessment.languageProficiency.isDataSaved,isGuideInternalAssessmentExpertiseSaved:t.internalAssessment.expertise.isDataSaved}}),(function(e){return{}}))((function(e){Object(p.i)().id,Object(v.q)().get("stage");var t=e.changeSubtab,a=e.setCurrentL2Tab,n=Object(m.useState)("guide-internal-assessment-language-proficiency"),r=Object(s.a)(n,2),c=r[0],i=r[1];return d.a.createElement("div",{className:"internal-assessment"},d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement(u.a,{className:"tabs-dark",centered:!0,activeKey:c,onChange:function(e){return i(e)}},d.a.createElement(Ce,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"Language Proficiency")," ",e.isGuideInternalAssessmentLanguageProficiencySaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-internal-assessment-language-proficiency"},d.a.createElement(Te,{setCurrentL3Tab:function(){return i("guide-internal-assessment-expertise")}})),d.a.createElement(Ce,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"Expertise")," ",e.isGuideInternalAssessmentExpertiseSaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-internal-assessment-expertise"},d.a.createElement(ke,{setCurrentL2Tab:a,changeSubtab:t}))))))}));l.a.Text,l.a.Link,l.a.Title;var Le=Object(g.b)((function(e){return e.Suppliers,{}}),(function(e){return{}}))((function(e){Object(p.i)().id,Object(v.q)().get("stage");return d.a.createElement("div",null,d.a.createElement("div",{className:"flex justify-center mt-40"},"Coming soon..."))})),Ne=(a(678),a(534)),Re=a.n(Ne),De=a(116),Me=a(368),Ae={type:"",region:"",regionalLicenseValidity:"",license:{name:"",url:""},states:{},selectedStates:[],monuments:{},selectedMonuments:[]},Ve=[{name:"Regional Level",value:"region"},{name:"State Level",value:"state"},{name:"Monument",value:"monument"},{name:"Not Licensed",value:"not-licensed"}],Pe=(a(3927),T.f().shape({type:T.g().required("Type is required"),region:T.g().when("type",{is:"region",then:T.g().required("Region is required")}),license:T.f().when("type",{is:"region",then:T.f({name:T.g().required("Please upload a license").required("Please upload a license")})})})),Ge=a(15),Ie=a.n(Ge),Fe=(a(74),l.a.Text);var Ye=Object(g.b)((function(e){var t=e.Suppliers,a=e.Monument,n=t.regionsByCountry,r=t.guide,c=t.root,s=(a.monumentList,Object(v.g)(t,"kycVerification.ownershipManagement.data.registeredAddress.country.code","")),i=r.regulatory.licenses.data;return{tabStatus:c.tabStatus.status,formValues:i,regionsByCountry:n,registeredAddressCountryCode:s}}),(function(e){return{updateGuideRegulatoryLicenses:Object(f.b)(b.t,e),getStateList:Object(f.b)(Me.a,e)}}))((function(e){var t=Object(p.i)().id,a=(Object(v.q)().get("stage"),e.getMonumentListFilters,e.monumentList,e.setCurrentL2Tab),n=Object(m.useState)(Ae),i=Object(s.a)(n,2),l=i[0],o=i[1],u=Object(m.useState)([]),g=Object(s.a)(u,2),f=g[0],b=g[1],E=Object(m.useState)([]),h=Object(s.a)(E,2),k=h[0],T=h[1],C=Object(m.useState)([]),w=Object(s.a)(C,2),L=w[0],N=w[1],R=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n,c,s,i,l,o,u=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:"",c=u.length>1&&void 0!==u[1]?u[1]:"IND",s=u.length>2&&void 0!==u[2]?u[2]:1,i=e.registeredAddressCountryInKyc||c,t.next=6,j.a.getRegionsByCountry(i,n,s);case 6:l=t.sent,o=l.data,T(null===(a=o.content)||void 0===a?void 0:a.map((function(e){return{id:e.id,name:e.name}})));case 9:case"end":return t.stop()}}),t)}))),300),D=Object(v.d)(Object(c.a)(r.a.mark((function t(){var a,n,c,s=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:"IND",n=s.length>1&&void 0!==s[1]?s[1]:"",t.next=4,e.getStateList(a,n);case 4:c=t.sent,b(null===c||void 0===c?void 0:c.content);case 6:case"end":return t.stop()}}),t)}))),300),M=function(){var n=Object(c.a)(r.a.mark((function n(c){var s,i,l;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"region"===(s=c.type)?i={type:s,region:c.region,license:Object(O.a)({},c.license),regionalLicenseValidity:null===(l=c.regionalLicenseValidity)||void 0===l?void 0:l.format("YYYY-MM-DD")}:"not-licensed"===s?i={type:s}:"monument"===s?i={type:s,monuments:c.selectedMonuments.map((function(e){var t;return{monument:e.key,license:Object(v.g)(c.monuments,"".concat(e.key,".license"),{}),validity:null===(t=c.monuments[e.key].validity)||void 0===t?void 0:t.format("YYYY-MM-DD")}}))}:"state"===s&&(i={type:s,states:c.selectedStates.map((function(e){var t;return{state:e.key,license:Object(O.a)({},Object(v.g)(c.states,"".concat(e.key,".license"),{})),validity:null===(t=c.states[e.key].validity)||void 0===t?void 0:t.format("YYYY-MM-DD")}}))}),n.next=4,e.updateGuideRegulatoryLicenses(t,i);case 4:a();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.getPublishedMonumentListByCountry(t,a);case 2:n=e.sent,c=n.data,N(null===c||void 0===c?void 0:c.content);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function P(e){return e&&e<Ie()().endOf("day")}return Object(m.useEffect)((function(){!function(){var t=Object(v.g)(e,"formValues"),a=t.monuments,n=t.states,r=t.type,c=t.region,s=t.license,i={type:r,region:c,regionalLicenseValidity:e.formValues.regionalLicenseValidity?Ie()(e.formValues.regionalLicenseValidity):"",license:Array.isArray(s)?{name:"",url:""}:s,selectedMonuments:a.map((function(e){var t,a;return{value:"".concat(null===(t=e.monument)||void 0===t?void 0:t.code),label:e.monument.name,key:"".concat(null===(a=e.monument)||void 0===a?void 0:a.code)}})),monuments:a.reduce((function(e,t){var a;return e=Object(O.a)(Object(O.a)({},e),{},Object(V.a)({},"".concat(null===(a=t.monument)||void 0===a?void 0:a.code),{validity:Ie()("2021-04-01","YYYY-MM-DD"),license:{name:t.license.name,url:t.license.url}}))}),{}),selectedStates:n.map((function(e){var t,a;return{value:"".concat(null===(t=e.state)||void 0===t?void 0:t.code),label:e.state.name,key:"".concat(null===(a=e.state)||void 0===a?void 0:a.code)}})),states:n.reduce((function(e,t){var a;return e=Object(O.a)(Object(O.a)({},e),{},Object(V.a)({},"".concat(null===(a=t.state)||void 0===a?void 0:a.code),{validity:Ie()(t.validity),license:{name:t.license.name,url:t.license.url}}))}),{})};o(i)}()}),[e.formValues]),Object(m.useEffect)((function(){D(),R(),A()}),[]),d.a.createElement("div",{className:"licenses-certifications relative ".concat(Object(v.m)(Object(v.g)(e,"tabStatus",""))&&"read-only-mode"),id:"license"},d.a.createElement(y.e,{initialValues:l,validationSchema:Pe,enableReinitialize:!0,onSubmit:function(e){return M(e)}},(function(t){var a,n=t.setFieldValue,r=t.isSubmitting,c=t.values,s=t.errors;return d.a.createElement(d.a.Fragment,null,d.a.createElement("fieldset",{disabled:Object(v.m)(Object(v.g)(e,"tabStatus",""))},d.a.createElement(y.d,null,d.a.createElement("div",{className:"flex flex-col",id:"licenses-info"},d.a.createElement("div",null,d.a.createElement("div",{className:"mt-10 pl-16 pr-16"},d.a.createElement(Fe,{strong:!0},"Select type of license"),d.a.createElement("div",{className:"mt-10 form-grid grid-4"},Ve.map((function(e,t){return d.a.createElement("label",{key:t},d.a.createElement(y.b,{as:fe.a,type:"radio",name:"type",value:e.value}),d.a.createElement("span",{className:"capitalize"},e.name))}))),d.a.createElement(y.a,{name:"type",render:function(e){return d.a.createElement(Fe,{type:"danger"},e)}})),"region"===c.type?d.a.createElement("div",{className:"mt-40 pl-16 pr-16"},d.a.createElement(Fe,{strong:!0},"Select a region"),d.a.createElement("div",{className:"mt-10 form-grid grid-4"},k.map((function(e,t){return d.a.createElement("label",{key:t},d.a.createElement(y.b,{as:fe.a,type:"radio",name:"region",value:e.id}),d.a.createElement("span",{className:"capitalize"},e.name))}))),d.a.createElement(y.a,{name:"region",render:function(e){return d.a.createElement(Fe,{type:"danger"},e)}})):d.a.createElement(d.a.Fragment,null),"region"===c.type?d.a.createElement("div",{className:"mt-40 pl-16 pr-16"},d.a.createElement(Fe,{strong:!0},"License Upload"),d.a.createElement("div",{className:"mt-10 form-grid grid-2"},d.a.createElement(y.b,{component:ae.a,multiple:!1,value:[{name:Object(v.g)(c,"license.name",""),url:Object(v.g)(c,"license.url","")}],onChange:function(e){n("license.name",e[0].name),n("license.url",e[0].url)},validate:function(e){if(!e)return"Upload License"},errors:s,placeholder:"Upload License",name:"license.url",label:"License"}),d.a.createElement("div",{style:{width:"300px"}},d.a.createElement(y.b,{component:x.a,name:"regionalLicenseValidity",label:"Select Expiry Date *",format:"YYYY-MM-DD",getPopupContainer:function(){return document.getElementById("license")},disabledDate:P,value:(null===c||void 0===c?void 0:c.regionalLicenseValidity)||"",validate:function(e){if(!e)return"Select expiry date"},hasFeedback:!0})))):d.a.createElement(d.a.Fragment,null),"state"===c.type?d.a.createElement("div",null,d.a.createElement("div",{className:"mt-10 form-grid grid-2 pl-16 pr-16"},d.a.createElement("div",null,d.a.createElement("div",{className:"mt-20 mb-10"},d.a.createElement(Fe,{strong:!0},"Select state")),d.a.createElement(y.b,(a={component:x.d,name:"selectedStates",label:"Select State *",filterOption:!1,value:c.selectedStates,getPopupContainer:function(){return document.getElementById("license")},validate:function(e){return function(e){if(0===(null===e||void 0===e?void 0:e.length))return"Select atleast one state"}(e)},mode:"multiple",labelInValue:!0,showArrow:!0,optionValueKey:"code",showSearch:!0},Object(V.a)(a,"showArrow",!0),Object(V.a)(a,"selectOptions",f),Object(V.a)(a,"onSearch",(function(e){D("",e)})),Object(V.a)(a,"onSelect",(function(e){var t=Object(O.a)(Object(O.a)({},c.states),{},Object(V.a)({},e.value,{validity:"",license:{name:"",url:""}}));n("states",t)})),Object(V.a)(a,"onDeselect",(function(e){var t=delete c.states[e.value];n("states",t)})),Object(V.a)(a,"hasFeedback",!0),a)))),d.a.createElement("div",{className:"mt-10 pl-16 pr-16"},c.selectedStates.map((function(e,t){var a;return d.a.createElement("div",{key:e.key,className:"mb-10 items-cont"},d.a.createElement(y.b,{component:ae.a,name:"".concat(e.key,".license.url"),multiple:!1,value:[{name:Object(v.g)(c.states,"".concat(e.key,".license.name"),""),url:Object(v.g)(c.states,"".concat(e.key,".license.url"),"")}],onChange:function(t){var a={name:t[0].name,url:t[0].url};n("states.".concat(e.value,".license"),Object(O.a)(Object(O.a)({},c.states[e.value].license),a))},validate:function(){if(!Object(v.g)(c.states,"".concat(e.key,".license.url"),""))return"Please Upload License for ".concat(e.label)},errors:s,placeholder:"Upload License",label:"License"}),d.a.createElement("div",null,d.a.createElement(y.b,{component:x.a,name:"states.".concat(e.key,".validity"),label:"Select Expiry Date *",format:"YYYY-MM-DD",value:(null===c||void 0===c||null===(a=c.states[e.key])||void 0===a?void 0:a.validity)||"",validate:function(e){if(!e)return"Select expiry date"},hasFeedback:!0,disabledDate:P})),d.a.createElement("span",null,d.a.createElement(Re.a,{className:"tag-blue",closable:!0,onClose:function(t){t.preventDefault(),function(e,t,a){var n=e.states;a("selectedStates",e.selectedStates.filter((function(e){return e!==t}))),delete n[t.key],a("states",n)}(c,e,n)}},e.label)))})))):d.a.createElement(d.a.Fragment,null),"monument"===c.type?d.a.createElement("div",null,d.a.createElement("div",{className:"mt-10 form-grid grid-2 pl-16 pr-16"},d.a.createElement("div",null,d.a.createElement("div",{className:"mt-20 mb-10"},d.a.createElement(Fe,{strong:!0},"Select monuments")),d.a.createElement(y.b,{component:x.d,name:"selectedMonuments",labelInValue:!0,label:"Select monuments (choose multiple)",value:c.selectedMonuments,getPopupContainer:function(){return document.getElementById("license")},validate:function(e){return function(e){if(0===(null===e||void 0===e?void 0:e.length))return"Select atleast one monument"}(e)},filterOption:!1,optionValueKey:"businessCode",optionNameKey:"name",showSearch:!0,onSearch:function(t){A(e.registeredAddressCountryCode,t)},showArrow:!0,mode:"multiple",onSelect:function(e){var t=Object(O.a)(Object(O.a)({},c.monuments),{},Object(V.a)({},e.businessCode,{validity:"",license:{name:"",url:""}}));n("monuments",t)},onDeselect:function(e){var t=delete c.monuments[e.businessCode];n("monuments",t)},hasFeedback:!0,selectOptions:L}))),d.a.createElement("div",{className:"mt-10 form-grid grid-1  pl-16 pr-16"},c.selectedMonuments.map((function(e,t){var a;return d.a.createElement("div",{key:e.value,className:"mb-10 items-cont"},d.a.createElement(y.b,{component:ae.a,multiple:!1,value:[{name:Object(v.g)(c.monuments,"".concat(e.value,".license.name"),""),url:Object(v.g)(c.monuments,"".concat(e.value,".license.url"),"")}],onChange:function(t){var a={name:t[0].name,url:t[0].url};n("monuments.".concat(e.value,".license"),Object(O.a)(Object(O.a)({},c.monuments[e.value].license),a))},errors:s,placeholder:"Upload License",name:"".concat(e.value,".license.name"),validate:function(){if(!Object(v.g)(c.monuments,"".concat(e.value,".license.url"),""))return"Please Upload License for ".concat(e.label)},label:"License"}),d.a.createElement("div",null,d.a.createElement(y.b,{component:x.a,name:"monuments.".concat(e.value,".validity"),label:"Select Expiry Date *",format:"YYYY-MM-DD",value:(null===c||void 0===c||null===(a=c.monuments[e.value])||void 0===a?void 0:a.validity)||"",validate:function(e){if(!e)return"Select expiry date"},hasFeedback:!0,disabledDate:P})),d.a.createElement("span",null,d.a.createElement(Re.a,{className:"tag-blue",closable:!0,onClose:function(t){t.preventDefault(),function(e,t,a){var n=e.monuments;a("selectedMonuments",e.selectedMonuments.filter((function(e){return e!==t}))),delete n[t.key],a("monuments",n)}(c,e,n)}},e.label)))})))):d.a.createElement(d.a.Fragment,null),"not-licensed"===c.type?d.a.createElement("div",{className:"not-licensed flex items-center ml-16 mr-16"},d.a.createElement("img",{className:"mr-10",src:"/img/DirectSupplierIcons/life-ring.svg"}),d.a.createElement("p",null,"Don\u2019t worry we\u2019ll try to find suitable assignments for you.")):d.a.createElement(d.a.Fragment,null)),!Object(v.m)(Object(v.g)(e,"tabStatus",""))&&d.a.createElement("div",{className:"flex flex-start mt-40 pl-14 pr-14"},d.a.createElement(S.a,{type:"primary",htmlType:"submit"},r?"Saving...":"Save & continue"))))))})))})),Ke=(a(3928),u.a.TabPane);l.a.Text,l.a.Link,l.a.Title;var Be=Object(g.b)((function(e){var t,a=e.Suppliers.guide;return{isGuideRegulatoryCodeOfConductSaved:null===(t=a.regulatory)||void 0===t?void 0:t.codeOfConduct.isDataSaved,isGuideRegulatoryLicensesSaved:a.regulatory.licenses.isDataSaved}}),(function(e){return{}}))((function(e){Object(p.i)().id,Object(v.q)().get("stage");var t=e.setCurrentL2Tab;return d.a.createElement("div",{className:"transport-regulatory"},d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement(u.a,{className:"tabs-dark",centered:!0},d.a.createElement(Ke,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"GDPR & Code Of Conduct")," ",e.isGuideRegulatoryCodeOfConductSaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-regulatory-code-of-Conduct"},d.a.createElement(Le,null)),d.a.createElement(Ke,{tab:d.a.createElement("div",{className:"flex justify-between items-center"},d.a.createElement("p",null,"Licenses & Certifications")," ",e.isGuideRegulatoryLicensesSaved&&d.a.createElement(me.a,{style:{marginLeft:"16px"}})),key:"guide-regulatory-licenses-certifications"},d.a.createElement(Ye,{setCurrentL2Tab:t}))))))})),qe=a(296),ze=Object(g.b)((function(e){var t=e.Suppliers;return{isTciScoreSaved:t.guide.tciScores.isDataSaved,isCustomerScoreSaved:t.guide.customerScores.isDataSaved,isSourceMarketScoreSaved:t.guide.sourceMarketScores.isDataSaved,isThemesScoreSaved:t.guide.themeScores.isDataSaved,sourceMarketsList:e.SourceMarkets.sourceMarketsList,sourceMarketScores:e.Suppliers.guide.sourceMarketScores.data,customersList:e.Customers.customersList,customerScores:e.Suppliers.guide.customerScores.data,tciScores:e.Suppliers.guide.tciScores.data,themeScores:e.Suppliers.guide.themeScores.data,tourCategories:e.Tour.tourCategories,tourThemes:e.Tour.tourThemes,isOtherScoresSaved:e.Suppliers.guide.otherScores.isDataSaved,otherScores:e.Suppliers.guide.otherScores.data}}),(function(e){return{getCustomersList:Object(f.b)(h.a,e),getCustomerScore:Object(f.b)(b.e,e),updateCustomerScore:Object(f.b)(b.p,e),getSourceMarketsList:Object(f.b)(ve.a,e),getSourceMarketScore:Object(f.b)(b.l,e),updateSourceMarketScore:Object(f.b)(b.y,e),getTciScore:Object(f.b)(b.m,e),updateTciScore:Object(f.b)(b.z,e),getThemeScore:Object(f.b)(b.n,e),updateThemeScore:Object(f.b)(b.A,e),getTourCategories:Object(f.b)(B.c,e),getThemeByCategory:Object(f.b)(B.b,e),getOtherScore:Object(f.b)(b.j,e),updateOtherScore:Object(f.b)(b.x,e),clearTours:Object(f.b)(B.a,e)}}))((function(e){var t;return Object(m.useEffect)((function(){}),[]),d.a.createElement(qe.a,{defaultTabKey:"tci",totalTabs:5,onTabsEnd:e.setCurrentL2Tab},d.a.createElement(K.a,{isDataSaved:e.isTciScoreSaved,tabTitle:"TCI Score",hasDelete:!1,tabKey:"tci",getScores:e.getTciScore,nextTab:"source-market",updateScore:e.updateTciScore,scoresList:e.tciScores,type:"1",rowMode:!1,compactRows:!1,getPayload:function(e){var t={};return e.forEach((function(e){t[e.value]=e.score})),t}}),d.a.createElement(K.a,{tabKey:"source-market",isDataSaved:e.isSourceMarketScoreSaved,tabTitle:"Source Market Score",selectBoxText:"Select Source Market",getSelectOptions:e.getSourceMarketsList,getScores:e.getSourceMarketScore,nextTab:"customer-score",updateScore:e.updateSourceMarketScore,selectOptionsList:e.sourceMarketsList,scoresList:e.sourceMarketScores,parentObject:"market",convertScoreToPayload:function(e){var t;return{sourceMarket:null===(t=e.market)||void 0===t?void 0:t.code,score:e.score}},rowMode:!0,compactRows:!0,hasDelete:!0}),d.a.createElement(K.a,{tabKey:"customer-score",isDataSaved:e.isCustomerScoreSaved,tabTitle:"Customer Score",selectBoxText:"Select Customers",getSelectOptions:e.getCustomersList,getScores:e.getCustomerScore,nextTab:"themes",updateScore:e.updateCustomerScore,selectOptionsList:e.customersList,scoresList:e.customerScores,parentObject:"customer",convertScoreToPayload:function(e){var t;return{customer:null===(t=e.customer)||void 0===t?void 0:t.code,score:e.score}},rowMode:!0,compactRows:!0,hasDelete:!0}),d.a.createElement(K.a,(t={tabKey:"themes",isDataSaved:e.isThemesScoreSaved,tabTitle:"Theme Score",selectBoxText:"Select Tour Themes",getSelectOptions:e.getTourCategories,getScores:e.getThemeScore,nextTab:"other-scores",updateScore:e.updateThemeScore,selectOptionsList:e.tourCategories,scoresList:e.themeScores,parentObject:"tourCategory",convertScoreToPayload:function(e){var t;return{customer:null===(t=e.customer)||void 0===t?void 0:t.code,score:e.score}},rowMode:!0,compactRows:!1,hasDelete:!0,hasRowSelect:!0,rowSelectValueKey:"specialities",rowSelectOptions:e.tourThemes,getRowSelectOptionsList:function(t){return e.getThemeByCategory(t)},clearRowSelectOptions:e.clearTours},Object(V.a)(t,"convertScoreToPayload",(function(e){return{tourCategory:e.value,score:e.score,specialities:e.specialities.map((function(e){return e.id}))}})),Object(V.a)(t,"columnTitles",["Theme","Rating","Score","Specialities"]),Object(V.a)(t,"hideTitle",!0),t)),d.a.createElement(K.a,{isDataSaved:e.isOtherScoresSaved,tabTitle:"Other Scores",hasDelete:!1,tabKey:"other-scores",getScores:e.getOtherScore,nextTab:"tour-type",checkboxTitle:"Tour Type Sustainability",updateScore:e.updateOtherScore,getPayload:function(e,t){return{sustainability:e[0].score}},scoresList:e.otherScores.sustainability,checkboxScoreList:e.otherScores.tourTypeSuitability,type:"1",rowMode:!0,compactRows:!0}))})),Ue=a(276),We=a.n(Ue),He=Object(g.b)((function(e){var t=e.Suppliers,a=(t.guide,t.root.tabStatus.status);return{isCovidVaccinated:t.guide.self.isCovidVaccinated,tabStatus:a}}),(function(e){return{getPersonalDetails:Object(f.b)(b.k,e),addPersonalDetails:Object(f.b)(b.b,e)}}))((function(e){var t=Object(m.useState)(!1),a=Object(s.a)(t,2),n=a[0],i=a[1],l=Object(p.i)().id,o=Object(v.q)().get("stage");return Object(m.useEffect)((function(){e.getPersonalDetails(l,o)}),[]),Object(m.useEffect)((function(){i(e.isCovidVaccinated)}),[e.isCovidVaccinated]),d.a.createElement("div",{className:"guide-self"},d.a.createElement(We.a,{checked:n,onChange:function(e){return i(e.target.checked)}},"Is Covid Vaccinated ?"),d.a.createElement("div",{className:"flex flex-start mt-40"},d.a.createElement(S.a,{onClick:Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(v.m)(Object(v.g)(e,"tabStatus",""))){t.next=5;break}return t.next=3,e.addPersonalDetails(l,{isCovidVaccinated:n});case 3:return t.next=5,e.getPersonalDetails(l,o);case 5:e.setCurrentL2Tab();case 6:case"end":return t.stop()}}),t)}))),type:"primary"},"Continue")))})),Je=a(160),$e=a(27),_e=u.a.TabPane;l.a.Text,l.a.Link;var Qe=Object(g.b)((function(e){var t=e.Suppliers,a=t.guide,n=t.root;return{isGuidePublished:Object(v.g)(a,"tabStatus.status",!1),isInternalAssesmentTabsVisible:!["","publish-rejected","draft","deactivated","deactivation-rejected"].includes(Object(v.g)(n,"tabStatus.status")),isGuideRegulatorySaved:a.regulatory.licenses.isDataSaved,isSelfSaved:a.self.isDataSaved,isGuideAssessYourselfSaved:a.assessYourself.languageProficiency.isDataSaved&&a.assessYourself.experience.isDataSaved&&a.assessYourself.expertise.isDataSaved,isGuideInternalAssessmentSaved:a.internalAssessment.languageProficiency.isDataSaved&&a.internalAssessment.expertise.isDataSaved,isGuideEmpanelmentSaved:a.empanelment.isDataSaved,isScoreAndRateSaved:a.tciScores.isDataSaved}}),(function(e){return{getGuideLoad:Object(f.b)(b.i,e),getTciScore:Object(f.b)(b.m,e),getThemeScore:Object(f.b)(b.n,e),getCustomerScore:Object(f.b)(b.e,e),getSourceMarketScore:Object(f.b)(b.l,e),getOtherScore:Object(f.b)(b.j,e)}}))((function(e){var t=Object(p.i)().id,a=(Object(p.g)(),Object(v.q)().get("stage")),n=Object(m.useState)("self"),i=Object(s.a)(n,2),l=i[0],o=i[1];Object(m.useEffect)((function(){e.isInternalAssesmentTabsVisible||o("self")}),[e.isInternalAssesmentTabsVisible]),Object(m.useEffect)((function(){g()}),[t]),Object(m.useEffect)((function(){e.getTciScore(t,a),e.getCustomerScore(t,a),e.getSourceMarketScore(t,a),e.getThemeScore(t,a),e.getOtherScore(t,a)}),[]);var g=function(){var n=Object(c.a)(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.getGuideLoad(t,a);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return d.a.createElement(Je.a,{type:"shimmer",loadingKey:$e.r.SUPPLIER_GUIDE},d.a.createElement("div",{className:"component-hotels supplier-guides"},d.a.createElement("div",null,d.a.createElement(u.a,{activeKey:l,onChange:function(e){return o(e)},centered:!0},d.a.createElement(_e,{tab:d.a.createElement("div",{className:"flex items-center"},d.a.createElement("p",null,"Personal Details"),e.isSelfSaved&&d.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"self"},d.a.createElement(He,{setCurrentL2Tab:function(){return o("guide-regulatory")}})),d.a.createElement(_e,{tab:d.a.createElement("div",{className:"flex items-center"},d.a.createElement("p",null,"Regulatory"),e.isGuideRegulatorySaved&&d.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"guide-regulatory"},d.a.createElement(Be,{setCurrentL2Tab:function(){return o("guide-assess-yourself")}})),e.isGuideRegulatorySaved&&d.a.createElement(_e,{tab:d.a.createElement("div",{className:"flex items-center"},d.a.createElement("p",null,"Assess Yourself"),e.isGuideAssessYourselfSaved&&d.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"guide-assess-yourself"},d.a.createElement(ge,{setCurrentL2Tab:function(){return o("guide-internal-assessment")}})),e.isInternalAssesmentTabsVisible&&d.a.createElement(d.a.Fragment,null,d.a.createElement(_e,{tab:d.a.createElement("div",{className:"flex items-center"},d.a.createElement("p",null,"Internal Assessment"),e.isGuideInternalAssessmentSaved&&d.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"guide-internal-assessment"},d.a.createElement(we,{setCurrentL2Tab:function(){return o("score-and-rate")}})),d.a.createElement(_e,{tab:d.a.createElement("div",{className:"flex items-center"},d.a.createElement("p",null,"Scoring & Themes"),e.isScoreAndRateSaved&&d.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"score-and-rate"},d.a.createElement(ze,{setCurrentL2Tab:function(){return o("guide-empanelment")}})),d.a.createElement(_e,{tab:d.a.createElement("div",{className:"flex items-center"},d.a.createElement("p",null,"Empanelment"),e.isGuideEmpanelmentSaved&&d.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"guide-empanelment"},d.a.createElement(Oe,null)))))))}));t.default=Qe}}]);