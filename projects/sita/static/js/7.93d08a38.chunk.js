(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[7],{3900:function(e,t,a){},3901:function(e,t,a){},3902:function(e,t,a){},3903:function(e,t,a){},3904:function(e,t,a){},3905:function(e,t,a){},3906:function(e,t,a){},3907:function(e,t,a){},3908:function(e,t){},3909:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATKADAAQAAAABAAAATAAAAAAWucfgAAAHZklEQVR4Ae2c22scVRzHf3PZSzbZxMZYrFRbpdDS5qG1IlJ9KIoPfVAQSf+ACj4Uir745kPefZKCD4X6BzSKoEgeRPFBQQp5S6WFIlSlLdam2d1ku5fMjr/vZs/07ObM7lx2krk4cHJm5tx+38/+5szlnBON9mCzbVubP0+56YNkFJpk1LbIyFtkWG3SrCJpHY5hlp4j22hw4LhlkFU2yWoWyKr+TdbqNWprmmbvtvldw3aj0dMf2rn2Y8rPPk25SoVy42hzZobaaw+pnZug1soVrT2OOkfVESmwhWu2ces7Kk7mqdDokDHKmDDpRZ2szRY1j75DjaXzmhWmrmFlIwEGb+JGS3xp5Yc1HlUaX8otrrsehdeNFdjZRdus3aXJvQI1+AMAXPk52vx5UdsaTAt6PBZgi4u2/sOfNFm3qRjUkCjLlTRqvP0CbS4uap2w7YQGdu6SXfinSWVxZwtrUFTlccfdX6Da8mWtGaaNwMDwaPDGBzQVV69ygwJv++UqbQR9JAkEbGHBNu7N0fRmg0w3w+J8frJIWwf+perSkv+7qW9g6NjrD2imXSc9zlBG2ZYrUaf0DFX83hB8ATuxYOeL+2g67v3VKFgiHf1a4xFVbyxpeAzxtHkGBlj5KZrxVGvCMrU2qOIVmqfLCpchPCthHDybC23Q6KXASGDo4NFnpeUyVEGBNmiEVlW6fG4oMDw64G6Y9A5eFuy2D43QCs1ueXB+aOLrF+xy0p6zhon1kobntF+/1GpueV09DE/wWYMFSNAM7b6A4d0QrztuhdJ+HtrBQKVTeWfAi3TH7r9caxsbqvKpOVeemnK04CYABnxix6W5gyJur/KlCFBphwVSgzrBQPWoscPD8D1LoPYKyt7aHHrzEPXtdayZkyPHAKBZeFuPRUW2u08ovpSyOz4lMrgBGwaoY9X76hR17VWsGyVXSG4ABTDYzK9P6/KX20EPKwlho2ANgrG3HscKlNBh9ezSzIk+cACJH14FTfYyrgdMHC9zRGLA4vYyzYqGVMCEZwlYApJtxROW0CJizdiGJuAJ71NBk73syDlaEwMrjodhdMdwjkQTT2IZlgyq02k40G2r6ew/Kbn3e5pR2PYutlXXi46n4Xv1ME8TloMN72/i2EHUGwoTefriQVjffn7oreMvlT4zdO1AX8aEHFgd+97vf9Q/efejOz96gQY2LK0LrPtYgc5+1LihuAzBJMmwYD9+aGjAPjZZ2/aZ/r9g0xs63P5qihHp/izqI1yK6K+S6lmyKmiAFtG9yGmqfcGo62EYvldlUp2T+yxVepLO+dEiGJn4nPHyBXdgov8CCLe74erqKq2trfWxmp2dpfn5+b5zcTyAJnHXhFbVHRN2Yz4IWOmYReNFiFfX9VJX3PJ41QZWJqYcNdbDSUiCJ4VTuF0arHTMzxpVmXwXieuz1igNqnRZi6xRlRfnwMrEZDa3DF7PV6tVarU8j1R5rTZwvnw+T9PT4x+zASsdM/8CW5axgmBlYppkWGRR/Jpx/C3ASsec0jgaF0ebwEpP83jjuKGD1Y5P1ONuJG316ZiQkTZRUekBKx3z4KNqIG31gpWJRQPtkDM/k/wu6edHBSsdKyz8FMpyXrAysRylEnINRVbeJcFKx9qdLHuNH+1gZWKhE88sDLVl5V0SrHSsCgtFK0OFwcrEfPWzH9vtMCvMsvAuiZVzYNV90scSugw5SiCpglEXGNYbBqolQ4UEoy4wTLbAesMM6fclFWzEhBTn5RuLM33VkqHMMhsHGFayZoiBL6kyG2duBWan8HB4i7/5eBoFl1tM87skf6FoiZk70Ox4WA9AXQbx/36XQB8Tx8OQhI4tiJel9V0S3iU6e+E8gx5GWCMtErMeq1j0eRgAYf0grwBp8Hxrz+u30/guiRUhqrWUOzwM0LCgXOdpKtjP4gbtYKDSvsPDkAmr749csmt0f8PT8HHa3iU7c+UaGKiAKT0MGW/z6nuj3Mjcsxk0Q7sKFs65AkPizatzG0WzPbZ/koE647xBKzQPs3EoMHzOOE4HK0bBUrrnsIqTlgaN0Drq3zMMBQbR+FcFM/sq65rJy7VSukEbNHr5twwjgYHRypVX2qWC/iilvAjaoNGLPuVdUlXwxtKJ1omFGw+r62tzg+lJfZfUDMuemp54CG2DmtyOPXmYKIyK9784+4CP74pzCY7vQosfWNAaaKoTzyY+xGW/5nAalSRwW2Gb3+cO/o5f2315mKi819AZPr4sziUohs1ngsCCxkAeJsNhb3uvVqt90Ww2n5XP7+W+yxzX+2zTRQb1TRjbAnmY3CAMKJfLxzi+zCGO4wKwCV4FG0PBknWPZZ+97SSH7znEZYMtJ8ciLspK2MhTHL7i0OGw25vFDaLtU1FqjKRuNvowh0853OIQ9YY20NbhSMT0Kg3d6Xs1joW8ynnPcXiTw2scfA+2cBl5w8Pmbxx+4rDM/dN1OTGq/V0DJgtgeBN8DIDHOBzthec5xn9jEYF3u/9oo9aL/+L4Vi/c5Pg6Q3rM8a5u/wE0D2+CNbJ9AQAAAABJRU5ErkJggg=="},3910:function(e,t,a){},3911:function(e,t){},3912:function(e,t){},3913:function(e,t,a){},3914:function(e,t){},3915:function(e,t,a){},3916:function(e,t,a){},3992:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(8),r=a(28),c=a(57),o=a(10),u=a(11),s=a(676),d=a(138),m=a(250),v=a(18),y=a(1),f=a.n(y),p=a(6),h=(a(140),a(63)),b=a.n(h),g=a(287),E=a(489),P=(a(3900),a(38),a(21)),C=a.n(P),O=a(160),D=a(47),T=a(487),j=a(89),k=a(211),S=a(683),x=a(448),A=(a(3901),a(684)),w=a(22),B=a(13),N=a(25),F=N.f().shape({value:N.e().test("greaterThanZero","Allowance must be a number and greater than 0.",(function(e){return e&&e>=0}))}),L=function(e){var t,a=Object(n.useState)(!1),r=Object(l.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)(null),s=Object(l.a)(u,2),d=s[0],m=s[1],v=Object(n.useState)({value:0}),y=Object(l.a)(v,2),f=y[0],p=y[1];return Object(n.useEffect)((function(){var t,a,n,i;p({value:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.driverAllowance)?null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.driverAllowance:0}),m({value:(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.driverAllowance)?null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.driverAllowance:0})}),[e.data]),i.a.createElement("div",{className:"driver-allowance"},i.a.createElement(S.a,{title:i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Driver Allowance *"),i.a.createElement(g.a,{isDataSaved:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.driverAllowance})),subTitle:"*Applicable only for Inter City Multi Day Travel",extraContent:1!=e.readOnly&&i.a.createElement(x.a,{type:d?"edit":"add",onClick:function(){return o(!0)}},d?"EDIT":"ADD ALLOWANCE")},i.a.createElement("p",null,d?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,"\u20b9 ",null===d||void 0===d?void 0:d.value)," per day."):"No allowance added."),i.a.createElement(A.a,{title:"Driver Allowance",subTitle:"Driver allowance is only applicable for Inter City Multi Day Travel.",width:500,visible:c,onOK:function(){return o(!1)},onCancel:function(){return o(!1)}},i.a.createElement(B.e,{initialValues:d||f,enableReinitialize:!0,validationSchema:F,onSubmit:function(t){console.log({allowance:t.value}),m(t),e.onSave("allowance",{allowance:t.value}),o(!1)}},(function(t){t.setFieldValue,t.isSubmitting;var a=t.values,n=(t.errors,t.submitForm);return i.a.createElement(B.d,null,i.a.createElement(B.b,{component:w.b,label:"Enter allowance per day",value:a.value,name:"value",type:"name",hasFeedback:!0}),i.a.createElement("div",{className:"modal-footer-section"},e.readOnly?null:i.a.createElement(C.a,{onClick:function(){n()},type:"primary"},"Save")))})))))},I=(a(3902),a(2)),V=a(19),M=(a(3903),[{key:"0",tab:"Sports Vehicle",columnTitle:"Vehicles",columns:[{name:"Vehicle Type",key:"vehicle-type"},{name:"Extra KM Prices",key:"extra-km-prices"},{name:"Extra Hr Prices",key:"extra-hr-prices"}],firstColumnValues:[{name:"Innova",key:"innova"},{name:"Mercedes",key:"mercedes"}]},{key:"1",tab:"Sports Vehicle",columnTitle:"VehiclesSports",columns:[{name:"Vehicle Type",key:"vehicle-type"},{name:"Extra KM Prices",key:"extra-km-prices"},{name:"Extra Hr Prices",key:"extra-hr-prices"}],firstColumnValues:[{name:"Innova2",key:"innova"},{name:"Mercedes2",key:"mercedes"}]}]),z=a(78),H=(a(150),a(71)),R=a.n(H),K=(a(149),a(69)),q=a.n(K),G=(a(3904),a(74)),W=q.a.Text,Y=(q.a.Link,q.a.Title,function(e){var t,a=function(t){var a,n;return"columns"!=e.filter||(!e.currentTab||(null===(a=e.currentTab)||void 0===a?void 0:a.id)==(null===(n=t.transportVehicleCategory)||void 0===n?void 0:n.id))};return i.a.createElement("div",{className:"value-table"},i.a.createElement("table",null,i.a.createElement("thead",null,e.higherLevelTabs?i.a.createElement("tr",null,i.a.createElement("th",null),e.higherLevelTabs.map((function(t){return a(t)?i.a.createElement("th",{colSpan:e.higherLevelTabsSpan},t.name):null}))):null,i.a.createElement("tr",null,i.a.createElement("th",null,e.leftColumnTitle),null===e||void 0===e||null===(t=e.topColumns)||void 0===t?void 0:t.map((function(e){return a(e)?i.a.createElement("th",null,e.name):null})))),i.a.createElement("tbody",null,e.leftColumns.map((function(t,n){return function(t){var a,n;return"rows"!=e.filter||(!e.currentTab||(null===(a=e.currentTab)||void 0===a?void 0:a.id)==(null===(n=t.transportVehicleCategory)||void 0===n?void 0:n.id))}(t)?i.a.createElement("tr",null,i.a.createElement("td",null,t.name),e.topColumns.map((function(t,l){return a(t)?i.a.createElement("td",null,i.a.createElement("div",{className:"input-container"},i.a.createElement(R.a,{disabled:e.disabled,value:G.Array.isArray(e.values)&&e.values.length>0?e.values[n][l]:null,placeholder:"Enter price",onChange:function(t){return e.onChange(t.target.value,n,l)}}))):null}))):null})))))}),Z=function(e){e.tabList;var t,a=Object(n.useState)(0),r=Object(l.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)(null),s=Object(l.a)(u,2),d=s[0],m=s[1],y=Object(n.useState)(!1),f=Object(l.a)(y,2),p=f[0],h=f[1],b=Object(n.useState)(!1),g=Object(l.a)(b,2),E=g[0],P=g[1],O=Object(n.useRef)([]);O.current=d;var D=function(e,t,a){P(!1);var n=Object(z.cloneDeep)(O.current);Object(G.isNaN)(e)&&(e=""),0!==e&&"0"!==e||(e=1),n[t][a]=e,m(n)},T=function(){if(e.values)m(Object(z.cloneDeep)(e.values));else{for(var t=new G.Array(e.leftColumns.length),a=0;a<t.length;a++){t[a]=new G.Array(e.topColumns.length);for(var n=0;n<e.topColumns.length;n++)t[a][n]=""}m(t)}};Object(n.useEffect)((function(){T()}),[]),Object(n.useEffect)((function(){T()}),[e.values]),Object(n.useEffect)((function(){null!=e.values||p||T()}),[p]);return i.a.createElement("div",{className:"edit-table-values mt-6"},e.showModalOnly&&!e.dontShowButton?i.a.createElement("div",{className:"flex justify-center"},e.readOnly?null:i.a.createElement(C.a,{className:"ant-btn-primary",onClick:function(){return h(!0)}},e.buttonText)):null,i.a.createElement("div",{style:e.showModalOnly?{display:"none"}:{}},i.a.createElement(S.a,{title:e.title,subTitle:e.subTitle,tabList:e.tabItems,onTabChange:function(e){o(e)},noBodyPadding:!0,extraContent:e.isPopupEdit&&!e.readOnly?i.a.createElement(x.a,{type:"edit",onClick:function(){return h(!0)}},"EDIT"):null},i.a.createElement(Y,{disabled:!0,leftColumns:e.leftColumns,topColumns:e.topColumns,values:d,onChange:D,currentTab:e.tabItems[c],leftColumnTitle:e.leftColumnTitle,filter:e.filter}))),(void 0!=e.popupVisibility?e.popupVisibility:p)&&i.a.createElement(A.a,{visible:void 0!=e.popupVisibility?e.popupVisibility:p,onOK:function(){return h(!1)},onCancel:function(){var t,a;e.onPopupClose?(e.onPopupClose(),h(!1)):h(!1),o(null===e||void 0===e||null===(t=e.tabList)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.key)},width:900,noTitle:!0},i.a.createElement("div",{className:"edit-table-values edit-table-values-popup"},i.a.createElement(S.a,(t={defaultKey:c,noBodyPadding:!0,title:e.title,subTitle:e.subTitle,tabList:e.tabItems,onTabChange:function(e){o(e)}},Object(v.a)(t,"noBodyPadding",!0),Object(v.a)(t,"extraContent",null),t),E?i.a.createElement(W,{type:"danger"},"Please fill atleast one price"):null,i.a.createElement(Y,{leftColumns:e.leftColumns,topColumns:e.topColumns,values:d,onChange:D,currentTab:e.tabItems[c],leftColumnTitle:e.leftColumnTitle,filter:e.filter,higherLevelTabs:e.higherLevelTabs,higherLevelTabsSpan:e.higherLevelTabsSpan}),!e.readOnly&&i.a.createElement(C.a,{onClick:function(){!function(){for(var t,a,n=!0,i=0;i<d.length;i++)for(var l=0;l<d[0].length;l++)d[i][l]&&(n=!1);e.noValidation?e.onSave(d):n?P(!0):(e.onSave(d),h(!1),o(null===(t=e.tabItems)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.key))}()},type:"primary"},"Save Details")))))},U=function(e,t){var a=e,n=a.filter((function(e,t){return a.findIndex((function(t,a){return t.id==e.id}))==t}));return n=n.map((function(e,a){return Object(I.a)(Object(I.a)({},e),{},{name:e.name,key:t?a:e.id,tab:e.name})}))},J=function(e){var t,a,r=Object(n.useState)([]),c=Object(l.a)(r,2),o=c[0],u=c[1],s=Object(n.useState)([]),d=Object(l.a)(s,2),m=d[0],v=d[1],y=Object(n.useState)([]),f=Object(l.a)(y,2),p=f[0],h=f[1],b=Object(n.useState)(null),E=Object(l.a)(b,2),P=E[0],C=E[1];Object(n.useEffect)((function(){var t,a;if(e.vehicles&&0!=e.vehicles.length){var n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.extraRunningCharges;u([{name:"Extra KM Prices",key:"extraKmPrice"},{name:"Extra Hr prices",key:"extraHrPrice"}]);var i=Object(V.a)(e.vehicles);v(null===i||void 0===i?void 0:i.map((function(e){return e.vehicleType})));var l=null===(a=e.vehicles)||void 0===a?void 0:a.map((function(e){return e.vehicleType.transportVehicleCategory}));console.log("Unique vehicles",l),l=l.filter((function(e,t){return l.findIndex((function(t){return e.id==t.id}))==t})),console.log("Unique vehicles",l),h(l.map((function(e,t){return Object(I.a)(Object(I.a)({},e),{},{key:t,tab:e.name})})));for(var r=new Array(i.length),c=0;c<r.length;c++)r[c]=new Array(2);i.forEach((function(e,t){var a,i,l,c,o,u;r[t][0]=null===n||void 0===n||null===(a=n.slice())||void 0===a||null===(i=a.reverse())||void 0===i||null===(l=i.find((function(t){return t.vehicleType.id==e.vehicleType.id})))||void 0===l?void 0:l.extraKmPrice,r[t][1]=null===n||void 0===n||null===(c=n.slice())||void 0===c||null===(o=c.reverse())||void 0===o||null===(u=o.find((function(t){return t.vehicleType.id==e.vehicleType.id})))||void 0===u?void 0:u.extraHrPrice})),C(r)}}),[e.data,e.vehicles]);return i.a.createElement("div",{className:"running-charges mt-20"},i.a.createElement(Z,{readOnly:e.readOnly,title:i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Extra Running Charges *"),i.a.createElement(g.a,{isDataSaved:(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.extraRunningCharges)||void 0===a?void 0:a.length)>0})),subTitle:"Extra charge per km & hr",tabList:M,isPopupEdit:!0,leftColumnTitle:"Vehicles",topColumns:o,leftColumns:m,tabItems:p,values:P,onSave:function(t){console.log("Result Matrix",t);var a=[];m.forEach((function(e,n){a.push({vehicleType:e.id,extraKmPrice:t[n][0],extraHrPrice:t[n][1]})})),console.log("RESULT : ",a),e.onSave("running-charges",a)},onPopupClose:function(){return e.onSave("refresh")},filter:"rows"}))},X=(a(3905),a(443),N.f().shape({minimumBookingLeadTime:N.e().typeError("Lead time be numeric"),cancellationPolicy:N.a().of(N.f({daysBeforeBookingDate:N.e().typeError("Days before must be numeric").test("cpDaysBefore","Days before booking date must be unique",(function(e,t){return!(t.from[1].value.cancellationPolicy.filter((function(t){return t.daysBeforeBookingDate==e})).length>1)})).test("cpreq","This field is required",(function(e,t){return!(this.from[1].value.cancellationPolicy.length>1&&!e||t.parent.cancellationFee.fee&&!e)})),cancellationFee:N.f({fee:N.e().when("unit",{is:"pct",then:N.e().positive("This field must be positive").typeError("This field must be numeric").max(100,"Fee cannot be greater than 100%").test("cfeereq1","This field is required",(function(e,t){return!(this.from[2].value.cancellationPolicy.length>1&&!e||this.from[1].value.daysBeforeBookingDate&&!e)})),otherwise:N.e().positive("This field must be positive").typeError("This field must be numeric").test("cfeereq2","This field is required",(function(e,t){return!(this.from[2].value.cancellationPolicy.length>1&&!e||this.from[1].value.daysBeforeBookingDate&&!e)}))})})})).min(1),advancedPaymentPolicy:N.a().of(N.f({daysBeforeBookingDate:N.e().typeError("Days before must be numeric").test("apDaysBefore","Days before booking date must be unique",(function(e,t){return!(t.from[1].value.advancedPaymentPolicy.filter((function(t){return t.daysBeforeBookingDate==e})).length>1)})).test("cpreq1","This field is required",(function(e,t){return!(this.from[1].value.cancellationPolicy.length>1&&!e||t.parent.cancellationFee.fee&&!e)})),cancellationFee:N.f({fee:N.e().when("unit",{is:"pct",then:N.e().positive("This field must be positive").typeError("This field must be numeric").max(100,"Fee cannot be greater than 100%").test("cfeereq3","This field is required",(function(e,t){return!(this.from[2].value.cancellationPolicy.length>1&&!e||this.from[1].value.daysBeforeBookingDate&&!e)})),otherwise:N.e().positive("This field must be positive").typeError("This field must be numeric").test("cfeereq4","This field is required",(function(e,t){return!(this.from[2].value.cancellationPolicy.length>1&&!e||this.from[1].value.daysBeforeBookingDate&&!e)}))})})})).min(1)})),Q=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},i.a.createElement("g",{fill:"none","fill-rule":"evenodd"},i.a.createElement("g",{fill:"#3362FA","fill-rule":"nonzero"},i.a.createElement("g",null,i.a.createElement("path",{d:"M944.28 21.505l3.215 3.215-5.018 5.017L938 31l1.263-4.477 5.017-5.018zM947.727 19c.603 0 1.181.24 1.607.666.427.426.666 1.004.666 1.607s-.24 1.18-.666 1.607l-1.13 1.131-3.215-3.214 1.131-1.131c.426-.427 1.004-.666 1.607-.666z",transform:"translate(-1065 -263) translate(127 244)"})))))},$=Object(r.b)((function(e){var t,a=e.Products.TransportProduct;return{vehicles:null===a||void 0===a||null===(t=a.contracts)||void 0===t?void 0:t.vehicleList}}),(function(e){return{getVehicleList:Object(o.b)(s.u,e)}}))((function(e){var t,a,r,c,o,u,s,d,m,y,h,b=Object(n.useState)(null),E=Object(l.a)(b,2),P=E[0],O=E[1],D=Object(n.useState)({policies:null,overrides:[]}),T=Object(l.a)(D,2),j=T[0],k=T[1],N=[{name:"%",value:"pct"},{name:"Rs",value:"abs"}],F=Object(v.a)({vehicleType:null,minimumBookingLeadTime:"",cancellationPolicy:[{daysBeforeBookingDate:"",cancellationFee:{unit:"pct",fee:""}}],advancedPaymentPolicy:[{daysBeforeBookingDate:"",cancellationFee:{unit:"pct",fee:""}}]},"minimumBookingLeadTime",""),L=Object(n.useState)(F),V=Object(l.a)(L,2),M=V[0],z=V[1],H=function(e){return e?N.find((function(t){return t.value==e})).name:"%"};return Object(n.useEffect)((function(){Object(p.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getVehicleList();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}),[]),Object(n.useEffect)((function(){var t,a,n,i;null===e||void 0===e||null===(t=e.data)||void 0===t||t.policies;if(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.policies){var l={overrides:[],policies:[]},r=e.data.policies.filter((function(e){return e.allVehicle}));r=null===(n=r)||void 0===n?void 0:n.map((function(e){return Object(v.a)({id:e.id,vehicleType:e.vehicleType,minimumBookingLeadTime:e.minBookingLeadTime,cancellationPolicy:e.cancellationPolicies.map((function(e){return{daysBeforeBookingDate:e.daysBeforeBookingDate,cancellationFee:{unit:e.amountType||"pct",fee:e.fee}}})),advancedPaymentPolicy:e.advancePaymentPolicies.map((function(e){return{daysBeforeBookingDate:e.daysBeforeBookingDate,cancellationFee:{unit:e.amountType||"pct",fee:e.fee}}}))},"minimumBookingLeadTime",e.minBookingLeadTime)}));var c=e.data.policies.filter((function(e){return!e.allVehicle}));c=null===(i=c)||void 0===i?void 0:i.map((function(e){return Object(v.a)({id:e.id,vehicleType:e.vehicleType,minimumBookingLeadTime:e.minBookingLeadTime,cancellationPolicy:e.cancellationPolicies.map((function(e){return{daysBeforeBookingDate:e.daysBeforeBookingDate,cancellationFee:{unit:e.amountType||"pct",fee:e.fee}}})),advancedPaymentPolicy:e.advancePaymentPolicies.map((function(e){return{daysBeforeBookingDate:e.daysBeforeBookingDate,cancellationFee:{unit:e.amountType||"pct",fee:e.fee}}}))},"minimumBookingLeadTime",e.minBookingLeadTime)})),l.overrides=c,l.policies=r[0],k(l)}}),[e.data]),i.a.createElement("div",{className:"contract-terms"},i.a.createElement(S.a,{title:i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Terms & Conditions *"),i.a.createElement(g.a,{isDataSaved:(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.policies)||void 0===a?void 0:a.length)>0})),subTitle:"* Cancellation, advance policies. Policy is mandatory.",extraContent:i.a.createElement("div",{className:"flex"},1!=e.readOnly&&i.a.createElement(i.a.Fragment,null,!(null===j||void 0===j?void 0:j.policies)&&i.a.createElement(x.a,{onClick:function(){return O("policies")},type:"add"},"ADD POLICIES"),i.a.createElement(x.a,{type:"add",onClick:function(){return O("overrides")}},"ADD OVERRIDES")))},i.a.createElement("div",{className:"policies"},j.policies?i.a.createElement("div",{onClick:function(){if(!e.readOnly){var t=Object(I.a)({},j.policies);t.cancellationPolicy.length||(t.cancellationPolicy=[{daysBeforeBookingDate:"",cancellationFee:{unit:"pct",fee:""}}]),t.advancedPaymentPolicy.length||(t.advancedPaymentPolicy=[{daysBeforeBookingDate:"",cancellationFee:{unit:"pct",fee:""}}]),t.vehicleType=null,z(t),O("policies")}}},1!=e.readOnly&&i.a.createElement("div",{className:"edit-icon"},i.a.createElement(Q,null)),i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,"Cancellation Policies"),(null===(r=j.policies)||void 0===r||null===(c=r.cancellationPolicy)||void 0===c?void 0:c.length)<=0&&i.a.createElement("p",null,"No cancellation policies added"),i.a.createElement("ul",null,null===(o=j.policies)||void 0===o||null===(u=o.cancellationPolicy)||void 0===u?void 0:u.map((function(e){return i.a.createElement("li",null,i.a.createElement("span",null,e.cancellationFee.fee),H(e.cancellationFee.unit)," Cancellation charges apply if cancelled ",e.daysBeforeBookingDate," ","days prior to booking date.")}))),i.a.createElement("h4",null,"Advanced Payment Policies"),(null===(s=j.policies)||void 0===s||null===(d=s.advancedPaymentPolicy)||void 0===d?void 0:d.length)<=0&&i.a.createElement("p",null,"No advance payment policy added"),i.a.createElement("ul",null,null===(m=j.policies)||void 0===m||null===(y=m.advancedPaymentPolicy)||void 0===y?void 0:y.map((function(e){return i.a.createElement("li",null,i.a.createElement("span",null,e.cancellationFee.fee),H(e.cancellationFee.unit)," Advance payment required ",e.daysBeforeBookingDate," days prior to booking date.")})))),!!(null===j||void 0===j?void 0:j.policies)&&!!(null===j||void 0===j?void 0:j.policies.minimumBookingLeadTime)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flex"},i.a.createElement("h4",null,"Minimum Booking Lead Time: "),i.a.createElement("p",{className:"ml-8"}," ".concat(null===j||void 0===j?void 0:j.policies.minimumBookingLeadTime," days"))))):i.a.createElement("p",{className:"mb-12"},"No policies added")),j.overrides.length>0?i.a.createElement("h4",{className:"mt-15"},"Overrides"):null,null===j||void 0===j||null===(h=j.overrides)||void 0===h?void 0:h.map((function(t,a){var n,l,r,c,o,u;return i.a.createElement("div",{className:"border-box",onClick:function(){if(!e.readOnly){var a=Object(I.a)({},t);a.cancellationPolicy.length||(a.cancellationPolicy=[{daysBeforeBookingDate:"",cancellationFee:{unit:"pct",fee:""}}]),a.advancedPaymentPolicy.length||(a.advancedPaymentPolicy=[{daysBeforeBookingDate:"",cancellationFee:{unit:"pct",fee:""}}]),a.vehicleType=a.vehicleType.id,z(a),O("overrides")}}},i.a.createElement("div",{className:"policies"},1!=e.readOnly&&i.a.createElement("div",{className:"edit-icon"},i.a.createElement(Q,null)),i.a.createElement("h4",null,null===(n=e.vehicles.find((function(e){return e.vehicleType.id==t.vehicleType.id})))||void 0===n||null===(l=n.vehicleType)||void 0===l?void 0:l.name),i.a.createElement("h4",null,"Cancellation Policies"),(null===t||void 0===t||null===(r=t.cancellationPolicy)||void 0===r?void 0:r.length)<=0&&i.a.createElement("p",null,"No cancellation policy added"),i.a.createElement("ul",null,null===t||void 0===t||null===(c=t.cancellationPolicy)||void 0===c?void 0:c.map((function(e){return i.a.createElement("li",null,i.a.createElement("span",null,e.cancellationFee.fee),H(e.cancellationFee.unit)," Cancellation charges apply if cancelled ",e.daysBeforeBookingDate," days prior to booking date.")}))),i.a.createElement("h4",null,"Advanced Payment Policies"),(null===t||void 0===t||null===(o=t.advancedPaymentPolicy)||void 0===o?void 0:o.length)<=0&&i.a.createElement("p",null,"No advance payment policy added"),i.a.createElement("ul",null,null===t||void 0===t||null===(u=t.advancedPaymentPolicy)||void 0===u?void 0:u.map((function(e){return i.a.createElement("li",null,i.a.createElement("span",null,e.cancellationFee.fee),H(e.cancellationFee.unit)," Advance payment required ",e.daysBeforeBookingDate," days prior to booking date.")}))),!!t&&!!(null===t||void 0===t?void 0:t.minimumBookingLeadTime)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flex"},i.a.createElement("h4",null,"Minimum Booking Lead Time: "),i.a.createElement("p",{className:"ml-8"}," ".concat(null===t||void 0===t?void 0:t.minimumBookingLeadTime," days"))))))})),i.a.createElement(A.a,{visible:P,onOK:function(){return O(!1)},onCancel:function(){O(!1),z(F)},width:900,title:"overrides"==P?"Add Overrides":"Add Policies"},i.a.createElement(B.e,{initialValues:M,enableReinitialize:!0,validationSchema:X,onSubmit:function(t,a){var n=a.resetForm,i={id:t.id,allVehicle:!(!t.allVehicle&&"overrides"==P),vehicleType:t.vehicleType,minBookingLeadTime:t.minimumBookingLeadTime,cancellationPolicies:t.cancellationPolicy.map((function(e){return{daysBeforeBookingDate:e.daysBeforeBookingDate,fee:e.cancellationFee.fee,amountType:e.cancellationFee.unit}})),advancePaymentPolicies:t.advancedPaymentPolicy.map((function(e){return{daysBeforeBookingDate:e.daysBeforeBookingDate,fee:e.cancellationFee.fee,amountType:e.cancellationFee.unit}}))};1!=i.cancellationPolicies.length||i.cancellationPolicies[0].fee||(i.cancellationPolicies=[]),1!=i.advancePaymentPolicies.length||i.advancePaymentPolicies[0].fee||(i.advancePaymentPolicies=[]),console.log(i),t.id?e.onSave("update-policy",i):e.onSave("add-policy",i),n(),O(null),z(F)}},(function(t){t.setFieldValue,t.isSubmitting;var a,n=t.values,l=(t.errors,t.submitForm);t.resetForm;return i.a.createElement(B.d,null,"overrides"==P?i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,"Select Vehicle Type"),i.a.createElement("div",{className:"form-grid grid-2"},i.a.createElement(B.b,{component:w.d,label:"Vehicle Type",value:n.vehicleType,selectOptions:null===(a=e.vehicles)||void 0===a?void 0:a.map((function(e){return{name:e.vehicleType.name,value:e.vehicleType.id}})),name:"vehicleType",validate:function(e){return e?"":"This field is required"}}))):null,i.a.createElement("div",{className:"mt-16"},i.a.createElement("h4",null,"Cancellation Policy"),i.a.createElement("div",{className:"form-grid grid-1"},i.a.createElement(B.c,{name:"cancellationPolicy",render:function(e){return i.a.createElement("div",null,n.cancellationPolicy.map((function(t,a){var l;return i.a.createElement("div",{className:"form-grid grid-2"},i.a.createElement(B.b,{component:w.b,label:"Days before booking date",value:n.cancellationPolicy[a].daysBeforeBookingDate,name:"cancellationPolicy.".concat(a,".daysBeforeBookingDate"),type:"name",hasFeedback:!0}),i.a.createElement("div",{className:"flex unit-select-wrapper"},i.a.createElement("div",{className:"unit-select-box"},i.a.createElement(B.b,{component:w.b,label:"Cancellation Fee",value:n.cancellationPolicy[a].cancellationFee.fee,name:"cancellationPolicy.".concat(a,".cancellationFee.fee"),type:"name",hasFeedback:!0})),i.a.createElement("div",{className:"unit-select-unit"},i.a.createElement(B.b,{component:w.d,value:n.cancellationPolicy[a].cancellationFee.unit,selectOptions:N,name:"cancellationPolicy.".concat(a,".cancellationFee.unit")})),i.a.createElement("img",{src:"/img/delete.svg",className:"mr-6 ml-20 mb-8 cursor-pointer ",style:(l={visibility:a>0?"visible":"hidden"},Object(v.a)(l,"visibility",a>0?"visible":"hidden"),Object(v.a)(l,"width","11px"),Object(v.a)(l,"height","55px"),l),alt:"plus-icon",onClick:function(){return e.remove(a)}})))})),i.a.createElement(x.a,{onClick:function(){return e.push(M.cancellationPolicy[0])},type:"add"},"ADD MORE"))}})),i.a.createElement("h4",{className:"mt-20"},"Advance Payment Policy"),i.a.createElement("div",{className:"form-grid grid-1"},i.a.createElement(B.c,{name:"advancedPaymentPolicy",render:function(e){return i.a.createElement("div",null,n.advancedPaymentPolicy.map((function(t,a){return i.a.createElement("div",{className:"form-grid grid-2"},i.a.createElement(B.b,{component:w.b,label:"Days before booking date",value:n.advancedPaymentPolicy[a].daysBeforeBookingDate,name:"advancedPaymentPolicy.".concat(a,".daysBeforeBookingDate"),type:"name",hasFeedback:!0}),i.a.createElement("div",{className:"flex unit-select-wrapper"},i.a.createElement("div",{className:"unit-select-box"},i.a.createElement(B.b,{component:w.b,label:"Advance Payment Fee",value:n.advancedPaymentPolicy[a].cancellationFee.fee,name:"advancedPaymentPolicy.".concat(a,".cancellationFee.fee"),type:"name",hasFeedback:!0})),i.a.createElement("div",{className:"unit-select-unit"},i.a.createElement(B.b,{component:w.d,value:n.advancedPaymentPolicy[a].cancellationFee.unit,selectOptions:N,name:"advancedPaymentPolicy.".concat(a,".cancellationFee.unit")})),i.a.createElement("img",{src:"/img/delete.svg",className:"mr-6 ml-20 mb-8 cursor-pointer ",style:{visibility:a>0?"visible":"hidden",width:"11px",height:"55px"},alt:"plus-icon",onClick:function(){return e.remove(a)}})))})),i.a.createElement(x.a,{onClick:function(){return e.push(M.advancedPaymentPolicy[0])},type:"add"},"ADD MORE"))}})),i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",{className:"mt-16"},"Minimum Booking Lead Time"),i.a.createElement("div",{className:"form-grid grid-2"},i.a.createElement(B.b,{component:w.b,label:"Number of days",value:n.minimumBookingLeadTime,name:"minimumBookingLeadTime",hasFeedback:!0,type:"name"})))),i.a.createElement("div",{className:"modal-footer-section"},!e.readOnly&&i.a.createElement(C.a,{onClick:function(){l()},type:"primary"},"Save Details")))})))))})),_=Object(r.b)((function(e){var t,a,n,i,l=e.Products.TransportProduct,r=e.Suppliers;return{vehicles:null===l||void 0===l||null===(t=l.contracts)||void 0===t?void 0:t.vehicleList,basicDetails:null===l||void 0===l||null===(a=l.contracts)||void 0===a?void 0:a.basicDetails,currencies:e.Currency.currencyList,contractList:null===l||void 0===l||null===(n=l.contracts)||void 0===n?void 0:n.contractList,indirectSuppliers:null===r||void 0===r||null===(i=r.root)||void 0===i?void 0:i.indirectSuppliers,transportInfo:null===l||void 0===l?void 0:l.transportInfo}}),(function(e){return{getBasicDetails:Object(o.b)(s.l,e),getVehicleList:Object(o.b)(s.u,e),updateBasicDetails:Object(o.b)(s.x,e),createContract:Object(o.b)(s.f,e),addPolicy:Object(o.b)(s.a,e),updatePolicy:Object(o.b)(s.C,e),updateAllowance:Object(o.b)(s.w,e),addRunningCharges:Object(o.b)(s.b,e),getCurrencyList:Object(o.b)(T.a,e),getIndirectSuppliers:Object(o.b)(j.g,e)}}))((function(e){var t,a,r,o,s,d,m,y,h=Object(c.i)().id,b=Object(u.q)().get("stage"),g=Object(u.q)().get("contractId"),E=Object(n.useState)("basicDetailsTranspor"),P=Object(l.a)(E,2),T=P[0],j=(P[1],Object(n.useState)(!1)),S=Object(l.a)(j,2),x=S[0],A=S[1],w=-1!=(null===(t=e.transportInfo)||void 0===t||null===(a=t.supplierCode)||void 0===a?void 0:a.indexOf("BO")),B=function(){var t=Object(p.a)(f.a.mark((function t(a,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="refresh"===t.t0?3:"contract-details"===t.t0?4:"add-policy"===t.t0?14:"update-policy"===t.t0?17:"allowance"===t.t0?20:"running-charges"===t.t0?23:26;break;case 3:return t.abrupt("break",26);case 4:if(e.contractToEdit){t.next=11;break}return console.log("new"),t.next=8,e.createContract(h,n);case 8:t.sent,t.next=13;break;case 11:return t.next=13,e.updateBasicDetails(h,e.contractToEdit,n);case 13:return t.abrupt("break",26);case 14:return t.next=16,e.addPolicy(h,e.contractToEdit,n);case 16:return t.abrupt("break",26);case 17:return t.next=19,e.updatePolicy(h,e.contractToEdit,n);case 19:return t.abrupt("break",26);case 20:return t.next=22,e.updateAllowance(h,e.contractToEdit,n);case 22:return t.abrupt("break",26);case 23:return t.next=25,e.addRunningCharges(h,e.contractToEdit,n);case 25:return t.abrupt("break",26);case 26:e.getBasicDetails(h,g,b);case 27:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return i.a.createElement("div",{className:"contract-basic"},i.a.createElement(O.a,{loadingKey:T},i.a.createElement(k.a,(y={productType:"transport",onUpdate:function(t,a){var n={name:t.name,contractType:t.type,audience:t.audience||[],startDate:t.validity.start,endDate:t.validity.end,rateTypeCode:t.rateTypeCode,signatoryName:t.signatory.firstName,signatoryDesignation:t.signatory.designation,signingDate:t.signingDate,currency:t.currency,documents:t.documents,inclusiveOfTaxes:t.inclusiveOfTaxes,isForecastingAllowed:t.isForecastingAllowed,margin:t.margin,indirectSuppliers:t.indirectSuppliers,indirectSuppliersList:t.indirectSuppliersList,allIndirectSuppliers:t.allIndirectSuppliers};e.updateBasicDetails(h,e.contractToEdit,n).then((function(){return A(!1)}))},details:(null===(r=e.basicDetails)||void 0===r||null===(o=r.contractDetails)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.id)?null===(d=e.basicDetails)||void 0===d||null===(m=d.contractDetails)||void 0===m?void 0:m.data:null,showSupplierType:w,supplierBusinessCode:e.transportInfo.supplierCode,contractTypes:D.a,addNewContractVisible:x,setAddNewContractVisible:A,showRateTypeCode:!1,isReadOnlyMode:e.readOnly,supplierType:"transport"},Object(v.a)(y,"showRateTypeCode",!0),Object(v.a)(y,"hasAutoGenerateRateCode",!0),y)),e.contractToEdit?i.a.createElement(i.a.Fragment,null,i.a.createElement(J,{readOnly:e.readOnly,data:e.basicDetails,vehicles:e.vehicles,onSave:B}),i.a.createElement($,{readOnly:e.readOnly,data:e.basicDetails,onSave:B}),i.a.createElement(L,{readOnly:e.readOnly,data:e.basicDetails,onSave:B}),i.a.createElement("div",{className:"mt-20",style:{display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement(C.a,{onClick:e.onNext,className:"ant-btn-primary"},!e.readOnly&&"Save & "," Continue"))):null))})),ee=(a(3906),a(3907),b.a.TabPane),te=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},i.a.createElement("g",{fill:"none","fill-rule":"evenodd"},i.a.createElement("g",{fill:"#3362FA","fill-rule":"nonzero"},i.a.createElement("g",null,i.a.createElement("path",{d:"M944.28 21.505l3.215 3.215-5.018 5.017L938 31l1.263-4.477 5.017-5.018zM947.727 19c.603 0 1.181.24 1.607.666.427.426.666 1.004.666 1.607s-.24 1.18-.666 1.607l-1.13 1.131-3.215-3.214 1.131-1.131c.426-.427 1.004-.666 1.607-.666z",transform:"translate(-1065 -263) translate(127 244)"})))))},ae=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5"},i.a.createElement("g",{fill:"none","fill-rule":"evenodd"},i.a.createElement("g",{fill:"#000","fill-rule":"nonzero"},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"M9.556 4.829L11.927 2.459 9.556 0.088 8.722 0.922 9.673 1.873 4.815 1.873 4.815 3.044 9.673 3.044 8.722 3.995z",transform:"translate(-513 -363) translate(167 321) translate(342 42)"}))))))},ne=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"6",viewBox:"0 0 8 6"},i.a.createElement("g",{fill:"none","fill-rule":"evenodd"},i.a.createElement("g",{fill:"#000","fill-rule":"nonzero"},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"M7.185 6.6L2.327 6.6 3.278 5.663 2.444 4.829 0.073 7.2 2.444 9.571 3.278 8.737 2.327 7.8 7.185 7.8z",transform:"translate(-509 -367) translate(167 321) translate(342 42)"}))))))},ie=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){e.tabList&&e.tabList.length>0&&!r&&(c(r||(e.currentTab||e.tabList[0].key)),e.onTabChange(r||(e.currentTab||e.tabList[0].key)))}),[e.tabList]),i.a.createElement("div",{className:"tabbed-listing"},i.a.createElement(b.a,{className:"tabs-dark",centered:!0,activeKey:r,onChange:function(t){c(t),e.onTabChange&&e.onTabChange(t)}},e&&e.tabList&&e.tabList.map((function(t){var a;return i.a.createElement(ee,{tab:t.name,key:t.key},i.a.createElement(O.a,{loadingKey:e.loadingKey},i.a.createElement("div",{className:"listing-header flex"},null===(a=e.topColumns[r])||void 0===a?void 0:a.map((function(e){return i.a.createElement("div",null,e.name)})),i.a.createElement("div",null,"s")),i.a.createElement("div",{className:"listing"},e&&e.leftColumns&&e.leftColumns.map((function(t){var a;return i.a.createElement("div",{className:"flex item"},i.a.createElement("div",null,t.name),null===(a=e.topColumns[r])||void 0===a?void 0:a.slice(1).map((function(a){var n,l,r,c,o,u,s,d;return e.toFrom?i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"flex-row-reverse"},i.a.createElement("div",null,i.a.createElement(ae,null)),i.a.createElement("div",{className:"flex-row-reverse mr-10 mt-2",style:{display:"flex",flexDirection:"column"}},i.a.createElement(ne,null),i.a.createElement(ae,null))),i.a.createElement("div",{className:"flex-row-reverse"},i.a.createElement("p",null,"\u20b9"," ",null===e||void 0===e||null===(n=e.data)||void 0===n||null===(l=n[t.key])||void 0===l||null===(r=l[a.key])||void 0===r?void 0:r.oneWayPrice),i.a.createElement("p",null,"\u20b9"," ",null===(c=e.data)||void 0===c||null===(o=c[t.key])||void 0===o||null===(u=o[a.key])||void 0===u?void 0:u.excursionPrice))):i.a.createElement("div",null,"\u20b9 ",null===e||void 0===e||null===(s=e.data)||void 0===s||null===(d=s[t.key])||void 0===d?void 0:d[a.key])})),i.a.createElement("div",null,!e.readOnly&&i.a.createElement(C.a,{onClick:function(){return e.onClick(t.key)}},i.a.createElement(te,null))))})))))}))))},le=(a(3908),a(3909)),re=a.n(le),ce=(a(3910),function(e){return i.a.createElement("div",{className:"transport-contract-empty flex-row-reverse items-center justify-center",style:{marginTop:"40px"}},i.a.createElement("img",{src:re.a}),i.a.createElement("h4",null,e.title),i.a.createElement("p",null,e.subTitle),i.a.createElement(C.a,{onClick:e.onClick},e.buttonText))}),oe=function(e){var t,a,r=Object(n.useState)({}),o=Object(l.a)(r,2),s=o[0],d=o[1],m=Object(n.useState)([]),v=Object(l.a)(m,2),y=v[0],h=v[1],b=Object(n.useState)({}),g=Object(l.a)(b,2),E=g[0],P=g[1],C=Object(n.useState)([]),D=Object(l.a)(C,2),T=D[0],j=D[1],k=Object(n.useState)(null),S=Object(l.a)(k,2),x=S[0],A=S[1],w=Object(n.useState)(null),B=Object(l.a)(w,2),N=B[0],F=B[1],L=Object(n.useState)([]),V=Object(l.a)(L,2),M=V[0],z=V[1],H=Object(n.useState)(null),R=Object(l.a)(H,2),K=R[0],q=R[1],W=Object(c.i)().id,Y=Object(u.q)().get("stage");Object(n.useEffect)((function(){e.categories&&e.categories.length}),[e.categories]),Object(n.useEffect)((function(){var t;e.checkPrices()||(j(null===e||void 0===e||null===(t=e.categories)||void 0===t?void 0:t.map((function(e){return Object(I.a)(Object(I.a)({},e),{},{name:e.name,key:e.id})}))),d(e.topColumnObjectToPush()),h(e.leftColumnObjectToPush()),P(e.getTabData()))}),[e.prices,e.categories]);var J=function(){var t=Object(p.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),n=e.getPayload(a),t.next=4,e.createPrice(W,e.contractToEdit,n);case 4:return t.next=6,e.getPrices(W,e.contractToEdit,"",Y,e.loadingKey,!0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=Object(p.a)(f.a.mark((function t(a){var n,i,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a),n=!1,-1==N.indexOf("new")){t.next=8;break}return i=e.getSingleCreatePayload(a,N),t.next=6,e.createPrice(W,e.contractToEdit,i);case 6:t.next=13;break;case 8:return l=e.getUpdatePayload(a),n=l.forEach((function(e){(e.price||e.oneWayPrice||e.excursion)&&(n=!0)})),t.next=13,e.updatePrice(W,e.contractToEdit,N,K,l);case 13:return F(null),t.next=16,e.getPrices(W,e.contractToEdit,K,Y,"tabbedLisitngTransportProduct",n);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=Object(p.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.getPrices(W,e.contractToEdit,a,Y,"tabbedLisitngTransportProduct",!0);case 3:q(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=[];return Array.isArray(e.prices.length)&&e.prices.length>0?$=e.renderEditTableLeftColumns?e.renderEditTableLeftColumns():e.prices[0].vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)})):e.checkPrices()||($=e.renderEditTableLeftColumns?e.renderEditTableLeftColumns():e.prices[0].vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)}))),"inter-city"==e.type&&($=M),i.a.createElement("div",{className:"intra-city"},e.shouldDisplayEdit()?i.a.createElement(i.a.Fragment,null,G.Object.keys(E).length>0?i.a.createElement(ie,{currentTab:K,readOnly:e.readOnly,topColumns:s,leftColumns:y,tabList:T,data:E,onTabChange:Q,onClick:function(t){console.log(t);var a=e.getEditRow(t);F(a.id),z(e.getPopupLeftColumns(a,t)),A(e.getEditValues(a)),console.log(t)},toFrom:e.toFrom,loadingKey:"tabbedLisitngTransportProduct"}):null,N?i.a.createElement(Z,{readOnly:e.readOnly,title:"Edit "+e.title,subTitle:"Extra charge per km & hr",isPopupEdit:!0,leftColumnTitle:"Zones",topColumns:e.vehiclesAddEditTopColumns?e.vehiclesAddEditTopColumns:M,showModalOnly:!0,dontShowButton:!0,leftColumns:$,tabItems:e.renderEditTabItems?e.renderEditTabItems():U(e.prices[0].vehiclePrices.map((function(e){return e.vehicleType.transportVehicleCategory})),!0),popupVisibility:N,onPopupClose:function(){F(null)},values:x,onSave:X,filter:e.filter?e.filter:"rows",higherLevelTabs:e.higherLevelTabs?e.higherLevelTabs:null,higherLevelTabsSpan:e.higherLevelTabsSpan?e.higherLevelTabsSpan:null,noValidation:!0}):null):null,e.vehicles&&e.vehicles.length>0&&e.zones&&e.zones.length>0&&!e.shouldDisplayEdit()?i.a.createElement(O.a,{loadingKey:"tabbedLisitngTransportProduct"},i.a.createElement(i.a.Fragment,null,i.a.createElement(ce,{title:"No Prices Added",subTitle:"You have not added any prices yet. Start by adding prices."}),i.a.createElement(Z,{readOnly:e.readOnly,title:e.title,subTitle:"Extra charge per km & hr",isPopupEdit:!0,leftColumnTitle:"Zones",topColumns:e.vehiclesAddNewTopColumns?e.vehiclesAddNewTopColumns:null===(t=e.vehicles)||void 0===t?void 0:t.map((function(e){return Object(I.a)({},e.vehicleType)})),showModalOnly:!0,leftColumns:e.renderLeftColumns(),tabItems:U(null===(a=e.vehicles)||void 0===a?void 0:a.map((function(e){return e.vehicleType.transportVehicleCategory})),!0),values:null,onSave:J,filter:e.filter?e.filter:"columns",buttonText:"Add Prices",higherLevelTabs:e.higherLevelTabsNew?e.higherLevelTabsNew:null,higherLevelTabsSpan:e.higherLevelTabsSpan?e.higherLevelTabsSpan:null}))):null)},ue=oe,se=Object(r.b)((function(e){var t,a,n,i,l,r=e.Products.TransportProduct;return{vehicles:null===r||void 0===r||null===(t=r.contracts)||void 0===t?void 0:t.vehicleList,halfDayFullDayPrice:null===r||void 0===r||null===(a=r.contracts)||void 0===a||null===(n=a.halfDayFullDayPrice)||void 0===n?void 0:n.data,categories:null===r||void 0===r||null===(i=r.contracts)||void 0===i?void 0:i.categories,shouldDisplayEdit:r.contracts.halfDayHasPrice,halfDayHasPrice:null===r||void 0===r||null===(l=r.contracts)||void 0===l?void 0:l.halfDayHasPrice}}),(function(e){return{getHalfDayFullDayPrice:Object(o.b)(s.o,e),getVehicleList:Object(o.b)(s.u,e),getCategories:Object(o.b)(s.m,e),createHalfDayFullDayPrice:Object(o.b)(s.g,e),updateHalfDayFullDayPrice:Object(o.b)(s.y,e)}}))((function(e){Object(c.i)().id;var t,a=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(t){var a=[],n=e.halfDayFullDayPrice.halfDayPrice.vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)}));return console.log(e.halfDayFullDayPrice),n.forEach((function(e,n){a.push({vehicleType:e.id,price:t[n][0],name:e.name})})),a};return i.a.createElement("div",{className:"half-day"},i.a.createElement(O.a,{loadingKey:"getHalfDayPrice"},!(null===(t=e.vehicles)||void 0===t?void 0:t.length)&&i.a.createElement(ce,{title:"No Vehicles available"}),i.a.createElement(ue,{title:"Half/Full Day Prices",getSingleCreatePayload:function(e,t){var a=n(e);if(-1!=t.indexOf("new")){var i=t.split("-").slice(1).join("-");return[Object(v.a)({halfDayPrices:[],fullDayPrices:[]},i,Object(V.a)(a))]}return a},loadingKey:"getHalfDayPrice",readOnly:e.readOnly,getTabData:function(){var t={};return e.halfDayFullDayPrice.fullDayPrice.vehiclePrices.forEach((function(e){t.fullDayPrice||(t.fullDayPrice={}),t.fullDayPrice[e.vehicleType.id]=e.price})),e.halfDayFullDayPrice.halfDayPrice.vehiclePrices.forEach((function(e){t.halfDayPrice||(t.halfDayPrice={}),t.halfDayPrice[e.vehicleType.id]=e.price})),t},getData:a,checkPrices:function(){return!(e.halfDayFullDayPrice&&G.Object.keys(e.halfDayFullDayPrice).length>0&&e.halfDayFullDayPrice.halfDayPrice&&e.halfDayFullDayPrice.fullDayPrice)},prices:e.halfDayFullDayPrice,categories:e.categories,vehicles:e.vehicles,zones:[1,2],renderLeftColumns:function(){return[{name:"Half Day Price",key:"halfDayPrice"},{name:"Full Day Price",key:"fullDayPrice"}]},getPayload:function(t){var a={};return e.categories.forEach((function(e){a[e.id]={fullDayPrices:[],halfDayPrices:[]}})),e.vehicles.forEach((function(e,n){a[e.vehicleType.transportVehicleCategory.id].halfDayPrices.push({vehicleType:e.vehicleType.id,price:t[0][n]}),a[e.vehicleType.transportVehicleCategory.id].fullDayPrices.push({vehicleType:e.vehicleType.id,price:t[1][n]})})),G.Object.keys(a).reduce((function(e,t){return[].concat(Object(V.a)(e),[a[t]])}),[])},createPrice:e.createHalfDayFullDayPrice,updatePrice:e.updateHalfDayFullDayPrice,getPrices:e.getHalfDayFullDayPrice,contractToEdit:e.contractToEdit,topColumnObjectToPush:function(){var t,a,n,i={},l=null===(t=e.halfDayFullDayPrice)||void 0===t||null===(a=t.halfDayPrice)||void 0===a||null===(n=a.vehiclePrices)||void 0===n?void 0:n.map((function(e){return e.vehicleType}));return l||(l=[]),l.forEach((function(e){i[e.transportVehicleCategory.id]||(i[e.transportVehicleCategory.id]=[{name:"Type",key:"type"}]),i[e.transportVehicleCategory.id].push(Object(I.a)({name:e.name,key:e.id},e))})),i},leftColumnObjectToPush:function(t){return[{name:"Half Day Price",key:"halfDayPrice",rowId:e.halfDayFullDayPrice.halfDayPrice.id},{name:"Full Day Price",key:"fullDayPrice",rowId:e.halfDayFullDayPrice.fullDayPrice.id}]},getEditRow:function(t){return e.halfDayFullDayPrice[t]},getEditValues:function(e){return e.vehiclePrices.map((function(e){return[e.price]}))},getPopupLeftColumns:function(e,t){return[{name:"halfDayPrice"==t?"Half Day Price":"Full Day Price",key:e.id}]},getUpdatePayload:n,renderEditTableLeftColumns:function(){return e.halfDayFullDayPrice.halfDayPrice.vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)}))},renderEditTabItems:function(){return U(e.halfDayFullDayPrice.halfDayPrice.vehiclePrices.map((function(e){return e.vehicleType.transportVehicleCategory})),!0)},shouldDisplayEdit:function(){return e.shouldDisplayEdit}}),i.a.createElement("div",{className:"mt-20",style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.halfDayHasPrice&&i.a.createElement(C.a,{onClick:e.onNext,className:"ant-btn-primary"},!e.readOnly&&"Save & "," Continue"))))})),de=(a(3911),Object(r.b)((function(e){var t,a,n,i,l,r,c=e.Products.TransportProduct;return{shouldDisplayEdit:c.contracts.interCityHasPrice,vehicles:null===c||void 0===c||null===(t=c.contracts)||void 0===t?void 0:t.vehicleList,sameDayRoutes:null===c||void 0===c||null===(a=c.contracts)||void 0===a?void 0:a.sameDayRoutes,interCitySameDayPrice:null===c||void 0===c||null===(n=c.contracts)||void 0===n||null===(i=n.interCitySameDayPrice)||void 0===i?void 0:i.data,categories:null===c||void 0===c||null===(l=c.contracts)||void 0===l?void 0:l.categories,interCityHasPrice:null===c||void 0===c||null===(r=c.contracts)||void 0===r?void 0:r.interCityHasPrice}}),(function(e){return{getInterCitySameDayPrice:Object(o.b)(s.q,e),getVehicleList:Object(o.b)(s.u,e),getSameDayRoutes:Object(o.b)(s.t,e),getCategories:Object(o.b)(s.m,e),createInterCitySameDayPrice:Object(o.b)(s.i,e),updateInterCitySameDayPrice:Object(o.b)(s.A,e)}}))((function(e){Object(c.i)().id;var t,a,n,l,r=function(){return e.sameDayRoutes.map((function(e){return{name:e.cities.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===e||void 0===e||null===(a=e.city)||void 0===a?void 0:a.name," ").concat(e.numberOfNights,"N")})),key:e.id}}))},o=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(t){var a=[];return e.interCitySameDayPrice[0].vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)})).forEach((function(e,n){a.push({vehicleType:e.id,oneWayPrice:t[0][2*n],excursionPrice:t[0][2*n+1],name:e.name})})),a},s=[];e.vehicles&&e.vehicles.forEach((function(e){s.push({id:e.vehicleType.id,name:"One Way",transportVehicleCategory:Object(I.a)({},e.vehicleType.transportVehicleCategory)}),s.push({id:e.vehicleType.id,name:"Excursion",transportVehicleCategory:Object(I.a)({},e.vehicleType.transportVehicleCategory)})}));var d=null===(t=e.vehicles)||void 0===t?void 0:t.map((function(e){return e.vehicleType})),m=[],y=[];e.interCitySameDayPrice&&e.interCitySameDayPrice.length>0&&(e.interCitySameDayPrice[0].vehiclePrices.forEach((function(e){m.push({id:e.vehicleType.id,name:"One Way",transportVehicleCategory:Object(I.a)({},e.vehicleType.transportVehicleCategory)}),m.push({id:e.vehicleType.id,name:"Excursion",transportVehicleCategory:Object(I.a)({},e.vehicleType.transportVehicleCategory)})})),y=e.interCitySameDayPrice[0].vehiclePrices.map((function(e){return e.vehicleType})));var h=[];return(null===(a=e.sameDayRoutes)||void 0===a?void 0:a.length)||h.push("Same Day Routes"),(null===(n=e.vehicles)||void 0===n?void 0:n.length)||h.push("Vehicles"),i.a.createElement("div",{className:"inter-city"},i.a.createElement(O.a,{loadingKey:"getInterCitySameDayPrice"},h.length>0&&i.a.createElement(ce,{title:"No ".concat(h.join(", ")," available")}),i.a.createElement(ue,(l={title:"Inter City Same Day Prices",getSingleCreatePayload:function(e,t){var a=u(e);return-1!=t.indexOf("new")?[{route:t.split("-").slice(1).join("-"),vehiclePrices:Object(V.a)(a)}]:a},loadingKey:"getInterCitySameDayPrice",readOnly:e.readOnly,getTabData:function(){var t={};return e.interCitySameDayPrice.forEach((function(e){t[e.id]||(t[e.id]={}),e.vehiclePrices.forEach((function(a){t[e.id][a.vehicleType.id]={oneWayPrice:a.oneWayPrice,excursionPrice:a.excursionPrice}}))})),t},getData:o,checkPrices:function(){return!e.interCitySameDayPrice||0==e.interCitySameDayPrice.length||!e.categories||0==e.categories.length},prices:e.interCitySameDayPrice,categories:e.categories,vehicles:e.vehicles,zones:e.sameDayRoutes,renderLeftColumns:r,getPayload:function(t){var a={};return e.categories.forEach((function(e){a[e.id]=[]})),r().forEach((function(n,i){e.categories.forEach((function(e){a[e.id][i]={route:n.key,vehiclePrices:[]}})),e.vehicles.forEach((function(e,n){a[e.vehicleType.transportVehicleCategory.id][i].vehiclePrices.push({vehicleType:e.vehicleType.id,name:e.vehicleType.name,oneWayPrice:t[i][2*n],excursionPrice:t[i][2*n+1]})}))})),Object.keys(a).reduce((function(e,t){return[].concat(Object(V.a)(e),Object(V.a)(a[t]))}),[])},createPrice:e.createInterCitySameDayPrice,updatePrice:e.updateInterCitySameDayPrice,getPrices:e.getInterCitySameDayPrice,contractToEdit:e.contractToEdit,topColumnObjectToPush:function(t){var a={};return e.interCitySameDayPrice[0].vehiclePrices.map((function(e){return e.vehicleType})).forEach((function(e){a[e.transportVehicleCategory.id]||(a[e.transportVehicleCategory.id]=[{name:"Zones",key:"zones"}]),a[e.transportVehicleCategory.id].push(Object(I.a)({name:e.name,key:e.id},e))})),a},leftColumnObjectToPush:function(t){return e.interCitySameDayPrice.map((function(e){return{name:e.route.routeCities.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===e||void 0===e||null===(a=e.city)||void 0===a?void 0:a.name)})),key:e.id}}))},getEditRow:function(t){return e.interCitySameDayPrice.find((function(e){return e.id==t}))},getEditValues:function(e){var t=[[]];return e.vehiclePrices.forEach((function(e){t[0].push(e.oneWayPrice),t[0].push(e.excursionPrice)})),t},getPopupLeftColumns:function(e){return[{name:e.route.routeCities.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===e||void 0===e||null===(a=e.city)||void 0===a?void 0:a.name)})),key:e.id}]},getUpdatePayload:u,higherLevelTabsSpan:2,shouldDisplayEdit:function(){return e.shouldDisplayEdit},filter:"columns",higherLevelTabsNew:d,higherLevelTabs:y,vehiclesAddNewTopColumns:s},Object(v.a)(l,"higherLevelTabsNew",d),Object(v.a)(l,"vehiclesAddEditTopColumns",m),Object(v.a)(l,"higherLevelTabs",y),Object(v.a)(l,"toFrom",!0),Object(v.a)(l,"type","inter-city"),l)),i.a.createElement("div",{className:"mt-20",style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.interCityHasPrice&&i.a.createElement(C.a,{onClick:e.onNext,className:"ant-btn-primary"},!e.readOnly&&"Save & "," Continue"))))}))),me=(a(3912),a(1008),[{name:"ARRIVAL",value:"arrival"},{name:"DEPARTURE",value:"departure"},{name:"HALF DAY",value:"half-day"},{name:"FULL DAY",value:"full-day"}]),ve=Object(r.b)((function(e){var t,a,n,i,l,r,c=e.Products.TransportProduct;return{shouldDisplayEdit:c.contracts.interCityMultiHasPrice,vehicles:null===c||void 0===c||null===(t=c.contracts)||void 0===t?void 0:t.vehicleList,multiDayRoutes:null===c||void 0===c||null===(a=c.contracts)||void 0===a?void 0:a.multiDayRoutes,interCityMultiDayPrice:null===c||void 0===c||null===(n=c.contracts)||void 0===n||null===(i=n.interCityMultiDayPrice)||void 0===i?void 0:i.data,categories:null===c||void 0===c||null===(l=c.contracts)||void 0===l?void 0:l.categories,interCityMultiHasPrice:null===c||void 0===c||null===(r=c.contracts)||void 0===r?void 0:r.interCityMultiHasPrice}}),(function(e){return{getInterCityMultiDayPrice:Object(o.b)(s.p,e),getVehicleList:Object(o.b)(s.u,e),getMultiDayRoutes:Object(o.b)(s.s,e),getCategories:Object(o.b)(s.m,e),createInterCityMultiDayPrice:Object(o.b)(s.h,e),updateInterCityMultiDayPrice:Object(o.b)(s.z,e)}}))((function(e){var t,a,r=Object(n.useState)(null),o=Object(l.a)(r,2);o[0],o[1],Object(c.i)().id,Object(u.q)().get("stage");Object(n.useEffect)((function(){(function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){}),[e.categories]);var s=function(){return e.multiDayRoutes.map((function(e){return{name:i.a.createElement("div",null,e.cities.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===e||void 0===e||null===(a=e.city)||void 0===a?void 0:a.name,"  ").concat(e.numberOfNights,"N")})),i.a.createElement("p",{style:{fontSize:"10px",color:"black",marginTop:"5px"}},e.extraServices.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===(a=me.find((function(t){return t.value==e})))||void 0===a?void 0:a.name)})))),key:e.id}}))},d=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(t){var a=[];return e.interCityMultiDayPrice[0].vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)})).forEach((function(e,n){a.push({vehicleType:e.id,price:t[n][0],name:e.name})})),a},v=[];return(null===(t=e.multiDayRoutes)||void 0===t?void 0:t.length)||v.push("Multi Day Routes"),(null===(a=e.vehicles)||void 0===a?void 0:a.length)||v.push("Vehicles"),i.a.createElement("div",{className:"inter-city-multi"},i.a.createElement(O.a,{loadingKey:"interCityMulti"},v.length>0&&i.a.createElement(ce,{title:"No ".concat(v.join(", ")," available")}),i.a.createElement(oe,{title:"Inter City Multi Day Prices",loadingKey:"interCityMulti",readOnly:e.readOnly,getTabData:function(){var t={};return e.interCityMultiDayPrice.forEach((function(e){t[e.id]||(t[e.id]={}),e.vehiclePrices.forEach((function(a){t[e.id][a.vehicleType.id]=a.price}))})),t},getData:d,checkPrices:function(){return!e.interCityMultiDayPrice||0==e.interCityMultiDayPrice.length||!e.categories||0==e.categories.length},prices:e.interCityMultiDayPrice,categories:e.categories,vehicles:e.vehicles,zones:e.multiDayRoutes,renderLeftColumns:s,getPayload:function(t){var a={};return e.categories.forEach((function(e){a[e.id]=[]})),s().forEach((function(n,i){e.categories.forEach((function(e){a[e.id][i]={route:n.key,vehiclePrices:[]}})),e.vehicles.forEach((function(e,n){a[e.vehicleType.transportVehicleCategory.id][i].vehiclePrices.push({vehicleType:e.vehicleType.id,name:e.vehicleType.name,price:t[i][n]})}))})),G.Object.keys(a).reduce((function(e,t){return[].concat(Object(V.a)(e),Object(V.a)(a[t]))}),[])},createPrice:e.createInterCityMultiDayPrice,updatePrice:e.updateInterCityMultiDayPrice,getPrices:e.getInterCityMultiDayPrice,contractToEdit:e.contractToEdit,topColumnObjectToPush:function(t){var a={};return e.interCityMultiDayPrice[0].vehiclePrices.map((function(e){return e.vehicleType})).forEach((function(e){a[e.transportVehicleCategory.id]||(a[e.transportVehicleCategory.id]=[{name:"Zones",key:"zones"}]),a[e.transportVehicleCategory.id].push(Object(I.a)({name:e.name,key:e.id},e))})),a},leftColumnObjectToPush:function(t){return e.interCityMultiDayPrice.map((function(e){return{name:i.a.createElement("div",null,e.route.routeCities.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===e||void 0===e||null===(a=e.city)||void 0===a?void 0:a.name,"  ").concat(e.numberOfNights,"N")})),i.a.createElement("p",{style:{fontSize:"10px",color:"black",marginTop:"5px"}},e.route.extraServices.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===(a=me.find((function(t){return t.value==e})))||void 0===a?void 0:a.name)})))),key:e.id}}))},getEditRow:function(t){return e.interCityMultiDayPrice.find((function(e){return e.id==t}))},getEditValues:function(e){return e.vehiclePrices.map((function(e){return[e.price]}))},getPopupLeftColumns:function(e){return[{name:i.a.createElement("div",null,e.route.routeCities.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===e||void 0===e||null===(a=e.city)||void 0===a?void 0:a.name," ").concat(e.numberOfNights,"N")})),i.a.createElement("p",{style:{fontSize:"10px",color:"black",marginTop:"5px"}},e.route.extraServices.map((function(e,t){var a;return"".concat(t>0?" | ":"").concat(null===(a=me.find((function(t){return t.value==e})))||void 0===a?void 0:a.name)})))),key:e.id}]},getUpdatePayload:m,shouldDisplayEdit:function(){return e.shouldDisplayEdit},getSingleCreatePayload:function(e,t){var a=m(e);return-1!=t.indexOf("new")?[{route:t.split("-").slice(1).join("-"),vehiclePrices:Object(V.a)(a)}]:a}}),i.a.createElement("div",{className:"mt-20",style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.interCityMultiDayPrice&&e.interCityMultiDayPrice>0&&i.a.createElement(C.a,{onClick:e.onNext,className:"ant-btn-primary"},!e.readOnly&&"Save & "," Continue"))))})),ye=(a(3913),a(3914),Object(r.b)((function(e){var t,a,n,i,l,r,c,o=e.Products.TransportProduct;return{vehicles:null===o||void 0===o||null===(t=o.contracts)||void 0===t?void 0:t.vehicleList,zones:null===o||void 0===o||null===(a=o.contracts)||void 0===a?void 0:a.zones,intraCityPrice:null===o||void 0===o||null===(n=o.contracts)||void 0===n||null===(i=n.intraCityPrice)||void 0===i?void 0:i.data,categories:null===o||void 0===o||null===(l=o.contracts)||void 0===l?void 0:l.categories,shouldDisplayEdit:null===o||void 0===o||null===(r=o.contracts)||void 0===r?void 0:r.intraCityHasPrice,intraCityHasPrice:null===o||void 0===o||null===(c=o.contracts)||void 0===c?void 0:c.intraCityHasPrice}}),(function(e){var t;return t={getIntraCityPrice:Object(o.b)(s.r,e),getVehicleList:Object(o.b)(s.u,e),getZones:Object(o.b)(s.v,e),getCategories:Object(o.b)(s.m,e)},Object(v.a)(t,"getCategories",Object(o.b)(s.m,e)),Object(v.a)(t,"createIntraCityPrice",Object(o.b)(s.j,e)),Object(v.a)(t,"updateIntraCityPrice",Object(o.b)(s.B,e)),t}))((function(e){Object(c.i)().id,Object(u.q)().get("stage");var t,a,n=function(){return e.zones.map((function(e){return{name:i.a.createElement("div",{className:"flex"},i.a.createElement("div",null,e.zoneFrom.name),i.a.createElement("div",{className:"flex-row-reverse mr-10 mt-2 ml-8 pt-2",style:{display:"flex",flexDirection:"column"}},i.a.createElement(pe,null),i.a.createElement(fe,null)),i.a.createElement("div",null,e.zoneTo.name)),key:e.id,zoneFromId:e.zoneFrom.id,zoneToId:e.zoneTo.id}}))},l=[];return(null===(t=e.zones)||void 0===t?void 0:t.length)||l.push("Zones"),(null===(a=e.vehicles)||void 0===a?void 0:a.length)||l.push("Vehicles"),i.a.createElement("div",{className:"intra-city"},i.a.createElement(O.a,{loadingKey:"getIntraCityPrice"},l.length>0&&i.a.createElement(ce,{title:"No ".concat(l.join(", ")," available")}),i.a.createElement(ue,{title:"Intra City Prices",getSingleCreatePayload:function(t,a){var n=[];e.intraCityPrice[0].vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)})).forEach((function(e,a){n.push({vehicleType:e.id,price:t[a][0],name:e.name})}));var i=a.split("-")[1];return[{zoneFrom:e.zones[i].zoneFrom.id,zoneTo:e.zones[i].zoneTo.id,vehiclePrices:n}]},loadingKey:"getIntraCityPrice",readOnly:e.readOnly,getTabData:function(){var t={};return e.intraCityPrice.forEach((function(e){t[e.id]||(t[e.id]={}),e.vehiclePrices.forEach((function(a){t[e.id][a.vehicleType.id]=a.price}))})),t},checkPrices:function(){return!e.intraCityPrice||0==e.intraCityPrice.length||!e.categories||0==e.categories.length},prices:e.intraCityPrice,categories:e.categories,vehicles:e.vehicles,zones:e.zones,renderLeftColumns:n,getPayload:function(t){var a={};return n().forEach((function(n,i){e.categories.forEach((function(e){a[e.id]||(a[e.id]=[]),a[e.id][i]={zoneFrom:n.zoneFromId,zoneTo:n.zoneToId,vehiclePrices:[]}})),e.vehicles.forEach((function(e,n){a[e.vehicleType.transportVehicleCategory.id][i].vehiclePrices.push({vehicleType:e.vehicleType.id,name:e.vehicleType.name,price:t[i][n]})}))})),G.Object.keys(a).reduce((function(e,t){return e=[].concat(Object(V.a)(e),Object(V.a)(a[t]))}),[])},createPrice:e.createIntraCityPrice,updatePrice:e.updateIntraCityPrice,getPrices:e.getIntraCityPrice,contractToEdit:e.contractToEdit,topColumnObjectToPush:function(t){var a={};return e.intraCityPrice[0].vehiclePrices.map((function(e){return e.vehicleType})).forEach((function(e){a[e.transportVehicleCategory.id]||(a[e.transportVehicleCategory.id]=[{name:"Zones",key:"zones"}]),a[e.transportVehicleCategory.id].push(Object(I.a)({name:e.name,key:e.id},e))})),a},leftColumnObjectToPush:function(){return e.intraCityPrice.map((function(e){return{name:i.a.createElement("div",{className:"flex"},i.a.createElement("div",null,e.zoneFrom.name),i.a.createElement("div",{className:"flex-row-reverse mr-10 mt-2 ml-8 pt-2",style:{display:"flex",flexDirection:"column"}},i.a.createElement(pe,null),i.a.createElement(fe,null)),i.a.createElement("div",null,e.zoneTo.name)),key:e.id}}))},getEditRow:function(t){return e.intraCityPrice.find((function(e){return e.id==t}))},getEditValues:function(e){return e.vehiclePrices.map((function(e){return[e.price]}))},getPopupLeftColumns:function(e){return[{name:i.a.createElement("div",{className:"flex"},i.a.createElement("div",null,e.zoneFrom.name),i.a.createElement("div",{className:"flex-row-reverse mr-10 mt-2 ml-8 pt-2",style:{display:"flex",flexDirection:"column"}},i.a.createElement(pe,null),i.a.createElement(fe,null)),i.a.createElement("div",null,e.zoneTo.name)),key:e.id,zoneFromId:e.zoneFrom.id,zoneToId:e.zoneTo.id}]},getUpdatePayload:function(t){var a=[];return e.intraCityPrice[0].vehiclePrices.map((function(e){return Object(I.a)({},e.vehicleType)})).forEach((function(e,n){a.push({vehicleType:e.id,price:t[n][0],name:e.name})})),a},shouldDisplayEdit:function(){return e.shouldDisplayEdit}}),i.a.createElement("div",{className:"mt-20",style:{display:"flex",justifyContent:"center",alignItems:"center"}},e.intraCityHasPrice&&i.a.createElement(C.a,{onClick:e.onNext,className:"ant-btn-primary"},!e.readOnly&&"Save & "," Continue"))))}))),fe=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"5",viewBox:"0 0 8 5"},i.a.createElement("g",{fill:"none","fill-rule":"evenodd"},i.a.createElement("g",{fill:"#000","fill-rule":"nonzero"},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"M9.556 4.829L11.927 2.459 9.556 0.088 8.722 0.922 9.673 1.873 4.815 1.873 4.815 3.044 9.673 3.044 8.722 3.995z",transform:"translate(-513 -363) translate(167 321) translate(342 42)"}))))))},pe=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"6",viewBox:"0 0 8 6"},i.a.createElement("g",{fill:"none","fill-rule":"evenodd"},i.a.createElement("g",{fill:"#000","fill-rule":"nonzero"},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"M7.185 6.6L2.327 6.6 3.278 5.663 2.444 4.829 0.073 7.2 2.444 9.571 3.278 8.737 2.327 7.8 7.185 7.8z",transform:"translate(-509 -367) translate(167 321) translate(342 42)"}))))))},he=ye,be=b.a.TabPane,ge=Object(r.b)((function(e){var t,a,n,i,l,r,c,o,u,s,d,m,v,y,f,p,h,b,g,P,C,O=e.Products.TransportProduct;return{basicDetails:null===O||void 0===O||null===(t=O.contracts)||void 0===t||null===(a=t.basicDetails)||void 0===a?void 0:a.data,transportInfo:null===e||void 0===e||null===(n=e.Products)||void 0===n||null===(i=n.TransportProduct)||void 0===i?void 0:i.transportInfo,isBasicSaved:Object(E.a)(null===e||void 0===e||null===(l=e.Products)||void 0===l||null===(r=l.TransportProduct)||void 0===r||null===(c=r.contracts)||void 0===c?void 0:c.basicDetails),isIntraCityPriceSaved:null===e||void 0===e||null===(o=e.Products)||void 0===o||null===(u=o.TransportProduct)||void 0===u||null===(s=u.contracts)||void 0===s?void 0:s.intraCityHasPrice,isHalfDayPriceSaved:null===e||void 0===e||null===(d=e.Products)||void 0===d||null===(m=d.TransportProduct)||void 0===m||null===(v=m.contracts)||void 0===v?void 0:v.halfDayHasPrice,isInterCitySameDayPriceSaved:null===e||void 0===e||null===(y=e.Products)||void 0===y||null===(f=y.TransportProduct)||void 0===f||null===(p=f.contracts)||void 0===p?void 0:p.interCityHasPrice,isInterCityMultiDayPriceSaved:null===e||void 0===e||null===(h=e.Products)||void 0===h||null===(b=h.TransportProduct)||void 0===b||null===(g=b.contracts)||void 0===g?void 0:g.interCityMultiHasPrice,isContractSaved:Object(E.b)(null===e||void 0===e||null===(P=e.Products)||void 0===P||null===(C=P.TransportProduct)||void 0===C?void 0:C.contracts)}}),(function(e){var t;return t={getVehicleList:Object(o.b)(s.u,e),getZones:Object(o.b)(s.v,e),getCategories:Object(o.b)(s.m,e)},Object(v.a)(t,"getCategories",Object(o.b)(s.m,e)),Object(v.a)(t,"getMultiDayRoutes",Object(o.b)(s.s,e)),Object(v.a)(t,"getSameDayRoutes",Object(o.b)(s.t,e)),Object(v.a)(t,"getIntraCityPrice",Object(o.b)(s.r,e)),Object(v.a)(t,"getHalfDayFullDayPrice",Object(o.b)(s.o,e)),Object(v.a)(t,"getInterCitySameDayPrice",Object(o.b)(s.q,e)),Object(v.a)(t,"getInterCityMultiDayPrice",Object(o.b)(s.p,e)),Object(v.a)(t,"getBasicDetails",Object(o.b)(s.l,e)),Object(v.a)(t,"clearContractDetails",Object(o.b)(s.d,e)),t}))((function(e){var t,a=Object(c.i)().id,r=Object(u.q)().get("contractId"),o=Object(n.useState)("basic-details"),s=Object(l.a)(o,2),d=s[0],m=s[1],v=Object(u.m)(null===(t=e.transportInfo)||void 0===t?void 0:t.status),y=Object(u.q)().get("stage"),h=Object(c.g)(),E=Object(n.useState)(null),P=Object(l.a)(E,2),C=P[0],O=P[1],D=e.isHalfDayPriceSaved||e.isIntraCityPriceSaved||e.isInterCitySameDayPriceSaved||e.isInterCityMultiDayPriceSaved;console.log("SP ",D),Object(n.useEffect)((function(){null!=C&&C!=e.transportInfo.status&&h.push("/resources/transports/".concat(a,"?stage=working&tab=routes")),O(e.transportInfo.status)}),[e.transportInfo.status]);var T=function(){var t=Object(p.a)(f.a.mark((function t(){var n,i,l,c,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clearContractDetails();case 2:if(!r||!e.transportInfo.supplierCode){t.next=16;break}return e.getSameDayRoutes(a,y),e.getMultiDayRoutes(a,y),e.getZones(null===(n=e.transportInfo)||void 0===n||null===(i=n.city)||void 0===i?void 0:i.code),t.next=8,e.getBasicDetails(a,r,y);case 8:return o=t.sent,t.next=11,e.getVehicleList(e.transportInfo.supplierCode,null===(l=e.transportInfo)||void 0===l||null===(c=l.city)||void 0===c?void 0:c.code,o.basicDetails.allIndirectSuppliers?null:o.basicDetails.indirectSuppliers);case 11:t.sent,e.getIntraCityPrice(a,r,"",y),e.getHalfDayFullDayPrice(a,r,"",y),e.getInterCitySameDayPrice(a,r,"",y),e.getInterCityMultiDayPrice(a,r,"",y);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){r?T():e.clearContractDetails()}),[r,e.transportInfo.supplierCode]);return i.a.createElement("div",{className:"add-contract"},i.a.createElement(b.a,{activeKey:d,centered:!0,onChange:function(e){return m(e)}},i.a.createElement(be,{tab:i.a.createElement("div",{className:"flex justify-between items-center"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Basic Details"),i.a.createElement(g.a,{isDataSaved:e.isBasicSaved}))),key:"basic-details"},i.a.createElement(_,{setContractToEdit:e.setContractToEdit,contractToEdit:r,onNext:function(){return m("intra-city")},readOnly:v})),r?i.a.createElement(i.a.Fragment,null,i.a.createElement(be,{tab:i.a.createElement("div",{className:"flex justify-between items-center"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Intra City Travel Prices"),D?e.isIntraCityPriceSaved&&i.a.createElement(g.a,{isDataSaved:e.isIntraCityPriceSaved}):i.a.createElement(g.a,{isDataSaved:e.isIntraCityPriceSaved}))),key:"intra-city"},"intra-city"==d&&i.a.createElement(he,{onNext:function(){return m("half-day")},contractToEdit:r,readOnly:v})),i.a.createElement(be,{tab:i.a.createElement("div",{className:"flex justify-between items-center"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Half/Full Day Prices"),D?e.isHalfDayPriceSaved&&i.a.createElement(g.a,{isDataSaved:e.isHalfDayPriceSaved}):i.a.createElement(g.a,{isDataSaved:e.isHalfDayPriceSaved}))),key:"half-day"},"half-day"==d&&i.a.createElement(se,{readOnly:v,onNext:function(){return m("same-day")},contractToEdit:r})),i.a.createElement(be,{tab:i.a.createElement("div",{className:"flex justify-between items-center"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Inter City Same Day Prices"),D?e.isInterCitySameDayPriceSaved&&i.a.createElement(g.a,{isDataSaved:e.isInterCitySameDayPriceSaved}):i.a.createElement(g.a,{isDataSaved:e.isInterCitySameDayPriceSaved}))),key:"same-day"},"same-day"==d&&i.a.createElement(de,{readOnly:v,onNext:function(){return m("multi-city")},contractToEdit:r})),i.a.createElement(be,{tab:i.a.createElement("div",{className:"flex justify-between items-center"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("div",null,"Inter City Multi Day Prices"),D?e.isInterCityMultiDayPriceSaved&&i.a.createElement(g.a,{isDataSaved:e.isInterCityMultiDayPriceSaved}):i.a.createElement(g.a,{isDataSaved:e.isInterCityMultiDayPriceSaved}))),key:"multi-city"},"multi-city"==d&&i.a.createElement(ve,{readOnly:v,contractToEdit:r}))):null))})),Ee=(a(3915),Object(r.b)((function(e){var t,a,n,i=e.Products.TransportProduct;return{contractList:null===i||void 0===i||null===(t=i.contracts)||void 0===t||null===(a=t.contractList)||void 0===a?void 0:a.data,transportInfo:i.transportInfo,supplierBusinessCode:(null===(n=i.transportInfo)||void 0===n?void 0:n.supplierCode)||""}}),(function(e){return{createContract:Object(o.b)(s.f,e),getContractList:Object(o.b)(s.n,e),deleteContract:Object(o.b)(s.k,e),clearBasicDetails:Object(o.b)(s.c,e),getTransportInfo:Object(o.b)(d.g,e),cloneContract:Object(o.b)(s.e,e)}}))((function(e){var t,a,r=e.loader,o=Object(u.q)(),s=(o.get("tab"),o.get("stage"),o.get("contractId")),d=Object(c.g)(),v=Object(c.i)().id,y=Object(n.useState)(null),f=Object(l.a)(y,2),p=f[0],h=f[1],b=-1!=(null===(t=e.transportInfo)||void 0===t||null===(a=t.supplierCode)||void 0===a?void 0:a.indexOf("BO"));return Object(n.useEffect)((function(){null!=p&&p!=e.transportInfo.status&&d.push("/resources/transports/".concat(v,"?stage=working&tab=routes")),h(e.transportInfo.status)}),[e.transportInfo.status]),i.a.createElement("div",{className:"services-tariffs"},i.a.createElement(m.a,{contractId:s,showSupplierType:b,supplierBusinessCode:e.supplierBusinessCode,supplierType:"transport",dataSource:e.contractList,businessCode:v,showRateCode:!1,isFetching:!!(null===r||void 0===r?void 0:r.isFetching),isReadOnlyMode:Object(u.m)(e.transportInfo.status),createContract:e.createContract,cloneContract:e.cloneContract,deleteContract:e.deleteContract,getContractListByFilters:function(t,a,n,i){return e.getContractList(t,a,"",n,i)},hasAutoGenerateRateCode:!0},i.a.createElement(ge,null)))}))),Pe=(a(3916),function(e){return i.a.createElement("div",{className:"transport-product-contracts"},i.a.createElement(Ee,null))});t.default=Pe}}]);