(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[21],{3887:function(e,a,t){},3888:function(e,a,t){"use strict";var n;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=(n=t(1044))&&n.__esModule?n:{default:n};a.default=i,e.exports=i},4006:function(e,a,t){"use strict";t.r(a);t(38);var n=t(21),i=t.n(n),l=(t(180),t(104)),c=t.n(l),r=(t(204),t(52)),s=t.n(r),o=(t(76),t(44)),m=t.n(o),u=(t(86),t(34)),d=t.n(u),b=t(19),v=t(2),p=t(1),g=t.n(p),f=t(6),E=t(8),y=(t(149),t(69)),N=t.n(y),h=t(3888),O=t.n(h),j=t(83),x=t.n(j),w=t(13),C=t(0),S=t.n(C),k=t(28),P=t(57),V=t(10),F=t(47),z=t(142),A=t(467),M=t(166),L=t(11),q=t(22),D=t(55),B=(t(3887),t(25)),T=B.f().shape({name:B.g().min(2,"Guide service name must be at least 2 characters long.").max(250,"Guide service name must not exceed more than 50 characters.").required("Guide service name is required"),location:B.f().shape({country:B.g().required("Country is required"),cities:B.a().when("isPANCountry",{is:function(e){return!e},then:B.a().min(1,"At least one city is required")}),isPANCountry:B.b()}),audience:B.f().shape({min:B.e().min(0,"Minimum guests cannot be negative").max(9999).required("Required"),max:B.e().min(0,"Maximum guests cannot be negative").max(9999).required("Required")})}),G=N.a.Text;var I=Object(k.b)((function(e){var a=e.Products.guide;return{tabStatus:a.tabStatus.status,details:a.basicDetails.data}}),(function(e){return{updateBasicDetails:Object(V.b)(M.u,e),createGuideService:Object(V.b)(M.f,e),getCityListNoParams:Object(V.b)(z.b,e),getCountryList:Object(V.b)(A.a,e)}}))((function(e){var a,t,n,l,r,o,u=Object(L.q)(),p=(u.get("tab"),u.get("stage"),u.get("contractId"),Object(P.i)()),y=p.id,N=p.productType,h=Object(P.g)(),j=(e.heading,e.subHeading),k=e.loader,V=(e.details,e.onUpdate,e.className),z=e.isCompletelyFilled,A=Object(C.useState)({countryList:[]}),M=Object(E.a)(A,2),B=M[0],I=M[1],_=Object(C.useState)({visible:!1,newValue:"",oldValue:"",warningMessageField:""}),R=Object(E.a)(_,2),J=R[0],K=R[1],H=Object(C.useState)({type:"local-half-day",name:"",location:{country:"",cities:[],isPANCountry:!0},audience:{min:1,max:40}}),U=Object(E.a)(H,2),W=U[0],Y=U[1],Q=[{name:"PAN India",value:!0},{name:"Specific Cities",value:!1}],X=Object(C.useState)([]),Z=Object(E.a)(X,2),$=Z[0],ee=Z[1],ae=Object(C.useState)(!1),te=Object(E.a)(ae,2),ne=te[0],ie=te[1],le=Object(L.d)(Object(f.a)(g.a.mark((function a(){var t,n,i=arguments;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",a.next=3,e.getCityListNoParams(t);case 3:n=a.sent,ee(null===n||void 0===n?void 0:n.content);case 5:case"end":return a.stop()}}),a)}))),300),ce=Object(L.d)(Object(f.a)(g.a.mark((function a(){var t,n,i=arguments;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",a.next=3,e.getCountryList(t);case 3:n=a.sent,I(Object(v.a)(Object(v.a)({},B),{},{countryList:null===n||void 0===n?void 0:n.content}));case 5:case"end":return a.stop()}}),a)}))),300),re=function(){var a=Object(f.a)(g.a.mark((function a(t,n){var i,l,c;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("new"!==y){a.next=9;break}return a.next=3,e.createGuideService(t);case 3:i=a.sent,l=i.data,c=l.businessCode,h.push("/resources/guide-services/".concat(c,"?stage=working&tab=basic-details")),a.next=13;break;case 9:return a.next=11,e.updateBasicDetails(y,t);case 11:n(!1),ie(!1);case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();Object(C.useEffect)((function(){if("new"===y)ce(),le(),ie(!0);else{var a,t,n,i;ie(!1);var l=[Object(L.g)(e.details,"location.country",{})],c=Object(b.a)(Object(L.g)(e.details,"location.cities",[]));Y(Object(v.a)(Object(v.a)({},e.details),{},{location:Object(v.a)(Object(v.a)({},null===(a=e.details)||void 0===a?void 0:a.location),{},{country:null===(t=e.details)||void 0===t||null===(n=t.location.country)||void 0===n?void 0:n.code,cities:null===(i=e.details)||void 0===i?void 0:i.location.cities.map((function(e){return e.code}))})})),I({countryList:l}),ee(c)}}),[e.details]);var se=!!(null===k||void 0===k?void 0:k.isFetching);null===k||void 0===k||k.errors;return S.a.createElement("div",{className:"product-hotel-room-configurations ".concat(V)},S.a.createElement(m.a,{type:"inner",title:S.a.createElement("div",{className:"flex flex-col"},S.a.createElement("p",null,"Basic Details",z?L.k:S.a.createElement(x.a,{twoToneColor:"#ea9300"})),S.a.createElement("p",{className:"mt-6 text-12 light"},j)),extra:S.a.createElement(S.a.Fragment,null,Object(L.m)(e.tabStatus)||se?S.a.createElement("div",null):!se&&S.a.createElement("div",{onClick:function(){return ie(!0)},className:"flex items-center cursor-pointer"},S.a.createElement("img",{src:"/img/edit.svg"}),S.a.createElement("p",{className:"text-14 semibold ml-10"},"Edit Details")))},se?S.a.createElement(d.a,{active:!0}):S.a.createElement(S.a.Fragment,null,S.a.createElement("p",{className:"mb-6"},"Name of the service:"," ",S.a.createElement("span",{className:"semibold capitalize"},W.name)),S.a.createElement("p",{className:"mb-6"},"Location:"," ",S.a.createElement("span",{className:"semibold capitalize"},Object(L.c)(B.countryList,W.location.country))),S.a.createElement("p",{className:"mb-6"},"Duration Type:"," ",S.a.createElement("span",{className:"semibold capitalize"},Object(L.c)(F.c,null===(a=e.details)||void 0===a?void 0:a.type,"name","value"))),S.a.createElement("p",{className:"mb-6"},"PAN India:"," ",S.a.createElement("span",{className:"semibold capitalize"},(null===(t=e.details)||void 0===t?void 0:t.location.isPANCountry)?"Yes":"No")),(null===(n=e.details)||void 0===n?void 0:n.location.cities.length)>0&&S.a.createElement("p",{className:"mb-6"},"Cities:"," ",S.a.createElement("span",{className:"semibold capitalize"},null===(l=e.details)||void 0===l?void 0:l.location.cities.map((function(e){return e.name})).join(", "))),S.a.createElement("p",{className:"mb-6"},"Audience:"," ",S.a.createElement("span",{className:"semibold capitalize"},null===(r=e.details)||void 0===r?void 0:r.audience.min," "," \u279c ",null===(o=e.details)||void 0===o?void 0:o.audience.max)))),S.a.createElement(D.a,{width:"859px",title:S.a.createElement("div",{className:"flex"},S.a.createElement("img",{className:"width-16 mr-10",src:"/img/guide_service.svg",alt:"guide_service.svg"}),S.a.createElement("p",{className:"flex items-center color-black weight-700 size-22"},"Basic Details")),destroyOnClose:!0,visible:ne,onCancel:function(){"new"===y?h.push("/resources/".concat(N)):ie(!1)}},S.a.createElement(w.e,{enableReinitialize:!0,validationSchema:T,initialValues:W,onSubmit:function(e,a){var t=a.isSubmitting;return re(e,t)}},(function(a){var t,n,l=a.setFieldValue,r=a.isSubmitting,o=a.values;a.errors;return S.a.createElement("div",{id:"product-guide-basic-details"},S.a.createElement(w.d,null,S.a.createElement("div",{className:"mt-16 form-grid grid-2"},S.a.createElement("div",null,S.a.createElement("p",{className:"mb-12 text-14 bold capitalize"},"Service Details"),S.a.createElement(w.b,{component:q.b,label:"Name of the service *",value:Object(L.g)(o,"name",""),name:"name",type:"name",hasFeedback:!0})),S.a.createElement("div",null,S.a.createElement("p",{className:"mb-12 text-14 bold capitalize"},"Location"),S.a.createElement(w.b,{component:q.d,filterOption:!1,name:"location.country",label:"Select Country *",value:null===o||void 0===o||null===(t=o.location)||void 0===t?void 0:t.country,getPopupContainer:function(){return document.getElementById("product-guide-basic-details")},optionValueKey:"code",showSearch:!0,selectOptions:B.countryList,allowClear:!0,onClear:ce,onSearch:ce,hasFeedback:!0}))),S.a.createElement("div",{className:"mt-20"},S.a.createElement("p",{className:"mb-12 text-14 bold capitalize"},"Cities *"),S.a.createElement("div",{className:"mt-10 form-grid grid-4"},Q.map((function(a,t){return S.a.createElement("label",{key:t},S.a.createElement(w.b,{as:s.a,type:"radio",onChange:function(a){var t=a.target.value;""!==e.tabStatus?K({fieldName:"location.isPANCountry",newValue:t,oldValue:Object(L.g)(W,"location.isPANCountry",""),warningMessageField:"Cities Type",visible:!0}):l("location.isPANCountry",t)},name:"location.isPANCountry",value:a.value}),S.a.createElement("span",{className:"capitalize"},a.name))})))),S.a.createElement("div",{className:"mt-20 form-grid grid-2"},!1===o.location.isPANCountry&&S.a.createElement("div",{className:"mt-20"},S.a.createElement(w.b,{component:q.d,filterOption:!1,name:"location.cities",label:"Select City *",value:null===o||void 0===o||null===(n=o.location)||void 0===n?void 0:n.cities,getPopupContainer:function(){return document.getElementById("product-guide-basic-details")},optionValueKey:"code",showSearch:!0,mode:"multiple",showArrow:!0,selectOptions:$,onSearch:le,hasFeedback:!0}))),S.a.createElement("div",{className:"mt-10 form-grid grid-4"},S.a.createElement("div",null,S.a.createElement(w.b,{component:q.b,label:"Minimum guests *",value:Object(L.g)(o,"audience.min",""),onBlur:function(a){var t=a.target.value;""!==e.tabStatus?K({fieldName:"audience.min",newValue:t,oldValue:Object(L.g)(W,"audience.min",""),warningMessageField:"Min guests",visible:!0}):l("audience.min",t)},name:"audience.min",type:"number",hasFeedback:!0})),S.a.createElement("div",null,S.a.createElement(w.b,{component:q.b,label:"Maximum guests *",onBlur:function(a){var t=a.target.value;""!==e.tabStatus?K({fieldName:"audience.max",newValue:t,oldValue:Object(L.g)(W,"audience.max",""),warningMessageField:"Max guests",visible:!0}):l("audience.max",t)},value:Object(L.g)(o,"audience.max",""),name:"audience.max",type:"number",hasFeedback:!0}))),S.a.createElement("div",{className:"mt-20"},S.a.createElement(G,{className:"bold",strong:!0},"Duration"," ",S.a.createElement("span",{className:"text-12 light"},"(Changing duration type after filling ratecards will reset all their pricing related data)")),S.a.createElement("div",{className:"mt-10 form-grid grid-3"},F.c.map((function(a,t){return S.a.createElement("label",{key:t},S.a.createElement(w.b,{as:s.a,type:"radio",onChange:function(a){var t=a.target.value;""!==e.tabStatus?K({fieldName:"type",newValue:t,oldValue:Object(L.g)(W,"type",""),warningMessageField:"Duration Type",visible:!0}):l("type",t)},name:"type",value:a.value}),S.a.createElement("span",{className:"capitalize"},a.name))}))),S.a.createElement(w.a,{name:"type",render:function(e){return S.a.createElement(G,{type:"danger"},e)}})),S.a.createElement(D.a,{visible:J.visible,keyboard:!1,footer:null,width:"664px",className:"product-guide-basic-details-modal",closeIcon:S.a.createElement("img",{onClick:function(){return l(J.fieldName,J.oldValue).then((function(){return K(Object(v.a)(Object(v.a)({},J),{},{visible:!1}))}))},alt:"close",src:"/img/black-cancel-circle.svg"})},S.a.createElement("p",{className:"capitalize bold text-26"},S.a.createElement(x.a,{twoToneColor:"#f13737"})," Warning!"),S.a.createElement(c.a,null),S.a.createElement("p",{className:"bold text-16 light"},"Changing the"," ",S.a.createElement("span",{className:"semibold"},J.warningMessageField)," ","would also ",S.a.createElement("span",{className:"semibold"},"reset")," any data related to Pricing or Surcharges that has been filled in the ratecards after you save the form."),S.a.createElement("p",{className:"mt-16 bold text-16 light"},"Once you change this value and save the data further, this action will be permanent and cannot be undone."),S.a.createElement("div",{className:"flex justify-between items-center"},S.a.createElement(i.a,{onClick:function(){l(J.fieldName,J.oldValue).then((function(){return K(Object(v.a)(Object(v.a)({},J),{},{visible:!1}))}))},className:"mt-40",type:"link"},S.a.createElement(O.a,null)," Go Back"),S.a.createElement(i.a,{onClick:function(){l(J.fieldName,J.newValue).then((function(){K(Object(v.a)(Object(v.a)({},J),{},{visible:!1})),le()}))},className:"capitalize mt-40",type:"primary"},"Confirm and keep editing form"))),S.a.createElement("div",{className:"mt-40 flex flex-start"},S.a.createElement(i.a,{loading:r,type:"primary",htmlType:"submit"},r?"Saving...":"Save"))))}))))}));a.default=I}}]);