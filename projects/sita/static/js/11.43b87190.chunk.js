(this["webpackJsonpatko-mvp-frontend"]=this["webpackJsonpatko-mvp-frontend"]||[]).push([[11],{3872:function(e,t,a){"use strict";a(159);var n=a(93),l=a.n(n),r=(a(118),a(54)),c=a.n(r),i=(a(204),a(52)),m=a.n(i),s=(a(38),a(21)),o=a.n(s),u=(a(180),a(104)),d=a.n(u),b=a(2),p=a(8),v=(a(149),a(69)),g=a.n(v),E=a(13),f=a(0),h=a.n(f),y=a(57),N=a(11),O=a(25),j=a(22),S=(a(3873),{title:"mr",gender:"male",firstName:"deepak",lastName:"deepak",telephone:"9999999999",email:"deepak@deepak.com",designation:"Company Owner",id:"f89a2cae-207e-4925-af74-fbdbe65dc83c",department:"reservation"}),k=g.a.Text,x=(g.a.Link,g.a.Title,function(e){var t=e.setShowModal,a=e.onSubmit,n=e.initialValues,r=e.setInitialValues,i=e.inEditMode,s=e.isDesignationDisabled,u=Object(f.useState)(!1),v=Object(p.a)(u,2),g=(v[0],v[1],/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/),x=O.f().shape({firstName:O.g().min(2,"Too Short!").max(250,"Too Long!").required("First name is required"),middleName:O.g().nullable(),lastName:O.g().min(2,"Too Short!").max(250,"Too Long!").required("Last name is required"),telephone:O.g().matches(g,"Phone number is not valid").min(6,"Phone number cannot be less than 6 digits").max(14,"Phone number cannot exceed more than 14 digts").required("Phone number required"),alternateTelephone:O.g().matches(g,"Phone number is not valid").min(6,"Phone number cannot be less than 6 digits").max(14,"Phone number cannot exceed more than 14 digts").nullable(),email:O.g().email().required("Email is required"),gender:O.g().required("Gender is required")});Object(y.i)().id;return h.a.createElement(l.a,{visible:!0,keyboard:!1,footer:null,width:"926px",className:"add-new-contact-modal",closeIcon:h.a.createElement("img",{onClick:function(){return t(!1)},alt:"close",src:"/img/black-cancel-circle.svg"})},h.a.createElement("div",{id:"new-serving-location-modal"},h.a.createElement(E.e,{enableReinitialize:!0,validationSchema:x,initialValues:(null===n||void 0===n?void 0:n.firstName)?n:Object(b.a)(Object(b.a)({},n),{},{gender:"male",title:"mr"}),onSubmit:function(e,t){t.setSubmitting;return a(e)}},(function(t){var a=t.setFieldValue,l=t.isSubmitting,u=t.values;return h.a.createElement(h.a.Fragment,null,i?h.a.createElement("p",{className:"capitalize bold text-26"},"Edit ".concat(n.designation," contact")):h.a.createElement("p",{className:"capitalize bold text-26"},"Add ".concat(n.designation," contact")),h.a.createElement(d.a,null),["staging","development"].includes("staging")&&r&&h.a.createElement(o.a,{type:"link",onClick:function(){r(S)}},"Click to populate data"),h.a.createElement(E.d,null,Object(N.e)(u),n.hasOwnProperty("designation")&&!e.isGuidesOnly&&h.a.createElement("div",{className:"form-grid grid-3"},h.a.createElement(E.b,{component:j.b,label:"Designation *",value:u.designation,validate:function(e){if(!e)return"Designation is required"},disabled:s,name:"designation",type:"text"}),h.a.createElement(E.b,{component:j.d,name:"department",validate:function(e){if(!e)return"Select department"},label:"Select Department *",value:u.department,getPopupContainer:function(){return document.getElementById("new-serving-location-modal")},selectOptions:[{name:"Finance",value:"finance"},{name:"Reservation",value:"reservation"},{name:"Sales",value:"sales"},{name:"Management",value:"management"}]})),h.a.createElement("p",{className:"bold mt-18 mb-6"},"Salutation"),h.a.createElement("div",{className:"mb-10 form-grid grid-2"},h.a.createElement("div",null,h.a.createElement("label",null,h.a.createElement(E.b,{as:m.a,type:"radio",name:"title",value:"mr"}),"Mr"),h.a.createElement("label",{className:"ml-40"},h.a.createElement(E.b,{as:m.a,type:"radio",name:"title",value:"mrs"}),"Mrs"),h.a.createElement("label",{className:"ml-40"},h.a.createElement(E.b,{as:m.a,type:"radio",name:"title",value:"ms"}),"Ms"),h.a.createElement("label",{className:"ml-40"},h.a.createElement(E.b,{as:m.a,type:"radio",name:"title",value:"dr"}),"Dr"),h.a.createElement(E.a,{name:"title",render:function(e){return h.a.createElement(k,{type:"danger"},e)}}))),h.a.createElement("p",{className:"bold mt-18 mb-6"},"Gender"),h.a.createElement("div",{className:"mb-6 form-grid grid-2"},h.a.createElement("div",null,h.a.createElement("label",null,h.a.createElement(E.b,{as:m.a,type:"radio",name:"gender",value:"male"}),"Male"),h.a.createElement("label",{className:"ml-40"},h.a.createElement(E.b,{as:m.a,type:"radio",name:"gender",value:"female"}),"Female"),h.a.createElement("label",{className:"ml-40"},h.a.createElement(E.b,{as:m.a,type:"radio",name:"gender",value:"other"}),"Other"))),h.a.createElement("div",{className:"mb-18"},h.a.createElement(E.a,{name:"gender",render:function(e){return h.a.createElement(k,{type:"danger"},e)}})),h.a.createElement("div",{className:"form-grid grid-3"},h.a.createElement(E.b,{component:j.b,label:"First Name *",value:u.firstName,name:"firstName",type:"firstName"}),h.a.createElement(E.b,{component:j.b,label:"Middle Name",value:u.middleName,name:"middleName",type:"middleName"}),h.a.createElement(E.b,{component:j.b,label:"Last Name *",value:u.lastName,name:"lastName",type:"lastName"})),h.a.createElement("div",{className:"form-grid grid-3"},h.a.createElement(E.b,{component:j.b,label:"Contact Number *",value:u.telephone,name:"telephone",type:"telephone"}),h.a.createElement(E.b,{component:j.b,label:"Alternate Number",value:u.alternateTelephone,name:"alternateTelephone",type:"telephone"}),h.a.createElement(E.b,{component:j.b,label:"Email ID *",value:u.email,name:"email",type:"email"})),n.hasOwnProperty("isPrimary")&&h.a.createElement("div",null,h.a.createElement("label",null,h.a.createElement(E.b,{name:"isPrimary",valuePropName:"checked",as:c.a,onChange:function(e){a("isPrimary",e.target.checked),a("primary",e.target.checked)},checked:u.isPrimary}),h.a.createElement("span",{className:"capitalize ml-10"},"is Primary?"))),h.a.createElement("div",{className:"mt-30 flex justify-flex-start"},h.a.createElement(o.a,{loading:l,type:"primary",htmlType:"submit"},l?"Saving...":"Save Contact"))))}))))});t.a=x},3873:function(e,t,a){},3874:function(e,t,a){},3875:function(e,t,a){"use strict";a(0),a(3874)},3877:function(e,t,a){},3878:function(e,t,a){"use strict";a(678);var n=a(534),l=a.n(n),r=a(2),c=a(19),i=a(8),m=a(0),s=a.n(m),o=a(57),u=(a(3877),a(3872)),d=a(70),b=function(e){var t=e.contacts,a=e.showHeader,n=e.origin,b=e.update,p=e.deleteContact,v=Object(m.useState)(!1),g=Object(i.a)(v,2),E=g[0],f=g[1],h=Object(m.useState)(!1),y=Object(i.a)(h,2),N=y[0],O=y[1],j=Object(m.useState)([]),S=Object(i.a)(j,2),k=S[0],x=S[1],C=Object(m.useState)({}),P=Object(i.a)(C,2),H=P[0],w=P[1],T=Object(m.useState)(null),D=Object(i.a)(T,2),I=D[0],q=D[1];Object(m.useEffect)((function(){x(t)}),[t]);var V=Object(o.i)().id;return s.a.createElement("div",{className:"mt-20 list-contacts"},a&&k&&k.length?s.a.createElement("div",{className:"list-contacts-grid mb-16"},s.a.createElement("p",null,"Designation"),s.a.createElement("p",null,"Department"),s.a.createElement("p",null,"Full Name"),s.a.createElement("p",null,"Contact Details"),"hotel-contacts"===n?s.a.createElement("p",null,"Primary/Other"):null):s.a.createElement("p",null,"No contacts found"),s.a.createElement("div",null,k&&k.map((function(e,t){return s.a.createElement("div",{className:"list-contacts-grid list mb-10",key:t},s.a.createElement("div",{className:"bold capitalize"},e.designation),s.a.createElement("div",{className:"bold capitalize"},e.department),s.a.createElement("div",{className:"capitalize"},"".concat(e.firstName," ").concat(e.middleName||""," ").concat(e.lastName)),s.a.createElement("div",{style:{textAlign:"left"}},s.a.createElement("p",null,s.a.createElement("span",{className:"semibold"},"Primary:")," ",e.telephone),s.a.createElement("p",null,s.a.createElement("span",{className:"semibold"},"Alternate:")," ",(null===e||void 0===e?void 0:e.alternateTelephone)||"--"),s.a.createElement("p",null,s.a.createElement("span",{className:"lowercase semibold"},"Email:")," ",e.email)),"hotel-contacts"===n?s.a.createElement("div",null,!0===e.isPrimary?s.a.createElement(l.a,{color:"blue"},"Primary"):s.a.createElement(l.a,{color:"red"},"Other")):null,s.a.createElement("div",{className:"flex justify-end items-center"},s.a.createElement("img",{src:"/img/edit-blue.svg",onClick:function(){return function(e){w(Object(r.a)(Object(r.a)({},k[e]),{},{gender:k[e].gender?k[e].gender:"male"})),q(e),f(!0)}(t)},className:"cursor-pointer"}),s.a.createElement("img",{src:"/img/trash-blue.svg",onClick:function(){q(t),O(!0)},className:"cursor-pointer ml-10"})))})),E&&s.a.createElement(u.a,{onSubmit:function(e){return b(V,e.id,e).then((function(){f(!1)}))},inEditMode:!0,initialValues:H,setShowModal:f}),s.a.createElement(d.a,{confirmationModalSpecs:{visible:N,heading:"Are you sure?",subHeading:"Are you sure you want to delete this contact?",buttonText:"Delete",submit:function(){var e=Object(c.a)(k),t=e[I].id;p(V,t),e.splice(I,1),x(e),O(!1)}},cancelConfirmationModal:function(){return O(!1)}})))};b.defaultProps={showHeader:!1};var p=b;t.a=p},3919:function(e,t,a){},4e3:function(e,t,a){"use strict";a.r(t);var n=a(8),l=(a(149),a(69)),r=a.n(l),c=(a(140),a(63)),i=a.n(c),m=a(0),s=a.n(m),o=a(28),u=a(10),d=a(57),b=a(11),p=a(682),v=a(681),g=(a(38),a(21)),E=a.n(g),f=(a(204),a(52)),h=a.n(f),y=a(1),N=a.n(y),O=a(6),j=(a(15),a(443),a(13)),S=a(22),k=a(286),x=a(25),C=x.f({amount:x.g().trim().matches(/^[0-9]*$/,"Invalid amount").nullable(),description:x.g().min(2,"Description cannot be less than 2 characters").max(250,"Description cannot exceed more than 250 characters").nullable()}),P=r.a.Text;r.a.Link,r.a.Title;var H=Object(o.b)((function(e,t){var a="fnb"==t.type?"fnb":"hotel",n=e.Suppliers,l=n.root,r=n[a].regulatory.data;return{tabStatus:l.tabStatus.status,formValues:r}}),(function(e,t){var a="fnb"==t.type?v:p;return{updateHotelRegulatory:Object(u.b)(a.updateHotelRegulatory,e)}}))((function(e){var t=Object(d.i)().id,a=(Object(b.q)().get("stage"),Object(m.useState)({})),l=Object(n.a)(a,2),r=l[0],c=l[1],i=function(){var a=Object(O.a)(N.a.mark((function a(n){return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.updateHotelRegulatory(t,n);case 2:e.changeSubtab("hotel-contacts");case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(m.useEffect)((function(){c(e.formValues)}),[e.formValues]),s.a.createElement("div",{className:"basic-details regulatory ".concat(Object(b.m)(e.tabStatus)&&"read-only-mode")},s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(j.e,{initialValues:r,validationSchema:C,enableReinitialize:!0,onSubmit:function(){var e=Object(O.a)(N.a.mark((function e(t,a){var n,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.setSubmitting,t.hasInsurance){e.next=7;break}return l={amount:null,description:null,document:null,hasInsurance:t.hasInsurance},e.next=5,i(l);case 5:e.next=9;break;case 7:return e.next=9,i(t);case 9:n(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(t){var a=t.setFieldValue,n=t.isSubmitting,l=t.values,r=t.errors;return s.a.createElement(s.a.Fragment,null,s.a.createElement(j.d,null,s.a.createElement("div",{className:"mt-10"},s.a.createElement(P,{strong:!0},"Third Party Liability Insurance"),s.a.createElement("div",{className:"mt-20 form-grid grid-4"},s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(j.b,{as:h.a,type:"radio",name:"hasInsurance",value:!0}),"Yes"),s.a.createElement("label",{className:"ml-40"},s.a.createElement(j.b,{as:h.a,type:"radio",name:"hasInsurance",value:!1}),"No"))),s.a.createElement(j.a,{name:"hasInsurance",render:function(e){return s.a.createElement(P,{type:"danger"},e)}})),Object(b.g)(l,"hasInsurance",!1)&&s.a.createElement("div",null,s.a.createElement("div",{className:"mt-10 form-grid grid-2"},s.a.createElement(j.b,{component:S.b,label:"Amount *",value:l.amount,name:"amount",type:"amount",validate:function(e){var t;return e||(t="Amount is required"),t}}),s.a.createElement(j.b,{component:S.b,label:"Details *",value:l.description,name:"description",type:"description",validate:function(e){var t;return e||(t="Description is required"),t}})),s.a.createElement("div",{className:"form-grid grid-2"},s.a.createElement(j.b,{component:k.a,multiple:!1,value:[Object(b.g)(l,"document",{})],onChange:function(e){a("document.name",e[0].name),a("document.url",e[0].url)},validate:function(e){if(!e.url)return"Please Upload Insurance Document"},errors:r,placeholder:"Upload Insurance Document",name:"document",label:"Insurance Document"}))),!Object(b.m)(e.tabStatus)&&s.a.createElement("div",{className:"flex flex-start mt-40"},s.a.createElement(E.a,{loading:n,type:"primary",htmlType:"submit"},n?"Saving...":"Save & continue"))))}))))))})),w=a(2),T=(a(18),a(3919),{title:"",firstName:"",lastName:"",telephone:"",email:"",designation:"",middleName:"",isPrimary:"",department:""}),D=a(3872),I=a(3878);a(657);var q=Object(o.b)((function(e,t){var a="fnb"==t.type?"fnb":"hotel",n=e.Suppliers,l=n.root,r=n.basicDetails,c=n[a].contacts.data,i=l.tabStatus.status;return{basic:r.data,tabStatus:i,formValues:c}}),(function(e,t){var a="fnb"==t.type?v:p;return{createHotelContact:Object(u.b)(a.createHotelContact,e),getHotelContacts:Object(u.b)(a.getHotelContacts,e),updateHotelContact:Object(u.b)(a.updateHotelContact,e),deleteHotelContact:Object(u.b)(a.deleteHotelContact,e)}}))((function(e){var t=Object(d.i)().id,a=Object(b.q)().get("stage"),l=Object(m.useState)(null),r=Object(n.a)(l,2),c=r[0],i=r[1],o=Object(m.useState)(!1),u=Object(n.a)(o,2),p=u[0],v=u[1],g=Object(m.useState)(T),f=Object(n.a)(g,2),h=f[0],y=f[1],j=function(){var n=Object(O.a)(N.a.mark((function n(l){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!c){n.next=9;break}return n.next=3,e.updateHotelContact(t,c.id,l);case 3:return i(null),v(!1),n.next=7,e.getHotelContacts(t,a);case 7:n.next=14;break;case 9:return n.next=11,e.createHotelContact(t,l);case 11:return v(!1),n.next=14,e.getHotelContacts(t,a);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),S="fnb"==e.type?"stand-alone-fnb":"hotel";return s.a.createElement("div",{className:"basic-details ".concat(Object(b.m)(e.tabStatus)&&"read-only-mode")},s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("div",{className:"form-grid mb-26"},s.a.createElement("div",{className:"button-dashed",onClick:function(){y(Object(w.a)({},T)),v(!0)}},s.a.createElement("img",{className:"mr-10",src:"/img/plus.svg"}),s.a.createElement("p",null,"Add New Contact"))),s.a.createElement("div",{className:"contacts-hotel"},s.a.createElement("div",null,s.a.createElement(I.a,{update:e.updateHotelContact,deleteContact:e.deleteHotelContact,showHeader:!0,origin:"hotel-contacts",contacts:e.formValues}))),p&&s.a.createElement(D.a,{setInitialValues:y,onSubmit:j,initialValues:h,setShowModal:v}),s.a.createElement("div",{className:"flex flex-start mt-40"},s.a.createElement(E.a,{onClick:function(){var t,a;if((null===(t=e.basic)||void 0===t?void 0:t.services[(null===(a=e.basic)||void 0===a?void 0:a.services.length)-1])===S)e.changeTab("basic-details");else{var n,l,r=(null===(n=e.basic)||void 0===n?void 0:n.services.findIndex((function(e){return e==S})))+1;e.changeTab(null===(l=e.basic)||void 0===l?void 0:l.services[r])}},type:"primary",htmlType:"submit"},"Continue")))))})),V=(a(3875),a(160)),L=a(27),M=i.a.TabPane;r.a.Text,r.a.Link;var R=Object(o.b)((function(e,t){var a="fnb"==t.type?"fnb":"hotel",n=e.Suppliers,l=n.root,r=n[a],c=r.regulatory.isDataSaved,i=r.contacts.isDataSaved;return{tabStatus:l.tabStatus.status,isRegulatorySaved:c,isContactsSaved:i}}),(function(e,t){var a="fnb"==t.type?v:p;return{getHotelLoad:Object(u.b)(a.getHotelLoad,e)}}))((function(e){var t=Object(d.i)().id,a=(Object(d.g)(),Object(b.q)().get("stage")),l=Object(m.useState)("hotel-regulatory"),r=Object(n.a)(l,2),c=r[0],o=r[1];return Object(m.useEffect)((function(){e.getHotelLoad(t,a)}),[]),s.a.createElement(V.a,{loadingKey:L.r.SUPPLIER_HOTEL,type:"shimmer"},s.a.createElement("div",{className:"component-hotels"},s.a.createElement("div",null,s.a.createElement(i.a,{onChange:function(e){return o(e)},activeKey:c,centered:!0},s.a.createElement(M,{tab:s.a.createElement("span",null,"Regulatory",e.isRegulatorySaved&&s.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"hotel-regulatory"},s.a.createElement(H,{type:e.type,changeSubtab:o})),s.a.createElement(M,{tab:s.a.createElement("span",null,"Contacts",e.isContactsSaved&&s.a.createElement("img",{className:"ml-10",src:"/img/green-check-mark.svg"})),key:"hotel-contacts"},s.a.createElement(q,{type:e.type,changeTab:e.changeTab,changeSubtab:o}))))))}));t.default=R}}]);